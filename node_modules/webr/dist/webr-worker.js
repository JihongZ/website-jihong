"use strict";var so=Object.create;var Na=Object.defineProperty;var io=Object.getOwnPropertyDescriptor;var oo=Object.getOwnPropertyNames;var lo=Object.getPrototypeOf,co=Object.prototype.hasOwnProperty;var Ua=e=>{throw TypeError(e)};var $=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports);var uo=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of oo(r))!co.call(e,a)&&a!==t&&Na(e,a,{get:()=>r[a],enumerable:!(n=io(r,a))||n.enumerable});return e};var Lt=(e,r,t)=>(t=e!=null?so(lo(e)):{},uo(r||!e||!e.__esModule?Na(t,"default",{value:e,enumerable:!0}):t,e));var Rn=(e,r,t)=>r.has(e)||Ua("Cannot "+t);var A=(e,r,t)=>(Rn(e,r,"read from private field"),t?t.call(e):r.get(e)),C=(e,r,t)=>r.has(e)?Ua("Cannot add the same private member more than once"):r instanceof WeakSet?r.add(e):r.set(e,t),z=(e,r,t,n)=>(Rn(e,r,"write to private field"),n?n.call(e,t):r.set(e,t),t),We=(e,r,t)=>(Rn(e,r,"access private method"),t);var Ca=(e,r,t,n)=>({set _(a){z(e,r,a,t)},get _(){return A(e,r,n)}});var $t=$(se=>{"use strict";Object.defineProperty(se,"__esModule",{value:!0});se.getUint64=se.getInt64=se.setInt64=se.setUint64=se.UINT32_MAX=void 0;se.UINT32_MAX=4294967295;function mo(e,r,t){let n=t/4294967296,a=t;e.setUint32(r,n),e.setUint32(r+4,a)}se.setUint64=mo;function yo(e,r,t){let n=Math.floor(t/4294967296),a=t;e.setUint32(r,n),e.setUint32(r+4,a)}se.setInt64=yo;function _o(e,r){let t=e.getInt32(r),n=e.getUint32(r+4);return t*4294967296+n}se.getInt64=_o;function bo(e,r){let t=e.getUint32(r),n=e.getUint32(r+4);return t*4294967296+n}se.getUint64=bo});var Br=$(X=>{"use strict";var kn,An,Dn;Object.defineProperty(X,"__esModule",{value:!0});X.utf8DecodeTD=X.TEXT_DECODER_THRESHOLD=X.utf8DecodeJs=X.utf8EncodeTE=X.TEXT_ENCODER_THRESHOLD=X.utf8EncodeJs=X.utf8Count=void 0;var Va=$t(),Lr=(typeof process>"u"||((kn=process==null?void 0:process.env)===null||kn===void 0?void 0:kn.TEXT_ENCODING)!=="never")&&typeof TextEncoder<"u"&&typeof TextDecoder<"u";function wo(e){let r=e.length,t=0,n=0;for(;n<r;){let a=e.charCodeAt(n++);if((a&4294967168)===0){t++;continue}else if((a&4294965248)===0)t+=2;else{if(a>=55296&&a<=56319&&n<r){let s=e.charCodeAt(n);(s&64512)===56320&&(++n,a=((a&1023)<<10)+(s&1023)+65536)}(a&4294901760)===0?t+=3:t+=4}}return t}X.utf8Count=wo;function Ro(e,r,t){let n=e.length,a=t,s=0;for(;s<n;){let i=e.charCodeAt(s++);if((i&4294967168)===0){r[a++]=i;continue}else if((i&4294965248)===0)r[a++]=i>>6&31|192;else{if(i>=55296&&i<=56319&&s<n){let o=e.charCodeAt(s);(o&64512)===56320&&(++s,i=((i&1023)<<10)+(o&1023)+65536)}(i&4294901760)===0?(r[a++]=i>>12&15|224,r[a++]=i>>6&63|128):(r[a++]=i>>18&7|240,r[a++]=i>>12&63|128,r[a++]=i>>6&63|128)}r[a++]=i&63|128}}X.utf8EncodeJs=Ro;var Vt=Lr?new TextEncoder:void 0;X.TEXT_ENCODER_THRESHOLD=Lr?typeof process<"u"&&((An=process==null?void 0:process.env)===null||An===void 0?void 0:An.TEXT_ENCODING)!=="force"?200:0:Va.UINT32_MAX;function xo(e,r,t){r.set(Vt.encode(e),t)}function Eo(e,r,t){Vt.encodeInto(e,r.subarray(t))}X.utf8EncodeTE=Vt!=null&&Vt.encodeInto?Eo:xo;var vo=4096;function So(e,r,t){let n=r,a=n+t,s=[],i="";for(;n<a;){let o=e[n++];if((o&128)===0)s.push(o);else if((o&224)===192){let d=e[n++]&63;s.push((o&31)<<6|d)}else if((o&240)===224){let d=e[n++]&63,l=e[n++]&63;s.push((o&31)<<12|d<<6|l)}else if((o&248)===240){let d=e[n++]&63,l=e[n++]&63,u=e[n++]&63,b=(o&7)<<18|d<<12|l<<6|u;b>65535&&(b-=65536,s.push(b>>>10&1023|55296),b=56320|b&1023),s.push(b)}else s.push(o);s.length>=vo&&(i+=String.fromCharCode(...s),s.length=0)}return s.length>0&&(i+=String.fromCharCode(...s)),i}X.utf8DecodeJs=So;var To=Lr?new TextDecoder:null;X.TEXT_DECODER_THRESHOLD=Lr?typeof process<"u"&&((Dn=process==null?void 0:process.env)===null||Dn===void 0?void 0:Dn.TEXT_DECODER)!=="force"?200:0:Va.UINT32_MAX;function ko(e,r,t){let n=e.subarray(r,r+t);return To.decode(n)}X.utf8DecodeTD=ko});var On=$(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.ExtData=void 0;var Pn=class{constructor(r,t){this.type=r,this.data=t}};zr.ExtData=Pn});var Hr=$(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.DecodeError=void 0;var Mn=class e extends Error{constructor(r){super(r);let t=Object.create(e.prototype);Object.setPrototypeOf(this,t),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:e.name})}};jr.DecodeError=Mn});var In=$(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.timestampExtension=Z.decodeTimestampExtension=Z.decodeTimestampToTimeSpec=Z.encodeTimestampExtension=Z.encodeDateToTimeSpec=Z.encodeTimeSpecToTimestamp=Z.EXT_TIMESTAMP=void 0;var Ao=Hr(),Za=$t();Z.EXT_TIMESTAMP=-1;var Do=4294967296-1,Po=17179869184-1;function Ja({sec:e,nsec:r}){if(e>=0&&r>=0&&e<=Po)if(r===0&&e<=Do){let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e),t}else{let t=e/4294967296,n=e&4294967295,a=new Uint8Array(8),s=new DataView(a.buffer);return s.setUint32(0,r<<2|t&3),s.setUint32(4,n),a}else{let t=new Uint8Array(12),n=new DataView(t.buffer);return n.setUint32(0,r),(0,Za.setInt64)(n,4,e),t}}Z.encodeTimeSpecToTimestamp=Ja;function Xa(e){let r=e.getTime(),t=Math.floor(r/1e3),n=(r-t*1e3)*1e6,a=Math.floor(n/1e9);return{sec:t+a,nsec:n-a*1e9}}Z.encodeDateToTimeSpec=Xa;function Ga(e){if(e instanceof Date){let r=Xa(e);return Ja(r)}else return null}Z.encodeTimestampExtension=Ga;function Ka(e){let r=new DataView(e.buffer,e.byteOffset,e.byteLength);switch(e.byteLength){case 4:return{sec:r.getUint32(0),nsec:0};case 8:{let t=r.getUint32(0),n=r.getUint32(4),a=(t&3)*4294967296+n,s=t>>>2;return{sec:a,nsec:s}}case 12:{let t=(0,Za.getInt64)(r,4),n=r.getUint32(0);return{sec:t,nsec:n}}default:throw new Ao.DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${e.length}`)}}Z.decodeTimestampToTimeSpec=Ka;function Ya(e){let r=Ka(e);return new Date(r.sec*1e3+r.nsec/1e6)}Z.decodeTimestampExtension=Ya;Z.timestampExtension={type:Z.EXT_TIMESTAMP,encode:Ga,decode:Ya}});var Vr=$($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.ExtensionCodec=void 0;var qr=On(),Oo=In(),Zt=class{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(Oo.timestampExtension)}register({type:r,encode:t,decode:n}){if(r>=0)this.encoders[r]=t,this.decoders[r]=n;else{let a=1+r;this.builtInEncoders[a]=t,this.builtInDecoders[a]=n}}tryToEncode(r,t){for(let n=0;n<this.builtInEncoders.length;n++){let a=this.builtInEncoders[n];if(a!=null){let s=a(r,t);if(s!=null){let i=-1-n;return new qr.ExtData(i,s)}}}for(let n=0;n<this.encoders.length;n++){let a=this.encoders[n];if(a!=null){let s=a(r,t);if(s!=null){let i=n;return new qr.ExtData(i,s)}}}return r instanceof qr.ExtData?r:null}decode(r,t,n){let a=t<0?this.builtInDecoders[-1-t]:this.decoders[t];return a?a(r,t,n):new qr.ExtData(t,r)}};$r.ExtensionCodec=Zt;Zt.defaultCodec=new Zt});var Nn=$(yt=>{"use strict";Object.defineProperty(yt,"__esModule",{value:!0});yt.createDataView=yt.ensureUint8Array=void 0;function Qa(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Uint8Array.from(e)}yt.ensureUint8Array=Qa;function Mo(e){if(e instanceof ArrayBuffer)return new DataView(e);let r=Qa(e);return new DataView(r.buffer,r.byteOffset,r.byteLength)}yt.createDataView=Mo});var Cn=$(fe=>{"use strict";Object.defineProperty(fe,"__esModule",{value:!0});fe.Encoder=fe.DEFAULT_INITIAL_BUFFER_SIZE=fe.DEFAULT_MAX_DEPTH=void 0;var Jt=Br(),Io=Vr(),es=$t(),No=Nn();fe.DEFAULT_MAX_DEPTH=100;fe.DEFAULT_INITIAL_BUFFER_SIZE=2048;var Un=class{constructor(r=Io.ExtensionCodec.defaultCodec,t=void 0,n=fe.DEFAULT_MAX_DEPTH,a=fe.DEFAULT_INITIAL_BUFFER_SIZE,s=!1,i=!1,o=!1,d=!1){this.extensionCodec=r,this.context=t,this.maxDepth=n,this.initialBufferSize=a,this.sortKeys=s,this.forceFloat32=i,this.ignoreUndefined=o,this.forceIntegerToFloat=d,this.pos=0,this.view=new DataView(new ArrayBuffer(this.initialBufferSize)),this.bytes=new Uint8Array(this.view.buffer)}reinitializeState(){this.pos=0}encodeSharedRef(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.subarray(0,this.pos)}encode(r){return this.reinitializeState(),this.doEncode(r,1),this.bytes.slice(0,this.pos)}doEncode(r,t){if(t>this.maxDepth)throw new Error(`Too deep objects in depth ${t}`);r==null?this.encodeNil():typeof r=="boolean"?this.encodeBoolean(r):typeof r=="number"?this.encodeNumber(r):typeof r=="string"?this.encodeString(r):this.encodeObject(r,t)}ensureBufferSizeToWrite(r){let t=this.pos+r;this.view.byteLength<t&&this.resizeBuffer(t*2)}resizeBuffer(r){let t=new ArrayBuffer(r),n=new Uint8Array(t),a=new DataView(t);n.set(this.bytes),this.view=a,this.bytes=n}encodeNil(){this.writeU8(192)}encodeBoolean(r){r===!1?this.writeU8(194):this.writeU8(195)}encodeNumber(r){Number.isSafeInteger(r)&&!this.forceIntegerToFloat?r>=0?r<128?this.writeU8(r):r<256?(this.writeU8(204),this.writeU8(r)):r<65536?(this.writeU8(205),this.writeU16(r)):r<4294967296?(this.writeU8(206),this.writeU32(r)):(this.writeU8(207),this.writeU64(r)):r>=-32?this.writeU8(224|r+32):r>=-128?(this.writeU8(208),this.writeI8(r)):r>=-32768?(this.writeU8(209),this.writeI16(r)):r>=-2147483648?(this.writeU8(210),this.writeI32(r)):(this.writeU8(211),this.writeI64(r)):this.forceFloat32?(this.writeU8(202),this.writeF32(r)):(this.writeU8(203),this.writeF64(r))}writeStringHeader(r){if(r<32)this.writeU8(160+r);else if(r<256)this.writeU8(217),this.writeU8(r);else if(r<65536)this.writeU8(218),this.writeU16(r);else if(r<4294967296)this.writeU8(219),this.writeU32(r);else throw new Error(`Too long string: ${r} bytes in UTF-8`)}encodeString(r){if(r.length>Jt.TEXT_ENCODER_THRESHOLD){let a=(0,Jt.utf8Count)(r);this.ensureBufferSizeToWrite(5+a),this.writeStringHeader(a),(0,Jt.utf8EncodeTE)(r,this.bytes,this.pos),this.pos+=a}else{let a=(0,Jt.utf8Count)(r);this.ensureBufferSizeToWrite(5+a),this.writeStringHeader(a),(0,Jt.utf8EncodeJs)(r,this.bytes,this.pos),this.pos+=a}}encodeObject(r,t){let n=this.extensionCodec.tryToEncode(r,this.context);if(n!=null)this.encodeExtension(n);else if(Array.isArray(r))this.encodeArray(r,t);else if(ArrayBuffer.isView(r))this.encodeBinary(r);else if(typeof r=="object")this.encodeMap(r,t);else throw new Error(`Unrecognized object: ${Object.prototype.toString.apply(r)}`)}encodeBinary(r){let t=r.byteLength;if(t<256)this.writeU8(196),this.writeU8(t);else if(t<65536)this.writeU8(197),this.writeU16(t);else if(t<4294967296)this.writeU8(198),this.writeU32(t);else throw new Error(`Too large binary: ${t}`);let n=(0,No.ensureUint8Array)(r);this.writeU8a(n)}encodeArray(r,t){let n=r.length;if(n<16)this.writeU8(144+n);else if(n<65536)this.writeU8(220),this.writeU16(n);else if(n<4294967296)this.writeU8(221),this.writeU32(n);else throw new Error(`Too large array: ${n}`);for(let a of r)this.doEncode(a,t+1)}countWithoutUndefined(r,t){let n=0;for(let a of t)r[a]!==void 0&&n++;return n}encodeMap(r,t){let n=Object.keys(r);this.sortKeys&&n.sort();let a=this.ignoreUndefined?this.countWithoutUndefined(r,n):n.length;if(a<16)this.writeU8(128+a);else if(a<65536)this.writeU8(222),this.writeU16(a);else if(a<4294967296)this.writeU8(223),this.writeU32(a);else throw new Error(`Too large map object: ${a}`);for(let s of n){let i=r[s];this.ignoreUndefined&&i===void 0||(this.encodeString(s),this.doEncode(i,t+1))}}encodeExtension(r){let t=r.data.length;if(t===1)this.writeU8(212);else if(t===2)this.writeU8(213);else if(t===4)this.writeU8(214);else if(t===8)this.writeU8(215);else if(t===16)this.writeU8(216);else if(t<256)this.writeU8(199),this.writeU8(t);else if(t<65536)this.writeU8(200),this.writeU16(t);else if(t<4294967296)this.writeU8(201),this.writeU32(t);else throw new Error(`Too large extension object: ${t}`);this.writeI8(r.type),this.writeU8a(r.data)}writeU8(r){this.ensureBufferSizeToWrite(1),this.view.setUint8(this.pos,r),this.pos++}writeU8a(r){let t=r.length;this.ensureBufferSizeToWrite(t),this.bytes.set(r,this.pos),this.pos+=t}writeI8(r){this.ensureBufferSizeToWrite(1),this.view.setInt8(this.pos,r),this.pos++}writeU16(r){this.ensureBufferSizeToWrite(2),this.view.setUint16(this.pos,r),this.pos+=2}writeI16(r){this.ensureBufferSizeToWrite(2),this.view.setInt16(this.pos,r),this.pos+=2}writeU32(r){this.ensureBufferSizeToWrite(4),this.view.setUint32(this.pos,r),this.pos+=4}writeI32(r){this.ensureBufferSizeToWrite(4),this.view.setInt32(this.pos,r),this.pos+=4}writeF32(r){this.ensureBufferSizeToWrite(4),this.view.setFloat32(this.pos,r),this.pos+=4}writeF64(r){this.ensureBufferSizeToWrite(8),this.view.setFloat64(this.pos,r),this.pos+=8}writeU64(r){this.ensureBufferSizeToWrite(8),(0,es.setUint64)(this.view,this.pos,r),this.pos+=8}writeI64(r){this.ensureBufferSizeToWrite(8),(0,es.setInt64)(this.view,this.pos,r),this.pos+=8}};fe.Encoder=Un});var ts=$(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.encode=void 0;var Uo=Cn(),Co={};function Fo(e,r=Co){return new Uo.Encoder(r.extensionCodec,r.context,r.maxDepth,r.initialBufferSize,r.sortKeys,r.forceFloat32,r.ignoreUndefined,r.forceIntegerToFloat).encodeSharedRef(e)}Zr.encode=Fo});var rs=$(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.prettyByte=void 0;function Wo(e){return`${e<0?"-":""}0x${Math.abs(e).toString(16).padStart(2,"0")}`}Jr.prettyByte=Wo});var ns=$(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.CachedKeyDecoder=void 0;var Lo=Br(),Bo=16,zo=16,Fn=class{constructor(r=Bo,t=zo){this.maxKeyLength=r,this.maxLengthPerKey=t,this.hit=0,this.miss=0,this.caches=[];for(let n=0;n<this.maxKeyLength;n++)this.caches.push([])}canBeCached(r){return r>0&&r<=this.maxKeyLength}find(r,t,n){let a=this.caches[n-1];e:for(let s of a){let i=s.bytes;for(let o=0;o<n;o++)if(i[o]!==r[t+o])continue e;return s.str}return null}store(r,t){let n=this.caches[r.length-1],a={bytes:r,str:t};n.length>=this.maxLengthPerKey?n[Math.random()*n.length|0]=a:n.push(a)}decode(r,t,n){let a=this.find(r,t,n);if(a!=null)return this.hit++,a;this.miss++;let s=(0,Lo.utf8DecodeJs)(r,t,n),i=Uint8Array.prototype.slice.call(r,t,t+n);return this.store(i,s),s}};Xr.CachedKeyDecoder=Fn});var Gr=$(Re=>{"use strict";Object.defineProperty(Re,"__esModule",{value:!0});Re.Decoder=Re.DataViewIndexOutOfBoundsError=void 0;var Wn=rs(),jo=Vr(),Qe=$t(),Ln=Br(),Bn=Nn(),Ho=ns(),we=Hr(),qo=e=>{let r=typeof e;return r==="string"||r==="number"},Xt=-1,jn=new DataView(new ArrayBuffer(0)),$o=new Uint8Array(jn.buffer);Re.DataViewIndexOutOfBoundsError=(()=>{try{jn.getInt8(0)}catch(e){return e.constructor}throw new Error("never reached")})();var as=new Re.DataViewIndexOutOfBoundsError("Insufficient data"),Vo=new Ho.CachedKeyDecoder,zn=class{constructor(r=jo.ExtensionCodec.defaultCodec,t=void 0,n=Qe.UINT32_MAX,a=Qe.UINT32_MAX,s=Qe.UINT32_MAX,i=Qe.UINT32_MAX,o=Qe.UINT32_MAX,d=Vo){this.extensionCodec=r,this.context=t,this.maxStrLength=n,this.maxBinLength=a,this.maxArrayLength=s,this.maxMapLength=i,this.maxExtLength=o,this.keyDecoder=d,this.totalPos=0,this.pos=0,this.view=jn,this.bytes=$o,this.headByte=Xt,this.stack=[]}reinitializeState(){this.totalPos=0,this.headByte=Xt,this.stack.length=0}setBuffer(r){this.bytes=(0,Bn.ensureUint8Array)(r),this.view=(0,Bn.createDataView)(this.bytes),this.pos=0}appendBuffer(r){if(this.headByte===Xt&&!this.hasRemaining(1))this.setBuffer(r);else{let t=this.bytes.subarray(this.pos),n=(0,Bn.ensureUint8Array)(r),a=new Uint8Array(t.length+n.length);a.set(t),a.set(n,t.length),this.setBuffer(a)}}hasRemaining(r){return this.view.byteLength-this.pos>=r}createExtraByteError(r){let{view:t,pos:n}=this;return new RangeError(`Extra ${t.byteLength-n} of ${t.byteLength} byte(s) found at buffer[${r}]`)}decode(r){this.reinitializeState(),this.setBuffer(r);let t=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return t}*decodeMulti(r){for(this.reinitializeState(),this.setBuffer(r);this.hasRemaining(1);)yield this.doDecodeSync()}async decodeAsync(r){let t=!1,n;for await(let o of r){if(t)throw this.createExtraByteError(this.totalPos);this.appendBuffer(o);try{n=this.doDecodeSync(),t=!0}catch(d){if(!(d instanceof Re.DataViewIndexOutOfBoundsError))throw d}this.totalPos+=this.pos}if(t){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return n}let{headByte:a,pos:s,totalPos:i}=this;throw new RangeError(`Insufficient data in parsing ${(0,Wn.prettyByte)(a)} at ${i} (${s} in the current buffer)`)}decodeArrayStream(r){return this.decodeMultiAsync(r,!0)}decodeStream(r){return this.decodeMultiAsync(r,!1)}async*decodeMultiAsync(r,t){let n=t,a=-1;for await(let s of r){if(t&&a===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(s),n&&(a=this.readArraySize(),n=!1,this.complete());try{for(;yield this.doDecodeSync(),--a!==0;);}catch(i){if(!(i instanceof Re.DataViewIndexOutOfBoundsError))throw i}this.totalPos+=this.pos}}doDecodeSync(){e:for(;;){let r=this.readHeadByte(),t;if(r>=224)t=r-256;else if(r<192)if(r<128)t=r;else if(r<144){let a=r-128;if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r<160){let a=r-144;if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else{let a=r-160;t=this.decodeUtf8String(a,0)}else if(r===192)t=null;else if(r===194)t=!1;else if(r===195)t=!0;else if(r===202)t=this.readF32();else if(r===203)t=this.readF64();else if(r===204)t=this.readU8();else if(r===205)t=this.readU16();else if(r===206)t=this.readU32();else if(r===207)t=this.readU64();else if(r===208)t=this.readI8();else if(r===209)t=this.readI16();else if(r===210)t=this.readI32();else if(r===211)t=this.readI64();else if(r===217){let a=this.lookU8();t=this.decodeUtf8String(a,1)}else if(r===218){let a=this.lookU16();t=this.decodeUtf8String(a,2)}else if(r===219){let a=this.lookU32();t=this.decodeUtf8String(a,4)}else if(r===220){let a=this.readU16();if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else if(r===221){let a=this.readU32();if(a!==0){this.pushArrayState(a),this.complete();continue e}else t=[]}else if(r===222){let a=this.readU16();if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r===223){let a=this.readU32();if(a!==0){this.pushMapState(a),this.complete();continue e}else t={}}else if(r===196){let a=this.lookU8();t=this.decodeBinary(a,1)}else if(r===197){let a=this.lookU16();t=this.decodeBinary(a,2)}else if(r===198){let a=this.lookU32();t=this.decodeBinary(a,4)}else if(r===212)t=this.decodeExtension(1,0);else if(r===213)t=this.decodeExtension(2,0);else if(r===214)t=this.decodeExtension(4,0);else if(r===215)t=this.decodeExtension(8,0);else if(r===216)t=this.decodeExtension(16,0);else if(r===199){let a=this.lookU8();t=this.decodeExtension(a,1)}else if(r===200){let a=this.lookU16();t=this.decodeExtension(a,2)}else if(r===201){let a=this.lookU32();t=this.decodeExtension(a,4)}else throw new we.DecodeError(`Unrecognized type byte: ${(0,Wn.prettyByte)(r)}`);this.complete();let n=this.stack;for(;n.length>0;){let a=n[n.length-1];if(a.type===0)if(a.array[a.position]=t,a.position++,a.position===a.size)n.pop(),t=a.array;else continue e;else if(a.type===1){if(!qo(t))throw new we.DecodeError("The type of key must be string or number but "+typeof t);if(t==="__proto__")throw new we.DecodeError("The key __proto__ is not allowed");a.key=t,a.type=2;continue e}else if(a.map[a.key]=t,a.readCount++,a.readCount===a.size)n.pop(),t=a.map;else{a.key=null,a.type=1;continue e}}return t}}readHeadByte(){return this.headByte===Xt&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=Xt}readArraySize(){let r=this.readHeadByte();switch(r){case 220:return this.readU16();case 221:return this.readU32();default:{if(r<160)return r-144;throw new we.DecodeError(`Unrecognized array type byte: ${(0,Wn.prettyByte)(r)}`)}}}pushMapState(r){if(r>this.maxMapLength)throw new we.DecodeError(`Max length exceeded: map length (${r}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.push({type:1,size:r,key:null,readCount:0,map:{}})}pushArrayState(r){if(r>this.maxArrayLength)throw new we.DecodeError(`Max length exceeded: array length (${r}) > maxArrayLength (${this.maxArrayLength})`);this.stack.push({type:0,size:r,array:new Array(r),position:0})}decodeUtf8String(r,t){var n;if(r>this.maxStrLength)throw new we.DecodeError(`Max length exceeded: UTF-8 byte length (${r}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+t+r)throw as;let a=this.pos+t,s;return this.stateIsMapKey()&&(!((n=this.keyDecoder)===null||n===void 0)&&n.canBeCached(r))?s=this.keyDecoder.decode(this.bytes,a,r):r>Ln.TEXT_DECODER_THRESHOLD?s=(0,Ln.utf8DecodeTD)(this.bytes,a,r):s=(0,Ln.utf8DecodeJs)(this.bytes,a,r),this.pos+=t+r,s}stateIsMapKey(){return this.stack.length>0?this.stack[this.stack.length-1].type===1:!1}decodeBinary(r,t){if(r>this.maxBinLength)throw new we.DecodeError(`Max length exceeded: bin length (${r}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(r+t))throw as;let n=this.pos+t,a=this.bytes.subarray(n,n+r);return this.pos+=t+r,a}decodeExtension(r,t){if(r>this.maxExtLength)throw new we.DecodeError(`Max length exceeded: ext length (${r}) > maxExtLength (${this.maxExtLength})`);let n=this.view.getInt8(this.pos+t),a=this.decodeBinary(r,t+1);return this.extensionCodec.decode(a,n,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){let r=this.view.getUint8(this.pos);return this.pos++,r}readI8(){let r=this.view.getInt8(this.pos);return this.pos++,r}readU16(){let r=this.view.getUint16(this.pos);return this.pos+=2,r}readI16(){let r=this.view.getInt16(this.pos);return this.pos+=2,r}readU32(){let r=this.view.getUint32(this.pos);return this.pos+=4,r}readI32(){let r=this.view.getInt32(this.pos);return this.pos+=4,r}readU64(){let r=(0,Qe.getUint64)(this.view,this.pos);return this.pos+=8,r}readI64(){let r=(0,Qe.getInt64)(this.view,this.pos);return this.pos+=8,r}readF32(){let r=this.view.getFloat32(this.pos);return this.pos+=4,r}readF64(){let r=this.view.getFloat64(this.pos);return this.pos+=8,r}};Re.Decoder=zn});var Hn=$(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.decodeMulti=he.decode=he.defaultDecodeOptions=void 0;var ss=Gr();he.defaultDecodeOptions={};function Zo(e,r=he.defaultDecodeOptions){return new ss.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decode(e)}he.decode=Zo;function Jo(e,r=he.defaultDecodeOptions){return new ss.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeMulti(e)}he.decodeMulti=Jo});var ls=$(De=>{"use strict";Object.defineProperty(De,"__esModule",{value:!0});De.ensureAsyncIterable=De.asyncIterableFromStream=De.isAsyncIterable=void 0;function is(e){return e[Symbol.asyncIterator]!=null}De.isAsyncIterable=is;function Xo(e){if(e==null)throw new Error("Assertion Failure: value must not be null nor undefined")}async function*os(e){let r=e.getReader();try{for(;;){let{done:t,value:n}=await r.read();if(t)return;Xo(n),yield n}}finally{r.releaseLock()}}De.asyncIterableFromStream=os;function Go(e){return is(e)?e:os(e)}De.ensureAsyncIterable=Go});var us=$(pe=>{"use strict";Object.defineProperty(pe,"__esModule",{value:!0});pe.decodeStream=pe.decodeMultiStream=pe.decodeArrayStream=pe.decodeAsync=void 0;var qn=Gr(),$n=ls(),Kr=Hn();async function Ko(e,r=Kr.defaultDecodeOptions){let t=(0,$n.ensureAsyncIterable)(e);return new qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeAsync(t)}pe.decodeAsync=Ko;function Yo(e,r=Kr.defaultDecodeOptions){let t=(0,$n.ensureAsyncIterable)(e);return new qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeArrayStream(t)}pe.decodeArrayStream=Yo;function cs(e,r=Kr.defaultDecodeOptions){let t=(0,$n.ensureAsyncIterable)(e);return new qn.Decoder(r.extensionCodec,r.context,r.maxStrLength,r.maxBinLength,r.maxArrayLength,r.maxMapLength,r.maxExtLength).decodeStream(t)}pe.decodeMultiStream=cs;function Qo(e,r=Kr.defaultDecodeOptions){return cs(e,r)}pe.decodeStream=Qo});var hs=$(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.decodeTimestampExtension=k.encodeTimestampExtension=k.decodeTimestampToTimeSpec=k.encodeTimeSpecToTimestamp=k.encodeDateToTimeSpec=k.EXT_TIMESTAMP=k.ExtData=k.ExtensionCodec=k.Encoder=k.DataViewIndexOutOfBoundsError=k.DecodeError=k.Decoder=k.decodeStream=k.decodeMultiStream=k.decodeArrayStream=k.decodeAsync=k.decodeMulti=k.decode=k.encode=void 0;var el=ts();Object.defineProperty(k,"encode",{enumerable:!0,get:function(){return el.encode}});var ds=Hn();Object.defineProperty(k,"decode",{enumerable:!0,get:function(){return ds.decode}});Object.defineProperty(k,"decodeMulti",{enumerable:!0,get:function(){return ds.decodeMulti}});var Yr=us();Object.defineProperty(k,"decodeAsync",{enumerable:!0,get:function(){return Yr.decodeAsync}});Object.defineProperty(k,"decodeArrayStream",{enumerable:!0,get:function(){return Yr.decodeArrayStream}});Object.defineProperty(k,"decodeMultiStream",{enumerable:!0,get:function(){return Yr.decodeMultiStream}});Object.defineProperty(k,"decodeStream",{enumerable:!0,get:function(){return Yr.decodeStream}});var fs=Gr();Object.defineProperty(k,"Decoder",{enumerable:!0,get:function(){return fs.Decoder}});Object.defineProperty(k,"DataViewIndexOutOfBoundsError",{enumerable:!0,get:function(){return fs.DataViewIndexOutOfBoundsError}});var tl=Hr();Object.defineProperty(k,"DecodeError",{enumerable:!0,get:function(){return tl.DecodeError}});var rl=Cn();Object.defineProperty(k,"Encoder",{enumerable:!0,get:function(){return rl.Encoder}});var nl=Vr();Object.defineProperty(k,"ExtensionCodec",{enumerable:!0,get:function(){return nl.ExtensionCodec}});var al=On();Object.defineProperty(k,"ExtData",{enumerable:!0,get:function(){return al.ExtData}});var _t=In();Object.defineProperty(k,"EXT_TIMESTAMP",{enumerable:!0,get:function(){return _t.EXT_TIMESTAMP}});Object.defineProperty(k,"encodeDateToTimeSpec",{enumerable:!0,get:function(){return _t.encodeDateToTimeSpec}});Object.defineProperty(k,"encodeTimeSpecToTimestamp",{enumerable:!0,get:function(){return _t.encodeTimeSpecToTimestamp}});Object.defineProperty(k,"decodeTimestampToTimeSpec",{enumerable:!0,get:function(){return _t.decodeTimestampToTimeSpec}});Object.defineProperty(k,"encodeTimestampExtension",{enumerable:!0,get:function(){return _t.encodeTimestampExtension}});Object.defineProperty(k,"decodeTimestampExtension",{enumerable:!0,get:function(){return _t.decodeTimestampExtension}})});var Ki=$((Kh,Gi)=>{var Nt=require("fs"),Xi=require("url"),Qu=require("child_process").spawn;Gi.exports=Ma;Ma.XMLHttpRequest=Ma;function Ma(e){"use strict";e=e||{};var r=this,t=require("http"),n=require("https"),a,s,i={},o=!1,d={"User-Agent":"node-XMLHttpRequest",Accept:"*/*"},l=Object.assign({},d),u=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","content-transfer-encoding","cookie","cookie2","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"],b=["TRACE","TRACK","CONNECT"],g=!1,f=!1,y=!1,v={};this.UNSENT=0,this.OPENED=1,this.HEADERS_RECEIVED=2,this.LOADING=3,this.DONE=4,this.readyState=this.UNSENT,this.onreadystatechange=null,this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),this.status=null,this.statusText=null;var R=function(p){return o||p&&u.indexOf(p.toLowerCase())===-1},w=function(p){return p&&b.indexOf(p)===-1};this.open=function(p,h,T,U,_){if(this.abort(),f=!1,y=!1,!w(p))throw new Error("SecurityError: Request method not allowed");i={method:p,url:h.toString(),async:typeof T!="boolean"?!0:T,user:U||null,password:_||null},S(this.OPENED)},this.setDisableHeaderCheck=function(p){o=p},this.setRequestHeader=function(p,h){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: setRequestHeader can only be called when state is OPEN");if(!R(p))return console.warn('Refused to set unsafe header "'+p+'"'),!1;if(g)throw new Error("INVALID_STATE_ERR: send flag is true");return l[p]=h,!0},this.getResponseHeader=function(p){return typeof p=="string"&&this.readyState>this.OPENED&&s.headers[p.toLowerCase()]&&!f?s.headers[p.toLowerCase()]:null},this.getAllResponseHeaders=function(){if(this.readyState<this.HEADERS_RECEIVED||f)return"";var p="";for(var h in s.headers)h!=="set-cookie"&&h!=="set-cookie2"&&(p+=h+": "+s.headers[h]+`\r
`);return p.substr(0,p.length-2)},this.getRequestHeader=function(p){return typeof p=="string"&&l[p]?l[p]:""},this.send=function(p){if(this.readyState!=this.OPENED)throw new Error("INVALID_STATE_ERR: connection must be opened before send() is called");if(g)throw new Error("INVALID_STATE_ERR: send has already been called");var h=!1,T=!1,U=Xi.parse(i.url),_;switch(U.protocol){case"https:":h=!0;case"http:":_=U.hostname;break;case"file:":T=!0;break;case void 0:case"":_="localhost";break;default:throw new Error("Protocol not supported.")}if(T){if(i.method!=="GET")throw new Error("XMLHttpRequest: Only GET method is supported");if(i.async)Nt.readFile(unescape(U.pathname),function(te,Fe){te?r.handleError(te,te.errno||-1):(r.status=200,r.responseText=Fe.toString("utf8"),r.response=Fe,S(r.DONE))});else try{this.response=Nt.readFileSync(unescape(U.pathname)),this.responseText=this.response.toString("utf8"),this.status=200,S(r.DONE)}catch(te){this.handleError(te,te.errno||-1)}return}var I=U.port||(h?443:80),P=U.pathname+(U.search?U.search:"");if(l.Host=_,h&&I===443||I===80||(l.Host+=":"+U.port),i.user){typeof i.password>"u"&&(i.password="");var E=new Buffer(i.user+":"+i.password);l.Authorization="Basic "+E.toString("base64")}i.method==="GET"||i.method==="HEAD"?p=null:p?(l["Content-Length"]=Buffer.isBuffer(p)?p.length:Buffer.byteLength(p),l["Content-Type"]||(l["Content-Type"]="text/plain;charset=UTF-8")):i.method==="POST"&&(l["Content-Length"]=0);var D=e.agent||!1,q={host:_,port:I,path:P,method:i.method,headers:l,agent:D};if(h&&(q.pfx=e.pfx,q.key=e.key,q.passphrase=e.passphrase,q.cert=e.cert,q.ca=e.ca,q.ciphers=e.ciphers,q.rejectUnauthorized=e.rejectUnauthorized!==!1),f=!1,i.async){var Ct=h?n.request:t.request;g=!0,r.dispatchEvent("readystatechange");var Ue=function(te){if(s=te,s.statusCode===302||s.statusCode===303||s.statusCode===307){i.url=s.headers.location;var Fe=Xi.parse(i.url);_=Fe.hostname;var Se={hostname:Fe.hostname,port:Fe.port,path:Fe.path,method:s.statusCode===303?"GET":i.method,headers:l};h&&(Se.pfx=e.pfx,Se.key=e.key,Se.passphrase=e.passphrase,Se.cert=e.cert,Se.ca=e.ca,Se.ciphers=e.ciphers,Se.rejectUnauthorized=e.rejectUnauthorized!==!1),a=Ct(Se,Ue).on("error",Ce),a.end();return}S(r.HEADERS_RECEIVED),r.status=s.statusCode,s.on("data",function(xr){if(xr){var ao=Buffer.from(xr);r.response=Buffer.concat([r.response,ao])}g&&S(r.LOADING)}),s.on("end",function(){g&&(g=!1,S(r.DONE),r.responseText=r.response.toString("utf8"))}),s.on("error",function(xr){r.handleError(xr)})},Ce=function(te){r.handleError(te)};a=Ct(q,Ue).on("error",Ce),e.autoUnref&&a.on("socket",te=>{te.unref()}),p&&a.write(p),a.end(),r.dispatchEvent("loadstart")}else{var Ft=".node-xmlhttprequest-content-"+process.pid,Wt=".node-xmlhttprequest-sync-"+process.pid;Nt.writeFileSync(Wt,"","utf8");for(var to="var http = require('http'), https = require('https'), fs = require('fs');var doRequest = http"+(h?"s":"")+".request;var options = "+JSON.stringify(q)+";var responseText = '';var responseData = Buffer.alloc(0);var req = doRequest(options, function(response) {response.on('data', function(chunk) {  var data = Buffer.from(chunk);  responseText += data.toString('utf8');  responseData = Buffer.concat([responseData, data]);});response.on('end', function() {fs.writeFileSync('"+Ft+"', JSON.stringify({err: null, data: {statusCode: response.statusCode, headers: response.headers, text: responseText, data: responseData.toString('base64')}}), 'utf8');fs.unlinkSync('"+Wt+"');});response.on('error', function(error) {fs.writeFileSync('"+Ft+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Wt+"');});}).on('error', function(error) {fs.writeFileSync('"+Ft+"', 'NODE-XMLHTTPREQUEST-ERROR:' + JSON.stringify(error), 'utf8');fs.unlinkSync('"+Wt+"');});"+(p?"req.write('"+JSON.stringify(p).slice(1,-1).replace(/'/g,"\\'")+"');":"")+"req.end();",ro=Qu(process.argv[0],["-e",to]),sd;Nt.existsSync(Wt););if(r.responseText=Nt.readFileSync(Ft,"utf8"),ro.stdin.end(),Nt.unlinkSync(Ft),r.responseText.match(/^NODE-XMLHTTPREQUEST-ERROR:/)){var no=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-ERROR:/,""));r.handleError(no,503)}else{r.status=r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:([0-9]*),.*/,"$1");var wn=JSON.parse(r.responseText.replace(/^NODE-XMLHTTPREQUEST-STATUS:[0-9]*,(.*)/,"$1"));s={statusCode:r.status,headers:wn.data.headers},r.responseText=wn.data.text,r.response=Buffer.from(wn.data.data,"base64"),S(r.DONE,!0)}}},this.handleError=function(p,h){this.status=h||0,this.statusText=p,this.responseText=p.stack,f=!0,S(this.DONE)},this.abort=function(){a&&(a.abort(),a=null),l=Object.assign({},d),this.responseText="",this.responseXML="",this.response=Buffer.alloc(0),f=y=!0,this.readyState!==this.UNSENT&&(this.readyState!==this.OPENED||g)&&this.readyState!==this.DONE&&(g=!1,S(this.DONE)),this.readyState=this.UNSENT},this.addEventListener=function(p,h){p in v||(v[p]=[]),v[p].push(h)},this.removeEventListener=function(p,h){p in v&&(v[p]=v[p].filter(function(T){return T!==h}))},this.dispatchEvent=function(p){if(typeof r["on"+p]=="function"&&(this.readyState===this.DONE&&i.async?setTimeout(function(){r["on"+p]()},0):r["on"+p]()),p in v)for(let h=0,T=v[p].length;h<T;h++)this.readyState===this.DONE?setTimeout(function(){v[p][h].call(r)},0):v[p][h].call(r)};var S=function(p){if(!(r.readyState===p||r.readyState===r.UNSENT&&y)&&(r.readyState=p,(i.async||r.readyState<r.OPENED||r.readyState===r.DONE)&&r.dispatchEvent("readystatechange"),r.readyState===r.DONE)){let h;y?h="abort":f?h="error":h="load",r.dispatchEvent(h),r.dispatchEvent("loadend")}}}});var Le=class extends Error{constructor(r){super(r),this.name=this.constructor.name,Object.setPrototypeOf(this,new.target.prototype)}};var Te=class extends Le{};var V=typeof process<"u"&&process.release&&process.release.name==="node",Bt;if(globalThis.document)Bt=e=>new Promise((r,t)=>{let n=document.createElement("script");n.src=e,n.onload=()=>r(),n.onerror=t,document.head.appendChild(n)});else if(globalThis.importScripts)Bt=async e=>{try{globalThis.importScripts(e)}catch(r){if(r instanceof TypeError)await Promise.resolve().then(()=>Lt(require(e)));else throw r}};else if(V)Bt=async e=>{let r=(await Promise.resolve().then(()=>Lt(require("path")))).default;await Promise.resolve().then(()=>Lt(require(r.resolve(e))))};else throw new Le("Cannot determine runtime environment");var le={null:0,symbol:1,pairlist:2,closure:3,environment:4,promise:5,call:6,special:7,builtin:8,string:9,logical:10,integer:13,double:14,complex:15,character:16,dots:17,any:18,list:19,expression:20,bytecode:21,pointer:22,weakref:23,raw:24,s4:25,new:30,free:31,function:99};function zt(e){return!!e&&typeof e=="object"&&Object.keys(le).includes(e.type)}function Be(e){return!!e&&typeof e=="object"&&"re"in e&&"im"in e}var c={};function Fa(e){Object.keys(e).forEach(r=>c._free(e[r]))}function ze(e){return c._Rf_protect(re(e)),e}function O(e,r){return c._Rf_protect(re(e)),++r.n,e}function Wa(e){let r=c._malloc(4);return c._R_ProtectWithIndex(re(e),r),{loc:c.getValue(r,"i32"),ptr:r}}function La(e){c._Rf_unprotect(1),c._free(e.ptr)}function Ba(e,r){return c._R_Reprotect(re(e),r.loc),e}function F(e){c._Rf_unprotect(e)}function xn(e,r,t){c._Rf_defineVar(re(r),re(t),re(e))}function be(e,r){let t={},n={n:0};try{let a=new ne(r);O(a,n),t.code=c.allocateUTF8(e);let s=c._R_ParseEvalString(t.code,a.ptr);return x.wrap(s)}finally{Fa(t),F(n.n)}}var ut=class extends Error{constructor(r,t){super(r),this.name="UnwindProtectException",this.cont=t}};function je(e,r){return c.getWasmTableEntry(c.GOT.ffi_safe_eval.value)(re(e),re(r))}var fo=new WeakMap;function za(e,r){return fo.set(e,r),e}function En(e){return typeof e=="string"&&e.length===jt}var jt=63;function He(){let e=Array.from({length:4},ho).join("-");if(e.length!==jt)throw new Error("comlink internal error: UUID has the wrong length");return e}function ho(){let e=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16),r=15-e.length;return r>0&&(e=Array.from({length:r},()=>0).join("")+e),e}function re(e){return Xe(e)?e.ptr:e}function Ge(e,r){if(c._TYPEOF(e.ptr)!==le[r])throw new Error(`Unexpected object type "${e.type()}" when expecting type "${r}"`)}var ke=new Map;function Ke(e,r){let t=re(r);if(c._R_PreserveObject(t),e!==void 0){if(En(e)){ke.get(e).push(t);return}throw new Error("Unexpected shelter type "+typeof e)}}function vn(e,r){let t=re(r);c._R_ReleaseObject(t);let n=ke.get(e),a=n.indexOf(t);if(a<0)throw new Error("Can't find object in shelter.");n.splice(a,1)}function Sn(e){let r=ke.get(e);for(let t of r)try{c._R_ReleaseObject(t)}catch(n){console.error(n)}ke.set(e,[])}function ja(e){if(zt(e))return new(qt(e.type))(e);if(typeof e>"u")return new ht;if(e&&typeof e=="object"&&"type"in e&&e.type==="null")return new ht;if(e===null)return new ae({type:"logical",names:null,values:[null]});if(typeof e=="boolean")return new ae(e);if(typeof e=="number")return new Je(e);if(typeof e=="string")return new ce(e);if(Be(e))return new pt(e);if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer)return new gt(e);if(Array.isArray(e))return po(e);if(typeof e=="object")return Ve.fromObject(e);throw new Error("R object construction for this JS object is not yet supported.")}function po(e){let r={n:0};if(e.every(n=>n&&typeof n=="object"&&!Xe(n)&&!Be(n))){let n=e,a=n.every(i=>Object.keys(i).filter(o=>!Object.keys(n[0]).includes(o)).length===0&&Object.keys(n[0]).filter(o=>!Object.keys(i).includes(o)).length===0),s=n.every(i=>Object.values(i).every(o=>qa(o)||Ha(o)));if(a&&s)return Ve.fromD3(n)}if(e.every(n=>typeof n=="boolean"||n===null))return new ae(e);if(e.every(n=>typeof n=="number"||n===null))return new Je(e);if(e.every(n=>typeof n=="string"||n===null))return new ce(e);try{let n=new ue([new j("c"),...e]);return O(n,r),n.eval()}finally{F(r.n)}}var B=class{constructor(r){this.ptr=r}type(){let r=c._TYPEOF(this.ptr);return Object.keys(le).find(n=>le[n]===r)}},ft,Er,qe=class qe extends B{constructor(t){if(!(t instanceof B))return ja(t);super(t.ptr);C(this,ft)}static wrap(t){let n=c._TYPEOF(t),a=Object.keys(le)[Object.values(le).indexOf(n)];return new(qt(a))(new B(t))}get[Symbol.toStringTag](){return`RObject:${this.type()}`}static getPersistentObject(t){return W[t]}getPropertyValue(t){return this[t]}inspect(){be(".Internal(inspect(x))",{x:this})}isNull(){return c._TYPEOF(this.ptr)===le.null}isNa(){try{let t=be("is.na(x)",{x:this});return ze(t),t.toBoolean()}finally{F(1)}}isUnbound(){return this.ptr===W.unboundValue.ptr}attrs(){return $e.wrap(c._ATTRIB(this.ptr))}class(){let t={n:0},n=new ue([new j("class"),this]);O(n,t);try{return n.eval()}finally{F(t.n)}}setNames(t){let n;if(t===null)n=W.null;else if(Array.isArray(t)&&t.every(a=>typeof a=="string"||a===null))n=new ce(t);else throw new Error("Argument to setNames must be null or an Array of strings or null");return c._Rf_setAttrib(this.ptr,W.namesSymbol.ptr,n.ptr),this}names(){let t=ce.wrap(c._Rf_getAttrib(this.ptr,W.namesSymbol.ptr));return t.isNull()?null:t.toArray()}includes(t){let n=this.names();return n&&n.includes(t)}toJs(t={depth:0},n=1){throw new Error("This R object cannot be converted to JS")}subset(t){return We(this,ft,Er).call(this,t,W.bracketSymbol.ptr)}get(t){return We(this,ft,Er).call(this,t,W.bracket2Symbol.ptr)}getDollar(t){return We(this,ft,Er).call(this,t,W.dollarSymbol.ptr)}pluck(...t){let n=Wa(W.null);try{let a=(i,o)=>{let d=i.get(o);return Ba(d,n)},s=t.reduce(a,this);return s.isNull()?void 0:s}finally{La(n)}}set(t,n){let a={n:0};try{let s=new qe(t);O(s,a);let i=new qe(n);O(i,a);let o=new j("[[<-"),d=c._Rf_lang4(o.ptr,this.ptr,s.ptr,i.ptr);return O(d,a),qe.wrap(je(d,W.baseEnv))}finally{F(a.n)}}static getMethods(t){let n=new Set,a=t;do Object.getOwnPropertyNames(a).map(s=>n.add(s));while(a=Object.getPrototypeOf(a));return[...n.keys()].filter(s=>typeof t[s]=="function")}};ft=new WeakSet,Er=function(t,n){let a={n:0};try{let s=new qe(t);O(s,a);let i=c._Rf_lang3(n,this.ptr,s.ptr);return O(i,a),qe.wrap(je(i,W.baseEnv))}finally{F(a.n)}};var x=qe,ht=class extends x{constructor(){return super(new B(c.getValue(c._R_NilValue,"*"))),this}toJs(){return{type:"null"}}},j=class extends x{constructor(r){if(r instanceof B){Ge(r,"symbol"),super(r);return}let t=c.allocateUTF8(r);try{super(new B(c._Rf_install(t)))}finally{c._free(t)}}toJs(){let r=this.toObject();return{type:"symbol",printname:r.printname,symvalue:r.symvalue,internal:r.internal}}toObject(){return{printname:this.printname().isUnbound()?null:this.printname().toString(),symvalue:this.symvalue().isUnbound()?null:this.symvalue().ptr,internal:this.internal().isNull()?null:this.internal().ptr}}toString(){return this.printname().toString()}printname(){return Ze.wrap(c._PRINTNAME(this.ptr))}symvalue(){return x.wrap(c._SYMVALUE(this.ptr))}internal(){return x.wrap(c._INTERNAL(this.ptr))}},$e=class e extends x{constructor(r){if(r instanceof B)return Ge(r,"pairlist"),super(r),this;let t={n:0};try{let{names:n,values:a}=mt(r),s=e.wrap(c._Rf_allocList(a.length));O(s,t);for(let[i,o]=[0,s];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(new x(a[i]));s.setNames(n),super(s)}finally{F(t.n)}}get length(){return this.toArray().length}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let a=this.entries({depth:n}),s=a.map(([i])=>i);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting pairlist without allowDuplicateKey enabled");if(!t&&s.some(i=>!i))throw new Error("Empty or null key when converting pairlist without allowEmptyKey enabled");return Object.fromEntries(a.filter((i,o)=>a.findIndex(d=>d[0]===i[0])===o))}entries(r={depth:1}){let t=this.toJs(r);return t.values.map((n,a)=>[t.names?t.names[a]:null,n])}toJs(r={depth:0},t=1){let n=[],a=!1,s=[];for(let o=this;!o.isNull();o=o.cdr()){let d=o.tag();d.isNull()?n.push(""):(a=!0,n.push(d.toString())),r.depth&&t>=r.depth?s.push(o.car()):s.push(o.car().toJs(r,t+1))}return{type:"pairlist",names:a?n:null,values:s}}includes(r){return r in this.toObject()}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}tag(){return x.wrap(c._TAG(this.ptr))}},ue=class e extends x{constructor(r){if(r instanceof B)return Ge(r,"call"),super(r),this;let t={n:0};try{let{values:n}=mt(r),a=n.map(i=>O(new x(i),t)),s=e.wrap(c._Rf_allocVector(le.call,n.length));O(s,t);for(let[i,o]=[0,s];!o.isNull();[i,o]=[i+1,o.cdr()])o.setcar(a[i]);super(s)}finally{F(t.n)}}setcar(r){c._SETCAR(this.ptr,r.ptr)}car(){return x.wrap(c._CAR(this.ptr))}cdr(){return x.wrap(c._CDR(this.ptr))}eval(){return c.webr.evalR(this,{env:W.baseEnv})}capture(r={}){return c.webr.captureR(this,r)}deparse(){let r={n:0};try{let t=c._Rf_lang2(new j("deparse1").ptr,c._Rf_lang2(new j("quote").ptr,this.ptr));O(t,r);let n=ce.wrap(je(t,W.baseEnv));return O(n,r),n.toString()}finally{F(r.n)}}},de=class e extends x{constructor(r,t=null){if(r instanceof B){if(Ge(r,"list"),super(r),t){if(t.length!==this.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");this.setNames(t)}return this}let n={n:0};try{let a=mt(r),s=c._Rf_allocVector(le.list,a.values.length);O(s,n),a.values.forEach((o,d)=>{$a(o)?c._SET_VECTOR_ELT(s,d,new e(o).ptr):c._SET_VECTOR_ELT(s,d,new x(o).ptr)});let i=t||a.names;if(i&&i.length!==a.values.length)throw new Error("Can't construct named `RList`. Supplied `names` must be the same length as the list.");x.wrap(s).setNames(i),super(new B(s))}finally{F(n.n)}}get length(){return c._LENGTH(this.ptr)}isDataFrame(){let r=$e.wrap(c._ATTRIB(this.ptr)).get("class");return!r.isNull()&&r.toArray().includes("data.frame")}toArray(r={depth:1}){return this.toJs(r).values}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1,depth:n=-1}={}){let a=this.entries({depth:n}),s=a.map(([i])=>i);if(!r&&new Set(s).size!==s.length)throw new Error("Duplicate key when converting list without allowDuplicateKey enabled");if(!t&&s.some(i=>!i))throw new Error("Empty or null key when converting list without allowEmptyKey enabled");return Object.fromEntries(a.filter((i,o)=>a.findIndex(d=>d[0]===i[0])===o))}toD3(){if(!this.isDataFrame())throw new Error("Can't convert R list object to D3 format. Object must be of class 'data.frame'.");return this.entries().reduce((t,n)=>(n[1].forEach((a,s)=>t[s]=Object.assign(t[s]||{},{[n[0]]:a})),t),[])}entries(r={depth:-1}){let t=this.toJs(r);return this.isDataFrame()&&r.depth<0&&(t.values=t.values.map(n=>n.toArray())),t.values.map((n,a)=>[t.names?t.names[a]:null,n])}toJs(r={depth:0},t=1){return{type:"list",names:this.names(),values:[...Array(this.length).keys()].map(n=>r.depth&&t>=r.depth?this.get(n+1):this.get(n+1).toJs(r,t+1))}}},Ve=class e extends de{constructor(r){if(r instanceof B){if(super(r),!this.isDataFrame())throw new Error("Can't construct `RDataFrame`. Supplied R object is not a `data.frame`.");return this}return e.fromObject(r)}static fromObject(r){let{names:t,values:n}=mt(r),a={n:0};try{let s=!!t&&t.length>0&&t.every(o=>o),i=n.length>0&&n.every(o=>Array.isArray(o)||ArrayBuffer.isView(o)||o instanceof ArrayBuffer);if(s&&i){let o=n,d=o.every(u=>u.length===o[0].length),l=o.every(u=>qa(u[0])||Ha(u[0]));if(d&&l){let u=new de({type:"list",names:t,values:o.map(g=>ja(g))});O(u,a);let b=new ue([new j("as.data.frame"),u]);return O(b,a),new e(b.eval())}}}finally{F(a.n)}throw new Error("Can't construct `data.frame`. Source object is not eligible.")}static fromD3(r){return this.fromObject(Object.fromEntries(Object.keys(r[0]).map(t=>[t,r.map(n=>n[t])])))}},dt=class extends x{exec(...r){let t={n:0};try{let n=new ue([this,...r]);return O(n,t),n.eval()}finally{F(t.n)}}capture(r={},...t){let n={n:0};try{let a=new ue([this,...t]);return O(a,n),a.capture(r)}finally{F(n.n)}}},vr=class vr extends x{constructor(r){if(r instanceof B){Ge(r,"string"),super(r);return}let t=c.allocateUTF8(r);try{super(new B(c._Rf_mkCharCE(t,vr.CEType.CE_UTF8)))}finally{c._free(t)}}toString(){let r=c._vmaxget();try{return c.UTF8ToString(c._Rf_translateCharUTF8(this.ptr))}finally{c._vmaxset(r)}}toJs(){return{type:"string",value:this.toString()}}};vr.CEType={CE_NATIVE:0,CE_UTF8:1,CE_LATIN1:2,CE_BYTES:3,CE_SYMBOL:5,CE_ANY:99};var Ze=vr,ne=class extends x{constructor(r={}){if(r instanceof B)return Ge(r,"environment"),super(r),this;let t=0;try{let{names:n,values:a}=mt(r),s=ze(c._R_NewEnv(W.globalEnv.ptr,0,0));++t,a.forEach((i,o)=>{let d=n?n[o]:null;if(!d)throw new Error("Can't create object in new environment with empty symbol name");let l=new j(d),u=ze(new x(i));try{xn(s,l,u)}finally{F(1)}}),super(new B(s))}finally{F(t)}}ls(r=!1,t=!0){return ce.wrap(c._R_lsInternal3(this.ptr,Number(r),Number(t))).toArray()}bind(r,t){let n=new j(r),a=ze(new x(t));try{xn(this,n,a)}finally{F(1)}}names(){return this.ls(!0,!0)}frame(){return x.wrap(c._FRAME(this.ptr))}subset(r){if(typeof r=="number")throw new Error("Object of type environment is not subsettable");return this.getDollar(r)}toObject({depth:r=-1}={}){let t=this.names();return Object.fromEntries([...Array(t.length).keys()].map(n=>{let a=this.getDollar(t[n]);return[t[n],r<0?a:a.toJs({depth:r})]}))}toJs(r={depth:0},t=1){let n=this.names(),a=[...Array(n.length).keys()].map(s=>r.depth&&t>=r.depth?this.getDollar(n[s]):this.getDollar(n[s]).toJs(r,t+1));return{type:"environment",names:n,values:a}}},Ae=class extends x{constructor(r,t,n){if(r instanceof B)return Ge(r,t),super(r),this;let a={n:0};try{let{names:s,values:i}=mt(r),o=c._Rf_allocVector(le[t],i.length);O(o,a),i.forEach(n(o)),x.wrap(o).setNames(s),super(new B(o))}finally{F(a.n)}}get length(){return c._LENGTH(this.ptr)}get(r){return super.get(r)}subset(r){return super.subset(r)}getDollar(){throw new Error("$ operator is invalid for atomic vectors")}detectMissing(){let r={n:0};try{let t=c._Rf_lang2(new j("is.na").ptr,this.ptr);O(t,r);let n=ae.wrap(je(t,W.baseEnv));O(n,r);let a=n.toTypedArray();return Array.from(a).map(s=>!!s)}finally{F(r.n)}}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:r[n])}toObject({allowDuplicateKey:r=!0,allowEmptyKey:t=!1}={}){let n=this.entries(),a=n.map(([s])=>s);if(!r&&new Set(a).size!==a.length)throw new Error("Duplicate key when converting atomic vector without allowDuplicateKey enabled");if(!t&&a.some(s=>!s))throw new Error("Empty or null key when converting atomic vector without allowEmptyKey enabled");return Object.fromEntries(n.filter((s,i)=>n.findIndex(o=>o[0]===s[0])===i))}entries(){let r=this.toArray(),t=this.names();return r.map((n,a)=>[t?t[a]:null,n])}toJs(){return{type:this.type(),names:this.names(),values:this.toArray()}}},Sr,Tr=class Tr extends Ae{constructor(r){super(r,"logical",A(Tr,Sr))}getBoolean(r){return this.get(r).toArray()[0]}toBoolean(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getBoolean(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS boolean");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._LOGICAL(this.ptr)/4,c._LOGICAL(this.ptr)/4+this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:!!r[n])}};Sr=new WeakMap,C(Tr,Sr,r=>{let t=c._LOGICAL(r),n=c.getValue(c._R_NaInt,"i32");return(a,s)=>{c.setValue(t+4*s,a===null?n:!!a,"i32")}});var ae=Tr,kr,Ar=class Ar extends Ae{constructor(r){super(r,"integer",A(Ar,kr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Int32Array(c.HEAP32.subarray(c._INTEGER(this.ptr)/4,c._INTEGER(this.ptr)/4+this.length))}};kr=new WeakMap,C(Ar,kr,r=>{let t=c._INTEGER(r),n=c.getValue(c._R_NaInt,"i32");return(a,s)=>{c.setValue(t+4*s,a===null?n:Math.round(Number(a)),"i32")}});var Ht=Ar,Dr,Pr=class Pr extends Ae{constructor(r){super(r,"double",A(Pr,Dr))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._REAL(this.ptr)/8,c._REAL(this.ptr)/8+this.length))}};Dr=new WeakMap,C(Pr,Dr,r=>{let t=c._REAL(r),n=c.getValue(c._R_NaReal,"double");return(a,s)=>{c.setValue(t+8*s,a===null?n:a,"double")}});var Je=Pr,Or,Mr=class Mr extends Ae{constructor(r){super(r,"complex",A(Mr,Or))}getComplex(r){return this.get(r).toArray()[0]}toComplex(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getComplex(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS object");return r}toTypedArray(){return new Float64Array(c.HEAPF64.subarray(c._COMPLEX(this.ptr)/8,c._COMPLEX(this.ptr)/8+2*this.length))}toArray(){let r=this.toTypedArray();return this.detectMissing().map((t,n)=>t?null:{re:r[2*n],im:r[2*n+1]})}};Or=new WeakMap,C(Mr,Or,r=>{let t=c._COMPLEX(r),n=c.getValue(c._R_NaReal,"double");return(a,s)=>{c.setValue(t+8*(2*s),a===null?n:a.re,"double"),c.setValue(t+8*(2*s+1),a===null?n:a.im,"double")}});var pt=Mr,Ir,Nr=class Nr extends Ae{constructor(r){super(r,"character",A(Nr,Ir))}getString(r){return this.get(r).toArray()[0]}toString(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getString(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS string");return r}toTypedArray(){return new Uint32Array(c.HEAPU32.subarray(c._STRING_PTR(this.ptr)/4,c._STRING_PTR(this.ptr)/4+this.length))}toArray(){let r=c._vmaxget();try{return this.detectMissing().map((t,n)=>t?null:c.UTF8ToString(c._Rf_translateCharUTF8(c._STRING_ELT(this.ptr,n))))}finally{c._vmaxset(r)}}};Ir=new WeakMap,C(Nr,Ir,r=>(t,n)=>{t===null?c._SET_STRING_ELT(r,n,W.naString.ptr):c._SET_STRING_ELT(r,n,new Ze(t).ptr)});var ce=Nr,Ur,Cr=class Cr extends Ae{constructor(r){r instanceof ArrayBuffer&&(r=new Uint8Array(r)),super(r,"raw",A(Cr,Ur))}getNumber(r){return this.get(r).toArray()[0]}toNumber(){if(this.length!==1)throw new Error("Can't convert atomic vector of length > 1 to a scalar JS value");let r=this.getNumber(1);if(r===null)throw new Error("Can't convert missing value `NA` to a JS number");return r}toTypedArray(){return new Uint8Array(c.HEAPU8.subarray(c._RAW(this.ptr),c._RAW(this.ptr)+this.length))}};Ur=new WeakMap,C(Cr,Ur,r=>{let t=c._RAW(r);return(n,a)=>{c.setValue(t+a,Number(n),"i8")}});var gt=Cr;function mt(e){return zt(e)?e:Array.isArray(e)||ArrayBuffer.isView(e)?{names:null,values:e}:e&&typeof e=="object"&&!Be(e)?{names:Object.keys(e),values:Object.values(e)}:{names:null,values:[e]}}function qt(e){let r={object:x,null:ht,symbol:j,pairlist:$e,closure:dt,environment:ne,call:ue,special:dt,builtin:dt,string:Ze,logical:ae,integer:Ht,double:Je,complex:pt,character:ce,list:de,raw:gt,function:dt,dataframe:Ve};return e in r?r[e]:x}function Xe(e){return e instanceof x}function Ha(e){let r=["logical","integer","double","complex","character"];return Xe(e)&&r.includes(e.type())||Xe(e)&&e.isNa()}function qa(e){return e===null||typeof e=="number"||typeof e=="boolean"||typeof e=="string"||Be(e)}var W;function Tn(){W={baseEnv:ne.wrap(c.getValue(c._R_BaseEnv,"*")),bracket2Symbol:j.wrap(c.getValue(c._R_Bracket2Symbol,"*")),bracketSymbol:j.wrap(c.getValue(c._R_BracketSymbol,"*")),dollarSymbol:j.wrap(c.getValue(c._R_DollarSymbol,"*")),emptyEnv:ne.wrap(c.getValue(c._R_EmptyEnv,"*")),false:ae.wrap(c.getValue(c._R_FalseValue,"*")),globalEnv:ne.wrap(c.getValue(c._R_GlobalEnv,"*")),na:ae.wrap(c.getValue(c._R_LogicalNAValue,"*")),namesSymbol:j.wrap(c.getValue(c._R_NamesSymbol,"*")),naString:x.wrap(c.getValue(c._R_NaString,"*")),null:ht.wrap(c.getValue(c._R_NilValue,"*")),true:ae.wrap(c.getValue(c._R_TrueValue,"*")),unboundValue:x.wrap(c.getValue(c._R_UnboundValue,"*"))}}function Fr(){let e={resolve:()=>{},reject:()=>{},promise:Promise.resolve()},r=new Promise((t,n)=>{e.resolve=t,e.reject=n});return e.promise=r,e}function Ye(e,r,t,...n){return e==null||go(e)?e:e instanceof ArrayBuffer?new Uint8Array(e):r(e)?t(e,...n):Array.isArray(e)||ArrayBuffer.isView(e)?e.map(a=>Ye(a,r,t,...n)):e instanceof B?e:typeof e=="object"?Object.fromEntries(Object.entries(e).map(([a,s])=>[a,Ye(s,r,t,...n)])):e}function go(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap}function Wr(e){let r="Reached the unreachable";throw r=r+(e?": "+e:"."),new Le(r)}function $a(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!ArrayBuffer.isView(e)&&!Be(e)&&!zt(e)&&!(e instanceof Date)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof B)&&Object.getPrototypeOf(e)===Object.prototype}var Rf=new TextEncoder;function Zn(e,r){return gs({type:"request",data:{uuid:He(),msg:e}},r)}function Jn(e,r,t){return gs({type:"response",data:{uuid:e,resp:r}},t)}function gs(e,r){return r&&za(e,r),e}function ms(e,r){return{type:"sync-request",data:{msg:e,reqData:r}}}function sl(e){return!!e&&typeof e=="object"&&"payloadType"in e&&"obj"in e}function Gt(e){return sl(e)&&e.payloadType==="ptr"}var bs=Lt(hs());var ol=new TextDecoder("utf-8"),bt,wt,Kt,Yt,Rt,en=class{constructor(r,t,n=[]){C(this,bt,!1);C(this,wt);C(this,Kt);C(this,Yt);C(this,Rt);this.syncifier=new Xn;this.endpoint=r,this.msg=t,this.transfers=n,z(this,wt,!1)}scheduleSync(){if(!A(this,bt))return z(this,bt,!0),this.syncifier.scheduleTask(this),z(this,Rt,this.doSync()),A(this,Rt).next(),this}poll(){if(!A(this,bt))throw new Error("Task not synchronously scheduled");let{done:r,value:t}=A(this,Rt).next();return r?(z(this,wt,!0),z(this,Kt,t),!0):!1}*doSync(){let{endpoint:r,msg:t,transfers:n}=this,a=new Int32Array(new SharedArrayBuffer(8)),s=this.signalBuffer,i=this.taskId,o=_s(jt),d=ms(t,{sizeBuffer:a,dataBuffer:o,signalBuffer:s,taskId:i});if(r.postMessage(d,n),yield,Atomics.load(a,1)===0){let u=ol.decode(o.slice(0,jt));ll(o);let b=Atomics.load(a,0);o=_s(b),r.postMessage({id:u,dataBuffer:o}),yield}let l=Atomics.load(a,0);return(0,bs.decode)(o.slice(0,l))}get result(){if(A(this,Yt))throw A(this,Yt);if(A(this,wt))return A(this,Kt);throw new Error("Not ready.")}syncify(){return this.scheduleSync(),this.syncifier.syncifyTask(this),this.result}};bt=new WeakMap,wt=new WeakMap,Kt=new WeakMap,Yt=new WeakMap,Rt=new WeakMap;var Xn=class{constructor(){this.nextTaskId=new Int32Array([1]),this.signalBuffer=new Int32Array(new SharedArrayBuffer(32*4+4)),this.tasks=new Map}scheduleTask(r){r.taskId=this.nextTaskId[0],this.nextTaskId[0]+=2,r.signalBuffer=this.signalBuffer,this.tasks.set(r.taskId,r)}waitOnSignalBuffer(){for(;;)switch(Atomics.wait(this.signalBuffer,0,0,50)){case"ok":case"not-equal":return;case"timed-out":Gn[0]!==0&&ws();break;default:throw new Error("Unreachable")}}*tasksIdsToWakeup(){let r=Atomics.load(this.signalBuffer,0);for(let t=0;t<32;t++){let n=1<<t;r&n&&(Atomics.and(this.signalBuffer,0,~n),yield Atomics.exchange(this.signalBuffer,t+1,0))}}pollTasks(r){let t=!1;for(let n of this.tasksIdsToWakeup()){let a=this.tasks.get(n);if(!a)throw new Error(`Assertion error: unknown taskId ${n}.`);a.poll()&&(this.tasks.delete(n),a===r&&(t=!0))}return t}syncifyTask(r){for(;;)if(this.waitOnSignalBuffer(),this.pollTasks(r))return}},Qr=[];function _s(e){let r=Math.ceil(Math.log2(e));Qr[r]||(Qr[r]=[]);let t=Qr[r].pop();return t?(t.fill(0),t):new Uint8Array(new SharedArrayBuffer(2**r))}function ll(e){let r=Math.ceil(Math.log2(e.byteLength));Qr[r].push(e)}var Gn=new Int32Array(new ArrayBuffer(4)),ws=()=>{throw Gn[0]=0,new Error("No event handler.")};function Rs(e){ws=e}function xs(e){Gn=new Int32Array(e)}var tn=class{static proxy(r){var t;return t=class extends EventTarget{constructor(s,i){super();this.CONNECTING=t.CONNECTING;this.OPEN=t.OPEN;this.CLOSING=t.CLOSING;this.CLOSED=t.CLOSED;this.readyState=t.CONNECTING;this.bufferedAmount=0;this.extensions="";this.url=String(s),this.protocol=Array.isArray(i)?i[0]:i||"",this.binaryType="arraybuffer",this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.uuid=He(),r.writeSystem({type:"proxyWebSocket",data:{uuid:this.uuid,url:this.url,protocol:this.protocol}}),r.proxies.set(this.uuid,this)}send(s){r.writeSystem({type:"sendWebSocket",data:{uuid:this.uuid,data:s}})}close(s,i){r.writeSystem({type:"closeWebSocket",data:{uuid:this.uuid,code:s,reason:i}})}_accept(){var i;if(this.readyState!==0)return;this.readyState=1;let s=new Event("open");this.dispatchEvent(s),(i=this.onopen)==null||i.call(this,s)}_recieve(s){var o;let i=new MessageEvent("message",{data:s});this.dispatchEvent(i),(o=this.onmessage)==null||o.call(this,i)}_close(s,i){var d;let o=new CloseEvent("close",{code:s,reason:i});this.dispatchEvent(o),(d=this.onclose)==null||d.call(this,o),r.proxies.delete(this.uuid)}_error(){var i;let s=new Event("error");this.dispatchEvent(s),(i=this.onerror)==null||i.call(this,s)}},t.CONNECTING=0,t.OPEN=1,t.CLOSING=2,t.CLOSED=3,t}};V&&(globalThis.CloseEvent=class extends Event{constructor(r,t={}){super(r,t),this.wasClean=t.wasClean||!1,this.code=t.code||0,this.reason=t.reason||""}});V&&(globalThis.Worker=require("worker_threads").Worker);var et,Qt,tt,er,rn=class{constructor(){C(this,et);C(this,Qt,()=>0);C(this,tt,new Int32Array(new SharedArrayBuffer(4)));C(this,er,()=>{});this.resolveRequest=()=>{};z(this,et,V?require("worker_threads").parentPort:globalThis),xs(A(this,tt).buffer),Rs(()=>this.handleEvents()),this.WebSocketProxy=tn.proxy(this),this.proxies=new Map}resolve(){this.write({type:"resolve",data:A(this,tt).buffer})}write(r,t){A(this,et).postMessage(r,t)}writeSystem(r,t){A(this,et).postMessage({type:"system",data:r},t)}syncRequest(r,t){return new en(A(this,et),r,t).syncify()}read(){return this.syncRequest({type:"read"})}inputOrDispatch(){for(;;){let r=this.read();if(r.type==="stdin")return c.allocateUTF8(r.data);A(this,Qt).call(this,r)}}run(r){try{c.callMain(r)}catch(t){throw t instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:t.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),t}}handleEvents(){var r,t,n,a;if(A(this,tt)[0]!==0){for(;;){let s=this.syncRequest({type:"event"});if(!s)break;switch(s.data.msg.type){case"interrupt":A(this,er).call(this);break;case"websocket-open":{let i=s.data.msg;(r=this.proxies.get(i.data.uuid))==null||r._accept();break}case"websocket-message":{let i=s.data.msg;(t=this.proxies.get(i.data.uuid))==null||t._recieve(i.data.data);break}case"websocket-close":{let i=s.data.msg;(n=this.proxies.get(i.data.uuid))==null||n._close(i.data.code,i.data.reason);break}case"websocket-error":{let i=s.data.msg;(a=this.proxies.get(i.data.uuid))==null||a._error();break}default:throw new Error(`Unsupported event type '${s.data.msg.type}'.`)}}A(this,tt)[0]=0}}setInterrupt(r){z(this,er,r)}setDispatchHandler(r){z(this,Qt,r)}};et=new WeakMap,Qt=new WeakMap,tt=new WeakMap,er=new WeakMap;V&&(globalThis.Worker=require("worker_threads").Worker);var Et,vt,tr,rt,an,nn=class{constructor(){C(this,Et);C(this,vt,new Map);C(this,tr,()=>0);C(this,rt,0);C(this,an,async()=>{for(;;)try{z(this,rt,0);let r=await this.request({type:"read"});if(r.type==="stdin"){let t=Module.allocateUTF8(r.data);Module._strcpy(Module._DLLbuf,t),Module.setValue(Module._DLLbufp,Module._DLLbuf,"*"),Module._free(t);try{for(;Module._R_ReplDLLdo1()>0;);}catch(n){if(n instanceof WebAssembly.Exception)Module._R_ReplDLLinit(),Module._R_ReplDLLdo1();else throw n}}else A(this,tr).call(this,r)}catch(r){if(r instanceof WebAssembly.RuntimeError&&(this.writeSystem({type:"console.error",data:r.message}),this.writeSystem({type:"console.error",data:"An unrecoverable WebAssembly error has occurred, the webR worker will be closed."}),this.writeSystem({type:"close"})),!(r instanceof WebAssembly.Exception))throw r}});z(this,Et,V?require("worker_threads").parentPort:globalThis)}resolve(){this.write({type:"resolve"})}write(r,t){A(this,Et).postMessage(r,t)}writeSystem(r,t){A(this,Et).postMessage({type:"system",data:r},t)}read(){throw new Te("Unable to synchronously read when using the `PostMessage` channel.")}inputOrDispatch(){if(A(this,rt)>0){z(this,rt,0);let r=Module.allocateUTF8OnStack("Can't block for input when using the PostMessage communication channel.");Module._Rf_error(r)}return Ca(this,rt)._++,0}run(r){let t=r||[];t.unshift("R");let n=t.length,a=Module._malloc(4*(n+1));t.forEach((s,i)=>{let o=a+4*i,d=Module.allocateUTF8(s);Module.setValue(o,d,"*")}),this.writeSystem({type:"console.warn",data:"WebR is using `PostMessage` communication channel, nested R REPLs are not available."}),Module._Rf_initialize_R(n,a),Module._setup_Rmainloop(),Module._R_ReplDLLinit(),Module._R_ReplDLLdo1(),A(this,an).call(this)}setDispatchHandler(r){z(this,tr,r)}async request(r,t){let n=Zn(r,t),{resolve:a,promise:s}=Fr();return A(this,vt).set(n.data.uuid,a),this.write(n,t),s}syncRequest(){throw new Error("Unable to sync-request when using the `PostMessage` channel.")}setInterrupt(){}handleEvents(){}resolveRequest(r){let t=r,n=t.data.uuid,a=A(this,vt).get(n);a?(A(this,vt).delete(n),a(t.data.resp)):console.warn("Can't find request.")}};Et=new WeakMap,vt=new WeakMap,tr=new WeakMap,rt=new WeakMap,an=new WeakMap;var xt={Automatic:0,SharedArrayBuffer:1,PostMessage:3};function Es(e){switch(e.data.channelType){case xt.SharedArrayBuffer:return new rn;case xt.PostMessage:return new nn;default:throw new Te("Unknown worker channel type received")}}function Pt(e){let r=e.length;for(;--r>=0;)e[r]=0}var fl=0,li=1,hl=2,pl=3,gl=258,wa=29,mr=256,lr=mr+1+wa,kt=30,Ra=19,ci=2*lr+1,nt=15,Kn=16,ml=7,xa=256,ui=16,di=17,fi=18,da=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),dn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),yl=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),hi=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_l=512,Ee=new Array((lr+2)*2);Pt(Ee);var sr=new Array(kt*2);Pt(sr);var cr=new Array(_l);Pt(cr);var ur=new Array(gl-pl+1);Pt(ur);var Ea=new Array(wa);Pt(Ea);var fn=new Array(kt);Pt(fn);function Yn(e,r,t,n,a){this.static_tree=e,this.extra_bits=r,this.extra_base=t,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}var pi,gi,mi;function Qn(e,r){this.dyn_tree=e,this.max_code=0,this.stat_desc=r}var yi=e=>e<256?cr[e]:cr[256+(e>>>7)],dr=(e,r)=>{e.pending_buf[e.pending++]=r&255,e.pending_buf[e.pending++]=r>>>8&255},K=(e,r,t)=>{e.bi_valid>Kn-t?(e.bi_buf|=r<<e.bi_valid&65535,dr(e,e.bi_buf),e.bi_buf=r>>Kn-e.bi_valid,e.bi_valid+=t-Kn):(e.bi_buf|=r<<e.bi_valid&65535,e.bi_valid+=t)},me=(e,r,t)=>{K(e,t[r*2],t[r*2+1])},_i=(e,r)=>{let t=0;do t|=e&1,e>>>=1,t<<=1;while(--r>0);return t>>>1},bl=e=>{e.bi_valid===16?(dr(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)},wl=(e,r)=>{let t=r.dyn_tree,n=r.max_code,a=r.stat_desc.static_tree,s=r.stat_desc.has_stree,i=r.stat_desc.extra_bits,o=r.stat_desc.extra_base,d=r.stat_desc.max_length,l,u,b,g,f,y,v=0;for(g=0;g<=nt;g++)e.bl_count[g]=0;for(t[e.heap[e.heap_max]*2+1]=0,l=e.heap_max+1;l<ci;l++)u=e.heap[l],g=t[t[u*2+1]*2+1]+1,g>d&&(g=d,v++),t[u*2+1]=g,!(u>n)&&(e.bl_count[g]++,f=0,u>=o&&(f=i[u-o]),y=t[u*2],e.opt_len+=y*(g+f),s&&(e.static_len+=y*(a[u*2+1]+f)));if(v!==0){do{for(g=d-1;e.bl_count[g]===0;)g--;e.bl_count[g]--,e.bl_count[g+1]+=2,e.bl_count[d]--,v-=2}while(v>0);for(g=d;g!==0;g--)for(u=e.bl_count[g];u!==0;)b=e.heap[--l],!(b>n)&&(t[b*2+1]!==g&&(e.opt_len+=(g-t[b*2+1])*t[b*2],t[b*2+1]=g),u--)}},bi=(e,r,t)=>{let n=new Array(nt+1),a=0,s,i;for(s=1;s<=nt;s++)a=a+t[s-1]<<1,n[s]=a;for(i=0;i<=r;i++){let o=e[i*2+1];o!==0&&(e[i*2]=_i(n[o]++,o))}},Rl=()=>{let e,r,t,n,a,s=new Array(nt+1);for(t=0,n=0;n<wa-1;n++)for(Ea[n]=t,e=0;e<1<<da[n];e++)ur[t++]=n;for(ur[t-1]=n,a=0,n=0;n<16;n++)for(fn[n]=a,e=0;e<1<<dn[n];e++)cr[a++]=n;for(a>>=7;n<kt;n++)for(fn[n]=a<<7,e=0;e<1<<dn[n]-7;e++)cr[256+a++]=n;for(r=0;r<=nt;r++)s[r]=0;for(e=0;e<=143;)Ee[e*2+1]=8,e++,s[8]++;for(;e<=255;)Ee[e*2+1]=9,e++,s[9]++;for(;e<=279;)Ee[e*2+1]=7,e++,s[7]++;for(;e<=287;)Ee[e*2+1]=8,e++,s[8]++;for(bi(Ee,lr+1,s),e=0;e<kt;e++)sr[e*2+1]=5,sr[e*2]=_i(e,5);pi=new Yn(Ee,da,mr+1,lr,nt),gi=new Yn(sr,dn,0,kt,nt),mi=new Yn(new Array(0),yl,0,Ra,ml)},wi=e=>{let r;for(r=0;r<lr;r++)e.dyn_ltree[r*2]=0;for(r=0;r<kt;r++)e.dyn_dtree[r*2]=0;for(r=0;r<Ra;r++)e.bl_tree[r*2]=0;e.dyn_ltree[xa*2]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Ri=e=>{e.bi_valid>8?dr(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},vs=(e,r,t,n)=>{let a=r*2,s=t*2;return e[a]<e[s]||e[a]===e[s]&&n[r]<=n[t]},ea=(e,r,t)=>{let n=e.heap[t],a=t<<1;for(;a<=e.heap_len&&(a<e.heap_len&&vs(r,e.heap[a+1],e.heap[a],e.depth)&&a++,!vs(r,n,e.heap[a],e.depth));)e.heap[t]=e.heap[a],t=a,a<<=1;e.heap[t]=n},Ss=(e,r,t)=>{let n,a,s=0,i,o;if(e.sym_next!==0)do n=e.pending_buf[e.sym_buf+s++]&255,n+=(e.pending_buf[e.sym_buf+s++]&255)<<8,a=e.pending_buf[e.sym_buf+s++],n===0?me(e,a,r):(i=ur[a],me(e,i+mr+1,r),o=da[i],o!==0&&(a-=Ea[i],K(e,a,o)),n--,i=yi(n),me(e,i,t),o=dn[i],o!==0&&(n-=fn[i],K(e,n,o)));while(s<e.sym_next);me(e,xa,r)},fa=(e,r)=>{let t=r.dyn_tree,n=r.stat_desc.static_tree,a=r.stat_desc.has_stree,s=r.stat_desc.elems,i,o,d=-1,l;for(e.heap_len=0,e.heap_max=ci,i=0;i<s;i++)t[i*2]!==0?(e.heap[++e.heap_len]=d=i,e.depth[i]=0):t[i*2+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,t[l*2]=1,e.depth[l]=0,e.opt_len--,a&&(e.static_len-=n[l*2+1]);for(r.max_code=d,i=e.heap_len>>1;i>=1;i--)ea(e,t,i);l=s;do i=e.heap[1],e.heap[1]=e.heap[e.heap_len--],ea(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=i,e.heap[--e.heap_max]=o,t[l*2]=t[i*2]+t[o*2],e.depth[l]=(e.depth[i]>=e.depth[o]?e.depth[i]:e.depth[o])+1,t[i*2+1]=t[o*2+1]=l,e.heap[1]=l++,ea(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],wl(e,r),bi(t,d,e.bl_count)},Ts=(e,r,t)=>{let n,a=-1,s,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),r[(t+1)*2+1]=65535,n=0;n<=t;n++)s=i,i=r[(n+1)*2+1],!(++o<d&&s===i)&&(o<l?e.bl_tree[s*2]+=o:s!==0?(s!==a&&e.bl_tree[s*2]++,e.bl_tree[ui*2]++):o<=10?e.bl_tree[di*2]++:e.bl_tree[fi*2]++,o=0,a=s,i===0?(d=138,l=3):s===i?(d=6,l=3):(d=7,l=4))},ks=(e,r,t)=>{let n,a=-1,s,i=r[0*2+1],o=0,d=7,l=4;for(i===0&&(d=138,l=3),n=0;n<=t;n++)if(s=i,i=r[(n+1)*2+1],!(++o<d&&s===i)){if(o<l)do me(e,s,e.bl_tree);while(--o!==0);else s!==0?(s!==a&&(me(e,s,e.bl_tree),o--),me(e,ui,e.bl_tree),K(e,o-3,2)):o<=10?(me(e,di,e.bl_tree),K(e,o-3,3)):(me(e,fi,e.bl_tree),K(e,o-11,7));o=0,a=s,i===0?(d=138,l=3):s===i?(d=6,l=3):(d=7,l=4)}},xl=e=>{let r;for(Ts(e,e.dyn_ltree,e.l_desc.max_code),Ts(e,e.dyn_dtree,e.d_desc.max_code),fa(e,e.bl_desc),r=Ra-1;r>=3&&e.bl_tree[hi[r]*2+1]===0;r--);return e.opt_len+=3*(r+1)+5+5+4,r},El=(e,r,t,n)=>{let a;for(K(e,r-257,5),K(e,t-1,5),K(e,n-4,4),a=0;a<n;a++)K(e,e.bl_tree[hi[a]*2+1],3);ks(e,e.dyn_ltree,r-1),ks(e,e.dyn_dtree,t-1)},vl=e=>{let r=4093624447,t;for(t=0;t<=31;t++,r>>>=1)if(r&1&&e.dyn_ltree[t*2]!==0)return 0;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return 1;for(t=32;t<mr;t++)if(e.dyn_ltree[t*2]!==0)return 1;return 0},As=!1,Sl=e=>{As||(Rl(),As=!0),e.l_desc=new Qn(e.dyn_ltree,pi),e.d_desc=new Qn(e.dyn_dtree,gi),e.bl_desc=new Qn(e.bl_tree,mi),e.bi_buf=0,e.bi_valid=0,wi(e)},xi=(e,r,t,n)=>{K(e,(fl<<1)+(n?1:0),3),Ri(e),dr(e,t),dr(e,~t),t&&e.pending_buf.set(e.window.subarray(r,r+t),e.pending),e.pending+=t},Tl=e=>{K(e,li<<1,3),me(e,xa,Ee),bl(e)},kl=(e,r,t,n)=>{let a,s,i=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=vl(e)),fa(e,e.l_desc),fa(e,e.d_desc),i=xl(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=t+5,t+4<=a&&r!==-1?xi(e,r,t,n):e.strategy===4||s===a?(K(e,(li<<1)+(n?1:0),3),Ss(e,Ee,sr)):(K(e,(hl<<1)+(n?1:0),3),El(e,e.l_desc.max_code+1,e.d_desc.max_code+1,i+1),Ss(e,e.dyn_ltree,e.dyn_dtree)),wi(e),n&&Ri(e)},Al=(e,r,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=r,e.pending_buf[e.sym_buf+e.sym_next++]=r>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,r===0?e.dyn_ltree[t*2]++:(e.matches++,r--,e.dyn_ltree[(ur[t]+mr+1)*2]++,e.dyn_dtree[yi(r)*2]++),e.sym_next===e.sym_end),Dl=Sl,Pl=xi,Ol=kl,Ml=Al,Il=Tl,Nl={_tr_init:Dl,_tr_stored_block:Pl,_tr_flush_block:Ol,_tr_tally:Ml,_tr_align:Il},Ul=(e,r,t,n)=>{let a=e&65535|0,s=e>>>16&65535|0,i=0;for(;t!==0;){i=t>2e3?2e3:t,t-=i;do a=a+r[n++]|0,s=s+a|0;while(--i);a%=65521,s%=65521}return a|s<<16|0},fr=Ul,Cl=()=>{let e,r=[];for(var t=0;t<256;t++){e=t;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;r[t]=e}return r},Fl=new Uint32Array(Cl()),Wl=(e,r,t,n)=>{let a=Fl,s=n+t;e^=-1;for(let i=n;i<s;i++)e=e>>>8^a[(e^r[i])&255];return e^-1},H=Wl,it={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ot={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},{_tr_init:Ll,_tr_stored_block:ha,_tr_flush_block:Bl,_tr_tally:Me,_tr_align:zl}=Nl,{Z_NO_FLUSH:Ie,Z_PARTIAL_FLUSH:jl,Z_FULL_FLUSH:Hl,Z_FINISH:ie,Z_BLOCK:Ds,Z_OK:J,Z_STREAM_END:Ps,Z_STREAM_ERROR:ye,Z_DATA_ERROR:ql,Z_BUF_ERROR:ta,Z_DEFAULT_COMPRESSION:$l,Z_FILTERED:Vl,Z_HUFFMAN_ONLY:sn,Z_RLE:Zl,Z_FIXED:Jl,Z_DEFAULT_STRATEGY:Xl,Z_UNKNOWN:Gl,Z_DEFLATED:gn}=Ot,Kl=9,Yl=15,Ql=8,ec=29,tc=256,pa=tc+1+ec,rc=30,nc=19,ac=2*pa+1,sc=15,M=3,Oe=258,_e=Oe+M+1,ic=32,At=42,va=57,ga=69,ma=73,ya=91,_a=103,at=113,nr=666,G=1,Mt=2,ot=3,It=4,oc=3,st=(e,r)=>(e.msg=it[r],r),Os=e=>e*2-(e>4?9:0),Pe=e=>{let r=e.length;for(;--r>=0;)e[r]=0},lc=e=>{let r,t,n,a=e.w_size;r=e.hash_size,n=r;do t=e.head[--n],e.head[n]=t>=a?t-a:0;while(--r);r=a,n=r;do t=e.prev[--n],e.prev[n]=t>=a?t-a:0;while(--r)},cc=(e,r,t)=>(r<<e.hash_shift^t)&e.hash_mask,Ne=cc,Q=e=>{let r=e.state,t=r.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(r.pending_buf.subarray(r.pending_out,r.pending_out+t),e.next_out),e.next_out+=t,r.pending_out+=t,e.total_out+=t,e.avail_out-=t,r.pending-=t,r.pending===0&&(r.pending_out=0))},ee=(e,r)=>{Bl(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,r),e.block_start=e.strstart,Q(e.strm)},N=(e,r)=>{e.pending_buf[e.pending++]=r},rr=(e,r)=>{e.pending_buf[e.pending++]=r>>>8&255,e.pending_buf[e.pending++]=r&255},ba=(e,r,t,n)=>{let a=e.avail_in;return a>n&&(a=n),a===0?0:(e.avail_in-=a,r.set(e.input.subarray(e.next_in,e.next_in+a),t),e.state.wrap===1?e.adler=fr(e.adler,r,a,t):e.state.wrap===2&&(e.adler=H(e.adler,r,a,t)),e.next_in+=a,e.total_in+=a,a)},Ei=(e,r)=>{let t=e.max_chain_length,n=e.strstart,a,s,i=e.prev_length,o=e.nice_match,d=e.strstart>e.w_size-_e?e.strstart-(e.w_size-_e):0,l=e.window,u=e.w_mask,b=e.prev,g=e.strstart+Oe,f=l[n+i-1],y=l[n+i];e.prev_length>=e.good_match&&(t>>=2),o>e.lookahead&&(o=e.lookahead);do if(a=r,!(l[a+i]!==y||l[a+i-1]!==f||l[a]!==l[n]||l[++a]!==l[n+1])){n+=2,a++;do;while(l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&l[++n]===l[++a]&&n<g);if(s=Oe-(g-n),n=g-Oe,s>i){if(e.match_start=r,i=s,s>=o)break;f=l[n+i-1],y=l[n+i]}}while((r=b[r&u])>d&&--t!==0);return i<=e.lookahead?i:e.lookahead},Dt=e=>{let r=e.w_size,t,n,a;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=r+(r-_e)&&(e.window.set(e.window.subarray(r,r+r-n),0),e.match_start-=r,e.strstart-=r,e.block_start-=r,e.insert>e.strstart&&(e.insert=e.strstart),lc(e),n+=r),e.strm.avail_in===0)break;if(t=ba(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=M)for(a=e.strstart-e.insert,e.ins_h=e.window[a],e.ins_h=Ne(e,e.ins_h,e.window[a+1]);e.insert&&(e.ins_h=Ne(e,e.ins_h,e.window[a+M-1]),e.prev[a&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=a,a++,e.insert--,!(e.lookahead+e.insert<M)););}while(e.lookahead<_e&&e.strm.avail_in!==0)},vi=(e,r)=>{let t=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,s,i=0,o=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>s&&(n=s),n<t&&(n===0&&r!==ie||r===Ie||n!==a+e.strm.avail_in)))break;i=r===ie&&n===a+e.strm.avail_in?1:0,ha(e,0,0,i),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,Q(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(ba(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(i===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),i?It:r!==Ie&&r!==ie&&e.strm.avail_in===0&&e.strstart===e.block_start?Mt:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(ba(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s,t=s>e.w_size?e.w_size:s,a=e.strstart-e.block_start,(a>=t||(a||r===ie)&&r!==Ie&&e.strm.avail_in===0&&a<=s)&&(n=a>s?s:a,i=r===ie&&e.strm.avail_in===0&&n===a?1:0,ha(e,e.block_start,n,i),e.block_start+=n,Q(e.strm)),i?ot:G)},ra=(e,r)=>{let t,n;for(;;){if(e.lookahead<_e){if(Dt(e),e.lookahead<_e&&r===Ie)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=Ne(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-_e&&(e.match_length=Ei(e,t)),e.match_length>=M)if(n=Me(e,e.strstart-e.match_start,e.match_length-M),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=M){e.match_length--;do e.strstart++,e.ins_h=Ne(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Ne(e,e.ins_h,e.window[e.strstart+1]);else n=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=e.strstart<M-1?e.strstart:M-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Mt},St=(e,r)=>{let t,n,a;for(;;){if(e.lookahead<_e){if(Dt(e),e.lookahead<_e&&r===Ie)return G;if(e.lookahead===0)break}if(t=0,e.lookahead>=M&&(e.ins_h=Ne(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=M-1,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-_e&&(e.match_length=Ei(e,t),e.match_length<=5&&(e.strategy===Vl||e.match_length===M&&e.strstart-e.match_start>4096)&&(e.match_length=M-1)),e.prev_length>=M&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-M,n=Me(e,e.strstart-1-e.prev_match,e.prev_length-M),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=Ne(e,e.ins_h,e.window[e.strstart+M-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=M-1,e.strstart++,n&&(ee(e,!1),e.strm.avail_out===0))return G}else if(e.match_available){if(n=Me(e,0,e.window[e.strstart-1]),n&&ee(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return G}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=Me(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<M-1?e.strstart:M-1,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Mt},uc=(e,r)=>{let t,n,a,s,i=e.window;for(;;){if(e.lookahead<=Oe){if(Dt(e),e.lookahead<=Oe&&r===Ie)return G;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=M&&e.strstart>0&&(a=e.strstart-1,n=i[a],n===i[++a]&&n===i[++a]&&n===i[++a])){s=e.strstart+Oe;do;while(n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&n===i[++a]&&a<s);e.match_length=Oe-(s-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=M?(t=Me(e,1,e.match_length-M),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(t=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Mt},dc=(e,r)=>{let t;for(;;){if(e.lookahead===0&&(Dt(e),e.lookahead===0)){if(r===Ie)return G;break}if(e.match_length=0,t=Me(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,t&&(ee(e,!1),e.strm.avail_out===0))return G}return e.insert=0,r===ie?(ee(e,!0),e.strm.avail_out===0?ot:It):e.sym_next&&(ee(e,!1),e.strm.avail_out===0)?G:Mt};function ge(e,r,t,n,a){this.good_length=e,this.max_lazy=r,this.nice_length=t,this.max_chain=n,this.func=a}var ar=[new ge(0,0,0,0,vi),new ge(4,4,8,4,ra),new ge(4,5,16,8,ra),new ge(4,6,32,32,ra),new ge(4,4,16,16,St),new ge(8,16,32,32,St),new ge(8,16,128,128,St),new ge(8,32,128,256,St),new ge(32,128,258,1024,St),new ge(32,258,258,4096,St)],fc=e=>{e.window_size=2*e.w_size,Pe(e.head),e.max_lazy_match=ar[e.level].max_lazy,e.good_match=ar[e.level].good_length,e.nice_match=ar[e.level].nice_length,e.max_chain_length=ar[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=M-1,e.match_available=0,e.ins_h=0};function hc(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=gn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(ac*2),this.dyn_dtree=new Uint16Array((2*rc+1)*2),this.bl_tree=new Uint16Array((2*nc+1)*2),Pe(this.dyn_ltree),Pe(this.dyn_dtree),Pe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(sc+1),this.heap=new Uint16Array(2*pa+1),Pe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*pa+1),Pe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var yr=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.status!==At&&r.status!==va&&r.status!==ga&&r.status!==ma&&r.status!==ya&&r.status!==_a&&r.status!==at&&r.status!==nr?1:0},Si=e=>{if(yr(e))return st(e,ye);e.total_in=e.total_out=0,e.data_type=Gl;let r=e.state;return r.pending=0,r.pending_out=0,r.wrap<0&&(r.wrap=-r.wrap),r.status=r.wrap===2?va:r.wrap?At:at,e.adler=r.wrap===2?0:1,r.last_flush=-2,Ll(r),J},Ti=e=>{let r=Si(e);return r===J&&fc(e.state),r},pc=(e,r)=>yr(e)||e.state.wrap!==2?ye:(e.state.gzhead=r,J),ki=(e,r,t,n,a,s)=>{if(!e)return ye;let i=1;if(r===$l&&(r=6),n<0?(i=0,n=-n):n>15&&(i=2,n-=16),a<1||a>Kl||t!==gn||n<8||n>15||r<0||r>9||s<0||s>Jl||n===8&&i!==1)return st(e,ye);n===8&&(n=9);let o=new hc;return e.state=o,o.strm=e,o.status=At,o.wrap=i,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+M-1)/M),o.window=new Uint8Array(o.w_size*2),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=o.lit_bufsize*4,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=r,o.strategy=s,o.method=t,Ti(e)},gc=(e,r)=>ki(e,r,gn,Yl,Ql,Xl),mc=(e,r)=>{if(yr(e)||r>Ds||r<0)return e?st(e,ye):ye;let t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===nr&&r!==ie)return st(e,e.avail_out===0?ta:ye);let n=t.last_flush;if(t.last_flush=r,t.pending!==0){if(Q(e),e.avail_out===0)return t.last_flush=-1,J}else if(e.avail_in===0&&Os(r)<=Os(n)&&r!==ie)return st(e,ta);if(t.status===nr&&e.avail_in!==0)return st(e,ta);if(t.status===At&&t.wrap===0&&(t.status=at),t.status===At){let a=gn+(t.w_bits-8<<4)<<8,s=-1;if(t.strategy>=sn||t.level<2?s=0:t.level<6?s=1:t.level===6?s=2:s=3,a|=s<<6,t.strstart!==0&&(a|=ic),a+=31-a%31,rr(t,a),t.strstart!==0&&(rr(t,e.adler>>>16),rr(t,e.adler&65535)),e.adler=1,t.status=at,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===va){if(e.adler=0,N(t,31),N(t,139),N(t,8),t.gzhead)N(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),N(t,t.gzhead.time&255),N(t,t.gzhead.time>>8&255),N(t,t.gzhead.time>>16&255),N(t,t.gzhead.time>>24&255),N(t,t.level===9?2:t.strategy>=sn||t.level<2?4:0),N(t,t.gzhead.os&255),t.gzhead.extra&&t.gzhead.extra.length&&(N(t,t.gzhead.extra.length&255),N(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=H(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=ga;else if(N(t,0),N(t,0),N(t,0),N(t,0),N(t,0),N(t,t.level===9?2:t.strategy>=sn||t.level<2?4:0),N(t,oc),t.status=at,Q(e),t.pending!==0)return t.last_flush=-1,J}if(t.status===ga){if(t.gzhead.extra){let a=t.pending,s=(t.gzhead.extra.length&65535)-t.gzindex;for(;t.pending+s>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex+=o,Q(e),t.pending!==0)return t.last_flush=-1,J;a=0,s-=o}let i=new Uint8Array(t.gzhead.extra);t.pending_buf.set(i.subarray(t.gzindex,t.gzindex+s),t.pending),t.pending+=s,t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=ma}if(t.status===ma){if(t.gzhead.name){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a)),Q(e),t.pending!==0)return t.last_flush=-1,J;a=0}t.gzindex<t.gzhead.name.length?s=t.gzhead.name.charCodeAt(t.gzindex++)&255:s=0,N(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=ya}if(t.status===ya){if(t.gzhead.comment){let a=t.pending,s;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a)),Q(e),t.pending!==0)return t.last_flush=-1,J;a=0}t.gzindex<t.gzhead.comment.length?s=t.gzhead.comment.charCodeAt(t.gzindex++)&255:s=0,N(t,s)}while(s!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=H(e.adler,t.pending_buf,t.pending-a,a))}t.status=_a}if(t.status===_a){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(Q(e),t.pending!==0))return t.last_flush=-1,J;N(t,e.adler&255),N(t,e.adler>>8&255),e.adler=0}if(t.status=at,Q(e),t.pending!==0)return t.last_flush=-1,J}if(e.avail_in!==0||t.lookahead!==0||r!==Ie&&t.status!==nr){let a=t.level===0?vi(t,r):t.strategy===sn?dc(t,r):t.strategy===Zl?uc(t,r):ar[t.level].func(t,r);if((a===ot||a===It)&&(t.status=nr),a===G||a===ot)return e.avail_out===0&&(t.last_flush=-1),J;if(a===Mt&&(r===jl?zl(t):r!==Ds&&(ha(t,0,0,!1),r===Hl&&(Pe(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),Q(e),e.avail_out===0))return t.last_flush=-1,J}return r!==ie?J:t.wrap<=0?Ps:(t.wrap===2?(N(t,e.adler&255),N(t,e.adler>>8&255),N(t,e.adler>>16&255),N(t,e.adler>>24&255),N(t,e.total_in&255),N(t,e.total_in>>8&255),N(t,e.total_in>>16&255),N(t,e.total_in>>24&255)):(rr(t,e.adler>>>16),rr(t,e.adler&65535)),Q(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?J:Ps)},yc=e=>{if(yr(e))return ye;let r=e.state.status;return e.state=null,r===at?st(e,ql):J},_c=(e,r)=>{let t=r.length;if(yr(e))return ye;let n=e.state,a=n.wrap;if(a===2||a===1&&n.status!==At||n.lookahead)return ye;if(a===1&&(e.adler=fr(e.adler,r,t,0)),n.wrap=0,t>=n.w_size){a===0&&(Pe(n.head),n.strstart=0,n.block_start=0,n.insert=0);let d=new Uint8Array(n.w_size);d.set(r.subarray(t-n.w_size,t),0),r=d,t=n.w_size}let s=e.avail_in,i=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=r,Dt(n);n.lookahead>=M;){let d=n.strstart,l=n.lookahead-(M-1);do n.ins_h=Ne(n,n.ins_h,n.window[d+M-1]),n.prev[d&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=d,d++;while(--l);n.strstart=d,n.lookahead=M-1,Dt(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=M-1,n.match_available=0,e.next_in=i,e.input=o,e.avail_in=s,n.wrap=a,J},bc=gc,wc=ki,Rc=Ti,xc=Si,Ec=pc,vc=mc,Sc=yc,Tc=_c,kc="pako deflate (from Nodeca project)",ir={deflateInit:bc,deflateInit2:wc,deflateReset:Rc,deflateResetKeep:xc,deflateSetHeader:Ec,deflate:vc,deflateEnd:Sc,deflateSetDictionary:Tc,deflateInfo:kc},Ac=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),Dc=function(e){let r=Array.prototype.slice.call(arguments,1);for(;r.length;){let t=r.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(let n in t)Ac(t,n)&&(e[n]=t[n])}}return e},Pc=e=>{let r=0;for(let n=0,a=e.length;n<a;n++)r+=e[n].length;let t=new Uint8Array(r);for(let n=0,a=0,s=e.length;n<s;n++){let i=e[n];t.set(i,a),a+=i.length}return t},mn={assign:Dc,flattenChunks:Pc},Ai=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Ai=!1}var hr=new Uint8Array(256);for(let e=0;e<256;e++)hr[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;hr[254]=hr[254]=1;var Oc=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let r,t,n,a,s,i=e.length,o=0;for(a=0;a<i;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<i&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(r=new Uint8Array(o),s=0,a=0;s<o;a++)t=e.charCodeAt(a),(t&64512)===55296&&a+1<i&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(t=65536+(t-55296<<10)+(n-56320),a++)),t<128?r[s++]=t:t<2048?(r[s++]=192|t>>>6,r[s++]=128|t&63):t<65536?(r[s++]=224|t>>>12,r[s++]=128|t>>>6&63,r[s++]=128|t&63):(r[s++]=240|t>>>18,r[s++]=128|t>>>12&63,r[s++]=128|t>>>6&63,r[s++]=128|t&63);return r},Mc=(e,r)=>{if(r<65534&&e.subarray&&Ai)return String.fromCharCode.apply(null,e.length===r?e:e.subarray(0,r));let t="";for(let n=0;n<r;n++)t+=String.fromCharCode(e[n]);return t},Ic=(e,r)=>{let t=r||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,r));let n,a,s=new Array(t*2);for(a=0,n=0;n<t;){let i=e[n++];if(i<128){s[a++]=i;continue}let o=hr[i];if(o>4){s[a++]=65533,n+=o-1;continue}for(i&=o===2?31:o===3?15:7;o>1&&n<t;)i=i<<6|e[n++]&63,o--;if(o>1){s[a++]=65533;continue}i<65536?s[a++]=i:(i-=65536,s[a++]=55296|i>>10&1023,s[a++]=56320|i&1023)}return Mc(s,a)},Nc=(e,r)=>{r=r||e.length,r>e.length&&(r=e.length);let t=r-1;for(;t>=0&&(e[t]&192)===128;)t--;return t<0||t===0?r:t+hr[e[t]]>r?t:r},pr={string2buf:Oc,buf2string:Ic,utf8border:Nc};function Uc(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Di=Uc,Pi=Object.prototype.toString,{Z_NO_FLUSH:Cc,Z_SYNC_FLUSH:Fc,Z_FULL_FLUSH:Wc,Z_FINISH:Lc,Z_OK:hn,Z_STREAM_END:Bc,Z_DEFAULT_COMPRESSION:zc,Z_DEFAULT_STRATEGY:jc,Z_DEFLATED:Hc}=Ot;function _r(e){this.options=mn.assign({level:zc,method:Hc,chunkSize:16384,windowBits:15,memLevel:8,strategy:jc},e||{});let r=this.options;r.raw&&r.windowBits>0?r.windowBits=-r.windowBits:r.gzip&&r.windowBits>0&&r.windowBits<16&&(r.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Di,this.strm.avail_out=0;let t=ir.deflateInit2(this.strm,r.level,r.method,r.windowBits,r.memLevel,r.strategy);if(t!==hn)throw new Error(it[t]);if(r.header&&ir.deflateSetHeader(this.strm,r.header),r.dictionary){let n;if(typeof r.dictionary=="string"?n=pr.string2buf(r.dictionary):Pi.call(r.dictionary)==="[object ArrayBuffer]"?n=new Uint8Array(r.dictionary):n=r.dictionary,t=ir.deflateSetDictionary(this.strm,n),t!==hn)throw new Error(it[t]);this._dict_set=!0}}_r.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,a,s;if(this.ended)return!1;for(r===~~r?s=r:s=r===!0?Lc:Cc,typeof e=="string"?t.input=pr.string2buf(e):Pi.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){if(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),(s===Fc||s===Wc)&&t.avail_out<=6){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(a=ir.deflate(t,s),a===Bc)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),a=ir.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===hn;if(t.avail_out===0){this.onData(t.output);continue}if(s>0&&t.next_out>0){this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;continue}if(t.avail_in===0)break}return!0};_r.prototype.onData=function(e){this.chunks.push(e)};_r.prototype.onEnd=function(e){e===hn&&(this.result=mn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Sa(e,r){let t=new _r(r);if(t.push(e,!0),t.err)throw t.msg||it[t.err];return t.result}function qc(e,r){return r=r||{},r.raw=!0,Sa(e,r)}function $c(e,r){return r=r||{},r.gzip=!0,Sa(e,r)}var Vc=_r,Zc=Sa,Jc=qc,Xc=$c,Gc=Ot,Kc={Deflate:Vc,deflate:Zc,deflateRaw:Jc,gzip:Xc,constants:Gc},on=16209,Yc=16191,Qc=function(r,t){let n,a,s,i,o,d,l,u,b,g,f,y,v,R,w,S,p,h,T,U,_,I,P,E,D=r.state;n=r.next_in,P=r.input,a=n+(r.avail_in-5),s=r.next_out,E=r.output,i=s-(t-r.avail_out),o=s+(r.avail_out-257),d=D.dmax,l=D.wsize,u=D.whave,b=D.wnext,g=D.window,f=D.hold,y=D.bits,v=D.lencode,R=D.distcode,w=(1<<D.lenbits)-1,S=(1<<D.distbits)-1;e:do{y<15&&(f+=P[n++]<<y,y+=8,f+=P[n++]<<y,y+=8),p=v[f&w];t:for(;;){if(h=p>>>24,f>>>=h,y-=h,h=p>>>16&255,h===0)E[s++]=p&65535;else if(h&16){T=p&65535,h&=15,h&&(y<h&&(f+=P[n++]<<y,y+=8),T+=f&(1<<h)-1,f>>>=h,y-=h),y<15&&(f+=P[n++]<<y,y+=8,f+=P[n++]<<y,y+=8),p=R[f&S];r:for(;;){if(h=p>>>24,f>>>=h,y-=h,h=p>>>16&255,h&16){if(U=p&65535,h&=15,y<h&&(f+=P[n++]<<y,y+=8,y<h&&(f+=P[n++]<<y,y+=8)),U+=f&(1<<h)-1,U>d){r.msg="invalid distance too far back",D.mode=on;break e}if(f>>>=h,y-=h,h=s-i,U>h){if(h=U-h,h>u&&D.sane){r.msg="invalid distance too far back",D.mode=on;break e}if(_=0,I=g,b===0){if(_+=l-h,h<T){T-=h;do E[s++]=g[_++];while(--h);_=s-U,I=E}}else if(b<h){if(_+=l+b-h,h-=b,h<T){T-=h;do E[s++]=g[_++];while(--h);if(_=0,b<T){h=b,T-=h;do E[s++]=g[_++];while(--h);_=s-U,I=E}}}else if(_+=b-h,h<T){T-=h;do E[s++]=g[_++];while(--h);_=s-U,I=E}for(;T>2;)E[s++]=I[_++],E[s++]=I[_++],E[s++]=I[_++],T-=3;T&&(E[s++]=I[_++],T>1&&(E[s++]=I[_++]))}else{_=s-U;do E[s++]=E[_++],E[s++]=E[_++],E[s++]=E[_++],T-=3;while(T>2);T&&(E[s++]=E[_++],T>1&&(E[s++]=E[_++]))}}else if((h&64)===0){p=R[(p&65535)+(f&(1<<h)-1)];continue r}else{r.msg="invalid distance code",D.mode=on;break e}break}}else if((h&64)===0){p=v[(p&65535)+(f&(1<<h)-1)];continue t}else if(h&32){D.mode=Yc;break e}else{r.msg="invalid literal/length code",D.mode=on;break e}break}}while(n<a&&s<o);T=y>>3,n-=T,y-=T<<3,f&=(1<<y)-1,r.next_in=n,r.next_out=s,r.avail_in=n<a?5+(a-n):5-(n-a),r.avail_out=s<o?257+(o-s):257-(s-o),D.hold=f,D.bits=y},Tt=15,Ms=852,Is=592,Ns=0,na=1,Us=2,eu=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tu=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ru=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),nu=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),au=(e,r,t,n,a,s,i,o)=>{let d=o.bits,l=0,u=0,b=0,g=0,f=0,y=0,v=0,R=0,w=0,S=0,p,h,T,U,_,I=null,P,E=new Uint16Array(Tt+1),D=new Uint16Array(Tt+1),q=null,Ct,Ue,Ce;for(l=0;l<=Tt;l++)E[l]=0;for(u=0;u<n;u++)E[r[t+u]]++;for(f=d,g=Tt;g>=1&&E[g]===0;g--);if(f>g&&(f=g),g===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,o.bits=1,0;for(b=1;b<g&&E[b]===0;b++);for(f<b&&(f=b),R=1,l=1;l<=Tt;l++)if(R<<=1,R-=E[l],R<0)return-1;if(R>0&&(e===Ns||g!==1))return-1;for(D[1]=0,l=1;l<Tt;l++)D[l+1]=D[l]+E[l];for(u=0;u<n;u++)r[t+u]!==0&&(i[D[r[t+u]]++]=u);if(e===Ns?(I=q=i,P=20):e===na?(I=eu,q=tu,P=257):(I=ru,q=nu,P=0),S=0,u=0,l=b,_=s,y=f,v=0,T=-1,w=1<<f,U=w-1,e===na&&w>Ms||e===Us&&w>Is)return 1;for(;;){Ct=l-v,i[u]+1<P?(Ue=0,Ce=i[u]):i[u]>=P?(Ue=q[i[u]-P],Ce=I[i[u]-P]):(Ue=96,Ce=0),p=1<<l-v,h=1<<y,b=h;do h-=p,a[_+(S>>v)+h]=Ct<<24|Ue<<16|Ce|0;while(h!==0);for(p=1<<l-1;S&p;)p>>=1;if(p!==0?(S&=p-1,S+=p):S=0,u++,--E[l]===0){if(l===g)break;l=r[t+i[u]]}if(l>f&&(S&U)!==T){for(v===0&&(v=f),_+=b,y=l-v,R=1<<y;y+v<g&&(R-=E[y+v],!(R<=0));)y++,R<<=1;if(w+=1<<y,e===na&&w>Ms||e===Us&&w>Is)return 1;T=S&U,a[T]=f<<24|y<<16|_-s|0}}return S!==0&&(a[_+S]=l-v<<24|64<<16|0),o.bits=f,0},or=au,su=0,Oi=1,Mi=2,{Z_FINISH:Cs,Z_BLOCK:iu,Z_TREES:ln,Z_OK:lt,Z_STREAM_END:ou,Z_NEED_DICT:lu,Z_STREAM_ERROR:oe,Z_DATA_ERROR:Ii,Z_MEM_ERROR:Ni,Z_BUF_ERROR:cu,Z_DEFLATED:Fs}=Ot,yn=16180,Ws=16181,Ls=16182,Bs=16183,zs=16184,js=16185,Hs=16186,qs=16187,$s=16188,Vs=16189,pn=16190,xe=16191,aa=16192,Zs=16193,sa=16194,Js=16195,Xs=16196,Gs=16197,Ks=16198,cn=16199,un=16200,Ys=16201,Qs=16202,ei=16203,ti=16204,ri=16205,ia=16206,ni=16207,ai=16208,L=16209,Ui=16210,Ci=16211,uu=852,du=592,fu=15,hu=fu,si=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function pu(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}var ct=e=>{if(!e)return 1;let r=e.state;return!r||r.strm!==e||r.mode<yn||r.mode>Ci?1:0},Fi=e=>{if(ct(e))return oe;let r=e.state;return e.total_in=e.total_out=r.total=0,e.msg="",r.wrap&&(e.adler=r.wrap&1),r.mode=yn,r.last=0,r.havedict=0,r.flags=-1,r.dmax=32768,r.head=null,r.hold=0,r.bits=0,r.lencode=r.lendyn=new Int32Array(uu),r.distcode=r.distdyn=new Int32Array(du),r.sane=1,r.back=-1,lt},Wi=e=>{if(ct(e))return oe;let r=e.state;return r.wsize=0,r.whave=0,r.wnext=0,Fi(e)},Li=(e,r)=>{let t;if(ct(e))return oe;let n=e.state;return r<0?(t=0,r=-r):(t=(r>>4)+5,r<48&&(r&=15)),r&&(r<8||r>15)?oe:(n.window!==null&&n.wbits!==r&&(n.window=null),n.wrap=t,n.wbits=r,Wi(e))},Bi=(e,r)=>{if(!e)return oe;let t=new pu;e.state=t,t.strm=e,t.window=null,t.mode=yn;let n=Li(e,r);return n!==lt&&(e.state=null),n},gu=e=>Bi(e,hu),ii=!0,oa,la,mu=e=>{if(ii){oa=new Int32Array(512),la=new Int32Array(32);let r=0;for(;r<144;)e.lens[r++]=8;for(;r<256;)e.lens[r++]=9;for(;r<280;)e.lens[r++]=7;for(;r<288;)e.lens[r++]=8;for(or(Oi,e.lens,0,288,oa,0,e.work,{bits:9}),r=0;r<32;)e.lens[r++]=5;or(Mi,e.lens,0,32,la,0,e.work,{bits:5}),ii=!1}e.lencode=oa,e.lenbits=9,e.distcode=la,e.distbits=5},zi=(e,r,t,n)=>{let a,s=e.state;return s.window===null&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),n>=s.wsize?(s.window.set(r.subarray(t-s.wsize,t),0),s.wnext=0,s.whave=s.wsize):(a=s.wsize-s.wnext,a>n&&(a=n),s.window.set(r.subarray(t-n,t-n+a),s.wnext),n-=a,n?(s.window.set(r.subarray(t-n,t),0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0},yu=(e,r)=>{let t,n,a,s,i,o,d,l,u,b,g,f,y,v,R=0,w,S,p,h,T,U,_,I,P=new Uint8Array(4),E,D,q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ct(e)||!e.output||!e.input&&e.avail_in!==0)return oe;t=e.state,t.mode===xe&&(t.mode=aa),i=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,b=o,g=d,I=lt;e:for(;;)switch(t.mode){case yn:if(t.wrap===0){t.mode=aa;break}for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&2&&l===35615){t.wbits===0&&(t.wbits=15),t.check=0,P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0),l=0,u=0,t.mode=Ws;break}if(t.head&&(t.head.done=!1),!(t.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",t.mode=L;break}if((l&15)!==Fs){e.msg="unknown compression method",t.mode=L;break}if(l>>>=4,u-=4,_=(l&15)+8,t.wbits===0&&(t.wbits=_),_>15||_>t.wbits){e.msg="invalid window size",t.mode=L;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=l&512?Vs:xe,l=0,u=0;break;case Ws:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.flags=l,(t.flags&255)!==Fs){e.msg="unknown compression method",t.mode=L;break}if(t.flags&57344){e.msg="unknown header flags set",t.mode=L;break}t.head&&(t.head.text=l>>8&1),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0,t.mode=Ls;case Ls:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.head&&(t.head.time=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,P[2]=l>>>16&255,P[3]=l>>>24&255,t.check=H(t.check,P,4,0)),l=0,u=0,t.mode=Bs;case Bs:for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.head&&(t.head.xflags=l&255,t.head.os=l>>8),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0,t.mode=zs;case zs:if(t.flags&1024){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.length=l,t.head&&(t.head.extra_len=l),t.flags&512&&t.wrap&4&&(P[0]=l&255,P[1]=l>>>8&255,t.check=H(t.check,P,2,0)),l=0,u=0}else t.head&&(t.head.extra=null);t.mode=js;case js:if(t.flags&1024&&(f=t.length,f>o&&(f=o),f&&(t.head&&(_=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(n.subarray(s,s+f),_)),t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,s)),o-=f,s+=f,t.length-=f),t.length))break e;t.length=0,t.mode=Hs;case Hs:if(t.flags&2048){if(o===0)break e;f=0;do _=n[s+f++],t.head&&_&&t.length<65536&&(t.head.name+=String.fromCharCode(_));while(_&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,s)),o-=f,s+=f,_)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=qs;case qs:if(t.flags&4096){if(o===0)break e;f=0;do _=n[s+f++],t.head&&_&&t.length<65536&&(t.head.comment+=String.fromCharCode(_));while(_&&f<o);if(t.flags&512&&t.wrap&4&&(t.check=H(t.check,n,f,s)),o-=f,s+=f,_)break e}else t.head&&(t.head.comment=null);t.mode=$s;case $s:if(t.flags&512){for(;u<16;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&4&&l!==(t.check&65535)){e.msg="header crc mismatch",t.mode=L;break}l=0,u=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=xe;break;case Vs:for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}e.adler=t.check=si(l),l=0,u=0,t.mode=pn;case pn:if(t.havedict===0)return e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,lu;e.adler=t.check=1,t.mode=xe;case xe:if(r===iu||r===ln)break e;case aa:if(t.last){l>>>=u&7,u-=u&7,t.mode=ia;break}for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}switch(t.last=l&1,l>>>=1,u-=1,l&3){case 0:t.mode=Zs;break;case 1:if(mu(t),t.mode=cn,r===ln){l>>>=2,u-=2;break e}break;case 2:t.mode=Xs;break;case 3:e.msg="invalid block type",t.mode=L}l>>>=2,u-=2;break;case Zs:for(l>>>=u&7,u-=u&7;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",t.mode=L;break}if(t.length=l&65535,l=0,u=0,t.mode=sa,r===ln)break e;case sa:t.mode=Js;case Js:if(f=t.length,f){if(f>o&&(f=o),f>d&&(f=d),f===0)break e;a.set(n.subarray(s,s+f),i),o-=f,s+=f,d-=f,i+=f,t.length-=f;break}t.mode=xe;break;case Xs:for(;u<14;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.nlen=(l&31)+257,l>>>=5,u-=5,t.ndist=(l&31)+1,l>>>=5,u-=5,t.ncode=(l&15)+4,l>>>=4,u-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=L;break}t.have=0,t.mode=Gs;case Gs:for(;t.have<t.ncode;){for(;u<3;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.lens[q[t.have++]]=l&7,l>>>=3,u-=3}for(;t.have<19;)t.lens[q[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,E={bits:t.lenbits},I=or(su,t.lens,0,19,t.lencode,0,t.work,E),t.lenbits=E.bits,I){e.msg="invalid code lengths set",t.mode=L;break}t.have=0,t.mode=Ks;case Ks:for(;t.have<t.nlen+t.ndist;){for(;R=t.lencode[l&(1<<t.lenbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(p<16)l>>>=w,u-=w,t.lens[t.have++]=p;else{if(p===16){for(D=w+2;u<D;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(l>>>=w,u-=w,t.have===0){e.msg="invalid bit length repeat",t.mode=L;break}_=t.lens[t.have-1],f=3+(l&3),l>>>=2,u-=2}else if(p===17){for(D=w+3;u<D;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=w,u-=w,_=0,f=3+(l&7),l>>>=3,u-=3}else{for(D=w+7;u<D;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=w,u-=w,_=0,f=11+(l&127),l>>>=7,u-=7}if(t.have+f>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=L;break}for(;f--;)t.lens[t.have++]=_}}if(t.mode===L)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=L;break}if(t.lenbits=9,E={bits:t.lenbits},I=or(Oi,t.lens,0,t.nlen,t.lencode,0,t.work,E),t.lenbits=E.bits,I){e.msg="invalid literal/lengths set",t.mode=L;break}if(t.distbits=6,t.distcode=t.distdyn,E={bits:t.distbits},I=or(Mi,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,E),t.distbits=E.bits,I){e.msg="invalid distances set",t.mode=L;break}if(t.mode=cn,r===ln)break e;case cn:t.mode=un;case un:if(o>=6&&d>=258){e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,Qc(e,g),i=e.next_out,a=e.output,d=e.avail_out,s=e.next_in,n=e.input,o=e.avail_in,l=t.hold,u=t.bits,t.mode===xe&&(t.back=-1);break}for(t.back=0;R=t.lencode[l&(1<<t.lenbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(S&&(S&240)===0){for(h=w,T=S,U=p;R=t.lencode[U+((l&(1<<h+T)-1)>>h)],w=R>>>24,S=R>>>16&255,p=R&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,t.length=p,S===0){t.mode=ri;break}if(S&32){t.back=-1,t.mode=xe;break}if(S&64){e.msg="invalid literal/length code",t.mode=L;break}t.extra=S&15,t.mode=Ys;case Ys:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.length+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=Qs;case Qs:for(;R=t.distcode[l&(1<<t.distbits)-1],w=R>>>24,S=R>>>16&255,p=R&65535,!(w<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if((S&240)===0){for(h=w,T=S,U=p;R=t.distcode[U+((l&(1<<h+T)-1)>>h)],w=R>>>24,S=R>>>16&255,p=R&65535,!(h+w<=u);){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}l>>>=h,u-=h,t.back+=h}if(l>>>=w,u-=w,t.back+=w,S&64){e.msg="invalid distance code",t.mode=L;break}t.offset=p,t.extra=S&15,t.mode=ei;case ei:if(t.extra){for(D=t.extra;u<D;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}t.offset+=l&(1<<t.extra)-1,l>>>=t.extra,u-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=L;break}t.mode=ti;case ti:if(d===0)break e;if(f=g-d,t.offset>f){if(f=t.offset-f,f>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=L;break}f>t.wnext?(f-=t.wnext,y=t.wsize-f):y=t.wnext-f,f>t.length&&(f=t.length),v=t.window}else v=a,y=i-t.offset,f=t.length;f>d&&(f=d),d-=f,t.length-=f;do a[i++]=v[y++];while(--f);t.length===0&&(t.mode=un);break;case ri:if(d===0)break e;a[i++]=t.length,d--,t.mode=un;break;case ia:if(t.wrap){for(;u<32;){if(o===0)break e;o--,l|=n[s++]<<u,u+=8}if(g-=d,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?H(t.check,a,g,i-g):fr(t.check,a,g,i-g)),g=d,t.wrap&4&&(t.flags?l:si(l))!==t.check){e.msg="incorrect data check",t.mode=L;break}l=0,u=0}t.mode=ni;case ni:if(t.wrap&&t.flags){for(;u<32;){if(o===0)break e;o--,l+=n[s++]<<u,u+=8}if(t.wrap&4&&l!==(t.total&4294967295)){e.msg="incorrect length check",t.mode=L;break}l=0,u=0}t.mode=ai;case ai:I=ou;break e;case L:I=Ii;break e;case Ui:return Ni;case Ci:default:return oe}return e.next_out=i,e.avail_out=d,e.next_in=s,e.avail_in=o,t.hold=l,t.bits=u,(t.wsize||g!==e.avail_out&&t.mode<L&&(t.mode<ia||r!==Cs))&&zi(e,e.output,e.next_out,g-e.avail_out),b-=e.avail_in,g-=e.avail_out,e.total_in+=b,e.total_out+=g,t.total+=g,t.wrap&4&&g&&(e.adler=t.check=t.flags?H(t.check,a,g,e.next_out-g):fr(t.check,a,g,e.next_out-g)),e.data_type=t.bits+(t.last?64:0)+(t.mode===xe?128:0)+(t.mode===cn||t.mode===sa?256:0),(b===0&&g===0||r===Cs)&&I===lt&&(I=cu),I},_u=e=>{if(ct(e))return oe;let r=e.state;return r.window&&(r.window=null),e.state=null,lt},bu=(e,r)=>{if(ct(e))return oe;let t=e.state;return(t.wrap&2)===0?oe:(t.head=r,r.done=!1,lt)},wu=(e,r)=>{let t=r.length,n,a,s;return ct(e)||(n=e.state,n.wrap!==0&&n.mode!==pn)?oe:n.mode===pn&&(a=1,a=fr(a,r,t,0),a!==n.check)?Ii:(s=zi(e,r,t,t),s?(n.mode=Ui,Ni):(n.havedict=1,lt))},Ru=Wi,xu=Li,Eu=Fi,vu=gu,Su=Bi,Tu=yu,ku=_u,Au=bu,Du=wu,Pu="pako inflate (from Nodeca project)",ve={inflateReset:Ru,inflateReset2:xu,inflateResetKeep:Eu,inflateInit:vu,inflateInit2:Su,inflate:Tu,inflateEnd:ku,inflateGetHeader:Au,inflateSetDictionary:Du,inflateInfo:Pu};function Ou(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Mu=Ou,ji=Object.prototype.toString,{Z_NO_FLUSH:Iu,Z_FINISH:Nu,Z_OK:gr,Z_STREAM_END:ca,Z_NEED_DICT:ua,Z_STREAM_ERROR:Uu,Z_DATA_ERROR:oi,Z_MEM_ERROR:Cu}=Ot;function br(e){this.options=mn.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});let r=this.options;r.raw&&r.windowBits>=0&&r.windowBits<16&&(r.windowBits=-r.windowBits,r.windowBits===0&&(r.windowBits=-15)),r.windowBits>=0&&r.windowBits<16&&!(e&&e.windowBits)&&(r.windowBits+=32),r.windowBits>15&&r.windowBits<48&&(r.windowBits&15)===0&&(r.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Di,this.strm.avail_out=0;let t=ve.inflateInit2(this.strm,r.windowBits);if(t!==gr)throw new Error(it[t]);if(this.header=new Mu,ve.inflateGetHeader(this.strm,this.header),r.dictionary&&(typeof r.dictionary=="string"?r.dictionary=pr.string2buf(r.dictionary):ji.call(r.dictionary)==="[object ArrayBuffer]"&&(r.dictionary=new Uint8Array(r.dictionary)),r.raw&&(t=ve.inflateSetDictionary(this.strm,r.dictionary),t!==gr)))throw new Error(it[t])}br.prototype.push=function(e,r){let t=this.strm,n=this.options.chunkSize,a=this.options.dictionary,s,i,o;if(this.ended)return!1;for(r===~~r?i=r:i=r===!0?Nu:Iu,ji.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(n),t.next_out=0,t.avail_out=n),s=ve.inflate(t,i),s===ua&&a&&(s=ve.inflateSetDictionary(t,a),s===gr?s=ve.inflate(t,i):s===oi&&(s=ua));t.avail_in>0&&s===ca&&t.state.wrap>0&&e[t.next_in]!==0;)ve.inflateReset(t),s=ve.inflate(t,i);switch(s){case Uu:case oi:case ua:case Cu:return this.onEnd(s),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||s===ca))if(this.options.to==="string"){let d=pr.utf8border(t.output,t.next_out),l=t.next_out-d,u=pr.buf2string(t.output,d);t.next_out=l,t.avail_out=n-l,l&&t.output.set(t.output.subarray(d,d+l),0),this.onData(u)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(!(s===gr&&o===0)){if(s===ca)return s=ve.inflateEnd(this.strm),this.onEnd(s),this.ended=!0,!0;if(t.avail_in===0)break}}return!0};br.prototype.onData=function(e){this.chunks.push(e)};br.prototype.onEnd=function(e){e===gr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=mn.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Ta(e,r){let t=new br(r);if(t.push(e),t.err)throw t.msg||it[t.err];return t.result}function Fu(e,r){return r=r||{},r.raw=!0,Ta(e,r)}var Wu=br,Lu=Ta,Bu=Fu,zu=Ta,ju=Ot,Hu={Inflate:Wu,inflate:Lu,inflateRaw:Bu,ungzip:zu,constants:ju},{Deflate:Uh,deflate:Ch,deflateRaw:Fh,gzip:Wh}=Kc,{Inflate:Lh,inflate:Bh,inflateRaw:zh,ungzip:qu}=Hu;var _n=qu;function Hi(e){return"node"in e}var Ju=":";var Xu=new TextEncoder,Gu=new TextDecoder("utf-8"),qi={0:!1,1:!0,2:!0,64:!0,65:!0,66:!0,129:!0,193:!0,514:!0,577:!0,578:!0,705:!0,706:!0,1024:!0,1025:!0,1026:!0,1089:!0,1090:!0,1153:!0,1154:!0,1217:!0,1218:!0,4096:!0,4098:!0},ka=class{constructor(r){this.fs=r}open(r){let t=this.fs.realPath(r.node);this.fs.FS.isFile(r.node.mode)&&(r.file=this.fs.API.get(t))}close(r){if(!this.fs.FS.isFile(r.node.mode)||!r.file)return;let t=this.fs.realPath(r.node),n=r.flags,a=typeof n=="string"?parseInt(n,10):n;a&=8191;let s=!0;a in qi&&(s=qi[a]),s&&this.fs.API.put(t,r.file),r.file=void 0}read(r,t,n,a,s){if(a<=0||r.file===void 0||s>=(r.file.data.length||0))return 0;let i=Math.min(r.file.data.length-s,a);return t.set(r.file.data.subarray(s,s+i),n),i}write(r,t,n,a,s){var i;if(a<=0||r.file===void 0)return 0;if(r.node.timestamp=Date.now(),s+a>(((i=r.file)===null||i===void 0?void 0:i.data.length)||0)){let o=r.file.data?r.file.data:new Uint8Array;r.file.data=new Uint8Array(s+a),r.file.data.set(o)}return r.file.data.set(t.subarray(n,n+a),s),a}llseek(r,t,n){let a=t;if(n===1)a+=r.position;else if(n===2&&this.fs.FS.isFile(r.node.mode))if(r.file!==void 0)a+=r.file.data.length;else throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM);if(a<0)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EINVAL);return a}},Aa=class{constructor(r){this.fs=r}node(r){return Hi(r)?r.node:r}getattr(r){let t=this.node(r);return{...this.fs.API.getattr(this.fs.realPath(t)),mode:t.mode,ino:t.id}}setattr(r,t){let n=this.node(r);for(let[a,s]of Object.entries(t))switch(a){case"mode":n.mode=s;break;case"timestamp":n.timestamp=s;break;case"size":{let i=s,o=this.fs.realPath(n);if(this.fs.FS.isFile(n.mode)&&i>=0){let d=this.fs.API.get(o),l=d.data?d.data:new Uint8Array;i!==l.length&&(i<l.length?d.data=d.data.slice(0,i):(d.data=new Uint8Array(i),d.data.set(l)),this.fs.API.put(o,d))}else console.warn("setattr size of",i,"on",n,"not yet implemented");break}default:console.warn("setattr",a,"of",s,"on",n,"not yet implemented");break}}lookup(r,t){let n=this.node(r),a=this.fs.PATH.join2(this.fs.realPath(n),t),s=this.fs.API.lookup(a);if(!s.ok)throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.ENOENT);return this.fs.createNode(n,t,s.mode,0)}mknod(r,t,n,a){let s=this.node(r),i=this.fs.PATH.join2(this.fs.realPath(s),t);return this.fs.API.mknod(i,n),this.fs.createNode(s,t,n,a)}rename(r,t,n){let a=this.node(r),s=this.node(t);this.fs.API.rename(a.parent?this.fs.PATH.join2(this.fs.realPath(a.parent),a.name):a.name,this.fs.PATH.join2(this.fs.realPath(s),n)),a.name=n,a.parent=s}unlink(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}rmdir(r,t){this.fs.API.rmdir(this.fs.PATH.join2(this.fs.realPath(this.node(r)),t))}readdir(r){return this.fs.API.readdir(this.fs.realPath(this.node(r)))}symlink(r,t,n){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}readlink(r){throw new this.fs.FS.ErrnoError(this.fs.ERRNO_CODES.EPERM)}},Da=class{constructor(r){this._driveName=r.driveName,this._mountpoint=r.mountpoint,this.FS=r.FS,this.ERRNO_CODES=r.ERRNO_CODES}lookup(r){return this.request({method:"lookup",path:this.normalizePath(r)})}getmode(r){return this.request({method:"getmode",path:this.normalizePath(r)})}mknod(r,t){return this.request({method:"mknod",path:this.normalizePath(r),data:{mode:t}})}rename(r,t){return this.request({method:"rename",path:this.normalizePath(r),data:{newPath:this.normalizePath(t)}})}readdir(r){let t=this.request({method:"readdir",path:this.normalizePath(r)});return t.push("."),t.push(".."),t}rmdir(r){return this.request({method:"rmdir",path:this.normalizePath(r)})}get(r){let t=this.request({method:"get",path:this.normalizePath(r)});if(!t)throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT);let n=t.content,a=t.format;switch(a){case"json":case"text":return{data:Xu.encode(n),format:a};case"base64":{let s=atob(n),i=s.length,o=new Uint8Array(i);for(let d=0;d<i;d++)o[d]=s.charCodeAt(d);return{data:o,format:a}}default:throw new this.FS.ErrnoError(this.ERRNO_CODES.ENOENT)}}put(r,t){switch(t.format){case"json":case"text":return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:Gu.decode(t.data)}});case"base64":{let n="";for(let a=0;a<t.data.byteLength;a++)n+=String.fromCharCode(t.data[a]);return this.request({method:"put",path:this.normalizePath(r),data:{format:t.format,data:btoa(n)}})}}}getattr(r){let t=this.request({method:"getattr",path:this.normalizePath(r)});return t.atime&&(t.atime=new Date(t.atime)),t.mtime&&(t.mtime=new Date(t.mtime)),t.ctime&&(t.ctime=new Date(t.ctime)),t.size=t.size||0,t}normalizePath(r){return r.startsWith(this._mountpoint)&&(r=r.slice(this._mountpoint.length)),this._driveName&&(r=`${this._driveName}${Ju}${r}`),r}},Pa=class extends Da{constructor(r){super(r),this._baseUrl=r.baseUrl,this._browsingContextId=r.browsingContextId||""}request(r){let t=new XMLHttpRequest;t.open("POST",encodeURI(this.endpoint),!1);let n={data:r,browsingContextId:this._browsingContextId};try{t.send(JSON.stringify(n))}catch(a){console.error(a)}if(t.status>=400)throw new this.FS.ErrnoError(this.ERRNO_CODES.EINVAL);return JSON.parse(t.responseText)}get endpoint(){return`${this._baseUrl}api/drive`}},bn=class{constructor(r){this.FS=r.FS,this.PATH=r.PATH,this.ERRNO_CODES=r.ERRNO_CODES,this.API=this.createAPI(r),this.driveName=r.driveName,this.node_ops=new Aa(this),this.stream_ops=new ka(this)}createAPI(r){if(!r.browsingContextId||!r.baseUrl)throw new Error("Cannot create service-worker API without current browsingContextId");return new Pa(r)}mount(r){return this.createNode(null,r.mountpoint,16895,0)}createNode(r,t,n,a){let s=this.FS;if(!s.isDir(n)&&!s.isFile(n))throw new s.ErrnoError(this.ERRNO_CODES.EINVAL);let i=s.createNode(r,t,n,a);return i.node_ops=this.node_ops,i.stream_ops=this.stream_ops,i}getMode(r){return this.API.getmode(r)}realPath(r){let t=[],n=r;for(t.push(n.name);n.parent!==n;)n=n.parent,t.push(n.name);return t.reverse(),this.PATH.join.apply(null,t)}};function $i(e,r,t){if(e!==c.FS.filesystems.WORKERFS)return c.FS._mount(e,r,t);if("packages"in r&&r.packages)r.packages.forEach(n=>{wr(n.blob,n.metadata,t)});else throw new Error("Can't mount data. You must use the `packages` key when mounting with `WORKERFS` in webR.")}function Oa(e,r){let t=location.origin+"/",n=new bn({FS:globalThis.FS,PATH:globalThis.PATH,ERRNO_CODES:globalThis.ERRNO_CODES,baseUrl:t,driveName:(r==null?void 0:r.driveName)||"",mountpoint:e,browsingContextId:(r==null?void 0:r.browsingContextId)||""});n.node_ops.readdir=n.node_ops.readdir.bind(n.node_ops),n.node_ops.getattr=n.node_ops.getattr.bind(n.node_ops),n.node_ops.setattr=n.node_ops.setattr.bind(n.node_ops),c.FS.mount(n,{},e)}function Vi(e,r){if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let t=c.downloadFileContent(e);if(t.status<200||t.status>=300)throw new Error("Can't download Emscripten filesystem image.");let{data:n,metadata:a}=Ji(t.response);wr(n,a,r)}else{let t=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),n=c.downloadFileContent(`${t}.js.metadata`);if(n.status<200||n.status>=300)throw new Error("Can't download Emscripten filesystem image metadata.");let a=JSON.parse(new TextDecoder().decode(n.response)),s=a.gzip?".data.gz":".data",i=c.downloadFileContent(`${t}${s}`);if(i.status<200||i.status>=300)throw new Error("Can't download Emscripten filesystem image data.");let o=i.response;a.gzip&&(o=_n(o).buffer),wr(o,a,r)}}function Zi(e,r){let t=require("fs");if(/\.tgz$|\.tar\.gz$|\.tar$/.test(e)){let n=t.readFileSync(e),{data:a,metadata:s}=Ji(n);wr(a,s,r)}else{let n=e.replace(/\.data\.gz$|\.data$|\.js.metadata$/,""),a=JSON.parse(t.readFileSync(`${n}.js.metadata`,"utf8")),s=a.gzip?".data.gz":".data",i=t.readFileSync(`${n}${s}`);a.gzip&&(i=_n(i).buffer),wr(i,a,r)}}function wr(e,r,t){if(V){let n=Buffer.from(e),a=c.FS.filesystems.WORKERFS;a.reader||(a.reader={readAsArrayBuffer:s=>new Uint8Array(s)}),r.files.forEach(s=>{let i=n.subarray(s.start,s.end);i.size=i.byteLength,i.slice=(b,g)=>{let f=i.subarray(b,g);return f.size=f.byteLength,f};let o=(t+s.filename).split("/"),d=o.pop();if(!d)throw new Error(`Invalid mount path "${t}${s.filename}".`);let l=o.join("/");c.FS.mkdirTree(l);let u=c.FS.lookupPath(l,{}).node;a.createNode(u,d,a.FILE_MODE,0,i)})}else c.FS._mount(c.FS.filesystems.WORKERFS,{packages:[{blob:new Blob([e]),metadata:r}]},t)}function Ji(e){let r=_n(e).buffer,t=Ku(r)||Yu(r);if(!t)throw new Error("Can't mount archive, no VFS metadata found.");let n=new DataView(r,512*t.block,t.len),a=JSON.parse(new TextDecoder().decode(n));return{data:r,metadata:a}}function Ku(e){let r=new DataView(e),t=r.getInt32(r.byteLength-16),n=r.getInt32(r.byteLength-8),a=r.getInt32(r.byteLength-4);return t!==2003133010||n===0||a===0?null:{block:n,len:a}}function Yu(e){let r=new TextDecoder,t=0;for(;t<e.byteLength;){let n=e.slice(t,t+512);if(t+=512,new Uint8Array(n).every(o=>o===0))return null;let a=r.decode(n.slice(156,157));if(/5|g|[A-Z]/.test(a))continue;let s=r.decode(n.slice(0,100)).replace(/\0+$/,""),i=parseInt(r.decode(n.slice(124,136)),8);if(s==".vfs-index.json")return{block:t/512,len:i};t+=512*Math.ceil(i/512)}return null}var Yi=!1,Qi=!1,m;Object.assign(globalThis,{RCall:ue,RCharacter:ce,RComplex:pt,RDataFrame:Ve,RDouble:Je,REnvironment:ne,RInteger:Ht,RList:de,RLogical:ae,RObject:x,RPairlist:$e,RRaw:gt,RString:Ze,RSymbol:j,destroy:vn,getRWorkerClass:qt,initPersistentObjects:Tn,isRObject:Xe,keep:Ke,objs:W,purge:Sn,shelters:ke});var eo=function(e){if(!(!e||!e.type)){if(e.type==="init"){if(Yi)throw new Error("Can't initialise worker multiple times.");let r=e;m=Es(r),r.data.config.channelType=r.data.channelType,ad(r.data.config),Yi=!0;return}m==null||m.resolveRequest(e)}};V?(require("worker_threads").parentPort.on("message",eo),globalThis.XMLHttpRequest=Ki().XMLHttpRequest):globalThis.onmessage=e=>eo(e.data);var Y;function ed(e){switch(e.type){case"request":{let r=e,t=r.data.msg,n=(a,s)=>m==null?void 0:m.write(Jn(r.data.uuid,{type:"payload",data:a},s));try{switch(t.type){case"analyzePath":{let a=t,s=c.FS.analyzePath(a.data.path,a.data.dontResolveLastLink),i={isRoot:s.isRoot,exists:s.exists,error:s.error,name:s.name,path:s.path,parentExists:s.parentExists,parentPath:s.parentPath,object:s.exists?Ut(s.object):void 0,parentObject:s.parentExists?Ut(s.parentObject):void 0};n({obj:i,payloadType:"raw"});break}case"lookupPath":{let a=t,s=c.FS.lookupPath(a.data.path,{}).node;n({obj:Ut(s),payloadType:"raw"});break}case"mkdir":{let a=t;n({obj:Ut(c.FS.mkdir(a.data.path)),payloadType:"raw"});break}case"mount":{let a=t,s=a.data.type,i=a.data.mountpoint;if(s==="IDBFS"&&Y.channelType==xt.SharedArrayBuffer)throw new Error("The `IDBFS` filesystem type is not supported under the `SharedArrayBuffer` communication channel. The `PostMessage` communication channel must be used.");if(s==="DRIVEFS"){let o=a.data.options;Oa(i,o)}else{let o=c.FS.filesystems[s];c.FS.mount(o,a.data.options,i)}n({obj:null,payloadType:"raw"});break}case"syncfs":{let a=t;c.FS.syncfs(a.data.populate,s=>{if(s)throw new Error(`Emscripten \`syncfs\` error: "${s}".`);n({obj:null,payloadType:"raw"})});break}case"readFile":{let s=t.data,i={obj:c.FS.readFile(s.path,{encoding:"binary",flags:s.flags}),payloadType:"raw"};n(i,[i.obj.buffer]);break}case"rename":{let a=t;n({obj:c.FS.rename(a.data.oldpath,a.data.newpath),payloadType:"raw"});break}case"rmdir":{let a=t;n({obj:c.FS.rmdir(a.data.path),payloadType:"raw"});break}case"writeFile":{let s=t.data,i=Uint8Array.from(Object.values(s.data));n({obj:c.FS.writeFile(s.path,i,{flags:s.flags}),payloadType:"raw"});break}case"unlink":{let a=t;n({obj:c.FS.unlink(a.data.path),payloadType:"raw"});break}case"unmount":{let a=t;n({obj:c.FS.unmount(a.data.path),payloadType:"raw"});break}case"newShelter":{let a=He();ke.set(a,[]),n({payloadType:"raw",obj:a});break}case"shelterSize":{let a=t,s=ke.get(a.data).length;n({payloadType:"raw",obj:s});break}case"shelterPurge":{Sn(t.data),n({payloadType:"raw",obj:null});break}case"shelterDestroy":{let a=t;vn(a.data.id,a.data.obj.obj.ptr),n({payloadType:"raw",obj:null});break}case"captureR":{let s=t.data,i=s.shelter,o={n:0};try{let d=Ia(s.code,s.options);O(d.result,o),O(d.output,o);let l=d.result;Ke(i,l);let u=d.output.length,b=[];for(let f=1;f<u+1;++f){let y=d.output.get(f),v=y.pluck(1,1).toString(),R=y.get(2);if(v==="stdout"||v==="stderr"){let w=R.toString();b.push({type:v,data:w})}else{Ke(i,R);let w={obj:{ptr:R.ptr,type:R.type(),methods:x.getMethods(R)},payloadType:"ptr"};b.push({type:v,data:w})}}let g={payloadType:"ptr",obj:{ptr:l.ptr,type:l.type(),methods:x.getMethods(l)}};n({payloadType:"raw",obj:{result:g,output:b,images:d.images}})}finally{F(o.n)}break}case"evalR":{let a=t,s=Rr(a.data.code,a.data.options);Ke(a.data.shelter,s),n({obj:{type:s.type(),ptr:s.ptr,methods:x.getMethods(s)},payloadType:"ptr"});break}case"evalRRaw":{let a=t,s=Rr(a.data.code,a.data.options);ze(s);let i=()=>{throw new Error(`Can't convert object of type ${s.type()} to ${a.data.outputType}.`)};try{let o;switch(a.data.outputType){case"void":break;case"boolean":switch(s.type()){case"logical":o=s.toBoolean();break;default:i()}break;case"boolean[]":switch(s.type()){case"logical":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"number":switch(s.type()){case"logical":o=s.toBoolean(),o=Number(o);break;case"integer":o=s.toNumber();break;case"double":o=s.toNumber();break;default:i()}break;case"number[]":switch(s.type()){case"logical":o=s.toArray(),o=o.map(d=>d===null?i():Number(d));break;case"integer":o=s.toArray(),o.some(d=>d===null)&&i();break;case"double":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;case"string":switch(s.type()){case"character":o=s.toString();break;default:i()}break;case"string[]":switch(s.type()){case"character":o=s.toArray(),o.some(d=>d===null)&&i();break;default:i()}break;default:throw new Error("Unexpected output type in `evalRRaw().")}n({obj:o,payloadType:"raw"});break}finally{F(1)}}case"newRObject":{let a=t,s=rd(a.data.args,a.data.objType);Ke(a.data.shelter,s.obj.ptr),n(s);break}case"callRObjectMethod":{let s=t.data,i=s.payload?x.wrap(s.payload.obj.ptr):x,o=nd(i,s.prop,s.args);Gt(o)&&Ke(s.shelter,o.obj.ptr),n(o);break}case"invokeWasmFunction":{let a=t,s=c.getWasmTableEntry(a.data.ptr)(...a.data.args);n({payloadType:"raw",obj:s});break}case"installPackages":{let a=t,s=a.data.name,i=a.data.options.repos?a.data.options.repos:Y.repoUrl;typeof s=="string"&&(s=[s]),typeof i=="string"&&(i=[i]),Rr(`webr::install(
              c(${s.map(o=>'"'+o+'"').join(",")}),
              repos = c(${i.map(o=>'"'+o+'"').join(",")}),
              quiet = ${a.data.options.quiet?"TRUE":"FALSE"},
              mount = ${a.data.options.mount?"TRUE":"FALSE"}
            )`),n({obj:!0,payloadType:"raw"});break}default:throw new Error("Unknown event `"+t.type+"`")}}catch(a){let s=a,i={name:s.name,message:s.message,errno:s.errno,stack:s.stack};n({payloadType:"err",obj:i}),s instanceof ut&&(c._R_ContinueUnwind(s.cont),Wr())}break}default:throw new Error("Unknown event `"+e.type+"`")}}function Ut(e){let r={id:e.id,name:e.name,mode:e.mode,isFolder:e.isFolder,mounted:null,contents:{}};return e.isFolder&&e.contents&&(r.contents=Object.fromEntries(Object.entries(e.contents).map(([t,n])=>[t,Ut(n)]))),e.mounted!==null&&(r.mounted={mountpoint:e.mounted.mountpoint,root:Ut(e.mounted.root)}),r}function td(e,r=[]){let t=new XMLHttpRequest;t.open("GET",e,!1),t.responseType="arraybuffer";try{r.forEach(n=>{let a=n.split(": ");t.setRequestHeader(a[0],a[1])})}catch{let n="An error occurred setting headers in XMLHttpRequest";return console.error(n),{status:400,response:n}}try{t.send(null);let n=V?JSON.parse(String(t.status)).data.statusCode:t.status;if(n>=200&&n<300)return{status:n,response:t.response};{let a=new TextDecoder().decode(t.response);return console.error(`Error fetching ${e} - ${a}`),{status:n,response:a}}}catch{return{status:400,response:"An error occurred in XMLHttpRequest"}}}function rd(e,r){let t=qt(r),n=Ye(e,Gt,s=>x.wrap(s.obj.ptr)),a=new t(...n);return{obj:{type:a.type(),ptr:a.ptr,methods:x.getMethods(a)},payloadType:"ptr"}}function nd(e,r,t){if(!(r in e))throw new ReferenceError(`${r} is not defined`);let n=e[r];if(typeof n!="function")throw Error("Requested property cannot be invoked");let a=n.apply(e,t.map(i=>i.payloadType==="ptr"?x.wrap(i.obj.ptr):Ye(i.obj,Gt,o=>x.wrap(o.obj.ptr))));return{obj:Ye(a,Xe,i=>({obj:{type:i.type(),ptr:i.ptr,methods:x.getMethods(i)},payloadType:"ptr"})),payloadType:"raw"}}function Ia(e,r={}){var s;let t=Object.assign({env:W.globalEnv,captureStreams:!0,captureConditions:!0,captureGraphics:typeof OffscreenCanvas<"u",withAutoprint:!1,throwJsException:!0,withHandlers:!0},Ye(r,Gt,i=>x.wrap(i.obj.ptr))),n={n:0},a=new ne({});O(a,n),c.setValue(c._R_Interactive,0,"i8");try{let i=new ne(t.env);if(O(i,n),i.type()!=="environment")throw new Error("Attempted to evaluate R code with invalid environment object");if(t.captureGraphics){if(typeof OffscreenCanvas>"u")throw new Error("This environment does not have support for OffscreenCanvas. Consider disabling plot capture using `captureGraphics: false`.");a.bind("canvas_options",new de(Object.assign({capture:!0},t.captureGraphics))),be(`{
        old_dev <- dev.cur()
        do.call(webr::canvas, canvas_options)
        new_dev <- dev.cur()
        old_cache <- webr::canvas_cache()
        plots <- numeric()
      }`,a)}let o=W.true.ptr,d=W.false.ptr,l=be("webr::eval_r",W.baseEnv),u=be("quote",W.baseEnv);O(l,n),O(u,n);let b=new x(e);O(b,n);let g=c._Rf_lang6(l.ptr,c._Rf_lang2(u.ptr,b.ptr),t.captureConditions?o:d,t.captureStreams?o:d,t.withAutoprint?o:d,t.withHandlers?o:d);O(g,n);let f=de.wrap(je(g,i));if(O(f,n),t.captureConditions&&t.throwJsException){let R=f.get("output").toArray().find(w=>w.get("type").toString()==="error");if(R){let w=R.pluck("data","call"),S=w&&w.type()==="call"?`\`${w.deparse()}\``:"unknown source",p=((s=R.pluck("data","message"))==null?void 0:s.toString())||"An error occurred evaluating R code.";throw new Error(`Error in ${S}: ${p}`)}}let y=[];if(t.captureGraphics){let v=be(`{
        new_cache <- webr::canvas_cache()
        plots <- setdiff(new_cache, old_cache)
      }`,a);O(v,n),y=v.toArray().map(R=>c.webr.canvas[R].offscreen.transferToImageBitmap())}return{result:f.get("result"),output:f.get("output"),images:y}}finally{c.setValue(c._R_Interactive,Y.interactive?1:0,"i8");let i=a.get("new_dev");t.captureGraphics&&i.type()!=="null"&&be(`{
        dev.off(new_dev)
        dev.set(old_dev)
        webr::canvas_destroy(plots)
      }`,a),F(n.n)}}function Rr(e,r={}){var a,s;r=Object.assign({captureGraphics:!1},r);let t={n:0},n=Ia(e,r);try{O(n.output,t),O(n.result,t);for(let i=1;i<=n.output.length;i++){let o=n.output.get(i),d=o.get("type").toString();switch(d){case"stdout":m==null||m.writeSystem({type:"console.log",data:o.get("data").toString()});break;case"stderr":m==null||m.writeSystem({type:"console.warn",data:o.get("data").toString()});break;case"message":m==null||m.writeSystem({type:"console.warn",data:((a=o.pluck("data","message"))==null?void 0:a.toString())||""});break;case"warning":m==null||m.writeSystem({type:"console.warn",data:`Warning message: 
${((s=o.pluck("data","message"))==null?void 0:s.toString())||""}`});break;default:m==null||m.writeSystem({type:"console.warn",data:`Output of type ${d}:`}),m==null||m.writeSystem({type:"console.warn",data:o.get("data").toJs()});break}}return n.result}finally{F(t.n)}}function ad(e){Y=e;let r={...e.REnv};if(!r.TZ){let t=new Intl.DateTimeFormat;r.TZ=t.resolvedOptions().timeZone}c.preRun=[],c.arguments=Y.RArgs,c.noExitRuntime=!0,c.noImageDecoding=!0,c.noAudioDecoding=!0,c.noInitialRun=!0,c.noWasmDecoding=!0,c.preRun.push(()=>{V&&(globalThis.FS=c.FS,globalThis.chan=m),Y.createLazyFilesystem&&c.createLazyFilesystem(),c.FS.mkdirTree(Y.homedir),c.ENV.HOME=Y.homedir,c.FS.chdir(Y.homedir),c.ENV=Object.assign(c.ENV,r),c.FS._mount=c.FS.mount,c.FS.mount=$i}),m==null||m.setDispatchHandler(ed),c.onRuntimeInitialized=()=>{m==null||m.run(Y.RArgs)},c.webr={UnwindProtectException:ut,evalR:Rr,captureR:Ia,channel:m,canvas:{},resolveInit:()=>{Tn(),m==null||m.setInterrupt(c._Rf_onintr),c.setValue(c._R_Interactive,Y.interactive?1:0,"i8"),Rr(`options(webr_pkg_repos="${Y.repoUrl}")`),m==null||m.resolve(),Qi=!0},setPrompt:t=>{m==null||m.write({type:"prompt",data:t})},readConsole:()=>{if(!m)throw new Error("Can't read console input without a communication channel");return Qi||c.webr.resolveInit(),m.inputOrDispatch()},handleEvents:()=>{m==null||m.handleEvents()},dataViewer:(t,n)=>{let a=de.wrap(t).toObject({depth:0});m==null||m.write({type:"view",data:{data:a,title:n}})},evalJs:(t,n=!1)=>{try{let a=null;if(n){let s=m==null?void 0:m.syncRequest({type:"eval-await",data:c.UTF8ToString(t)});if(s){if(s.data.error)throw new Error(s==null?void 0:s.data.error);a=s==null?void 0:s.data.result}else throw new Error("Empty sync response for `evalJs`.")}else a=(0,eval)(c.UTF8ToString(t));return new x(a).ptr}catch(a){if(a instanceof ut)c._R_ContinueUnwind(a.cont),Wr();else if(a===1/0)throw a;let s=c.allocateUTF8OnStack(`An error occurred during JavaScript evaluation:
  ${a.message}`);c._Rf_error(s)}return Wr(),0},setTimeoutWasm:(t,n,...a)=>{m==null||m.writeSystem({type:"setTimeoutWasm",data:{ptr:t,delay:n,args:a}})}},c.locateFile=t=>Y.baseUrl+t,c.downloadFileContent=td,c.mountImageUrl=Vi,c.mountImagePath=Zi,c.mountDriveFS=Oa,c.print=t=>{m==null||m.write({type:"stdout",data:t})},c.printErr=t=>{m==null||m.write({type:"stderr",data:t})},globalThis.Module=c,m!=null&&m.WebSocketProxy&&(globalThis.WebSocket=m.WebSocketProxy),setTimeout(()=>{let t=`${Y.baseUrl}R.js`;Bt(t)})}
/*! Bundled license information:

xmlhttprequest-ssl/lib/XMLHttpRequest.js:
  (**
   * Wrapper for built-in http.js to emulate the browser XMLHttpRequest object.
   *
   * This can be used with JS designed for browsers to improve reuse of code and
   * allow the use of existing libraries.
   *
   * Usage: include("XMLHttpRequest.js") and use XMLHttpRequest per W3C specs.
   *
   * @author Dan DeFelippi <dan@driverdan.com>
   * @contributor David Ellis <d.f.ellis@ieee.org>
   * @license MIT
   *)

pako/dist/pako.esm.mjs:
  (*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) *)
*/
//# sourceMappingURL=webr-worker.js.map
