{
  "hash": "efed71ca0e09d186dae3c04f64132526",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Moving My Website to Quarto\"\nauthor: \"Jihong Zhang\"\ndate: \"06/25/2023\"\ndate-modified: \"2025-03-12\"\ndraft: false\ncategories:\n  - quarto\nformat:\n  html:\n    toc: true\n    toc-expand: 2 # expand to level 2\n    code-fold: false # hide code by default\n    code-overflow: wrap\n---\n\n\n\n::: objectives\n## Overview {.unnumbered}\n\nSince June 25, 2023, I start to move my website from hugo/rmarkdown/blogdown/wowchemy to quarto website. It is difficult to explain why I spend so much time on that. Perhaps because some reasons same as other bloggers: 1. Quarto is the next generation of rmarkdown. 2. Quarto is independent with R or Rstudio. 3. Quarto has a clean file tree for website building. 4. Quarto has cleaner command than hugo (i.e., `quarto publish netlify` for publishing website etc.).\n\nThis blog serves as a note how I customize quarto website bit by bit. It will not be a comprehensive tutorial (much online resources exists) but contain be some tricks.\n:::\n\n## Useful links {#useful-links}\n\n1.  Quarto official documentation is always the best place to starts with.\n\n[![](quarto.png){fig-align=\"center\"}](https://quarto.org)\n\n2.  Nicola Rennie's blog is very inspiring. Nice font setting and background. I feel like [Hugo Apéro](https://github.com/hugo-apero/) is the best hugo theme in the market.\n\n    [![](nrennie.png){width=\"320\" height=\"200\"}](https://nrennie.rbind.io)\n\n3.  Yihui's blog. As the creator of blogdown, Yihui talked about why not transfer to Quarto :P I am a old player of hugo/blogdown, but I am not good at customizing the website from the scratch. Thus, quarto suits my needs very well. For those who is very experienced at JS, hugo is still a better choice.\n\n    [![](yihui.png){width=\"320\" height=\"200\"}](https://yihui.org/en/2022/04/quarto-r-markdown/#should-you-switch)\n\n4.  Frank Harrel's blog: R workflow.\n\n    [![](FrankHarrel.png){width=\"320\" height=\"200\"}](https://www.fharrell.com/post/rflow/)\n\n5.  Silvia Canelón's blog: Hello Quarto: Porting my Website from Hugo Apéro\n\n    [![](Silvia.png){width=\"320\" height=\"200\"}](https://silviacanelon.com/blog/2023-09-29-hello-quarto/)\n\n## Tricks of Quarto\n\n### Code highlighting\n\nThe very first trick is using `format > html > code-fold: true` settings in YAML metadata in *\\_quarto.yml* (global) or *.qmd* (local) to hide the code block as `|> Code`, like:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(kableExtra)\nkbl(head(iris)) |> \n  kable_styling(\n    html_font = \"Ysabeau Office\",\n    font_size = 11, full_width = TRUE)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"font-size: 11px; font-family: Ysabeau Office; margin-left: auto; margin-right: auto;\">\n <thead>\n  <tr>\n   <th style=\"text-align:right;\"> Sepal.Length </th>\n   <th style=\"text-align:right;\"> Sepal.Width </th>\n   <th style=\"text-align:right;\"> Petal.Length </th>\n   <th style=\"text-align:right;\"> Petal.Width </th>\n   <th style=\"text-align:left;\"> Species </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:right;\"> 5.1 </td>\n   <td style=\"text-align:right;\"> 3.5 </td>\n   <td style=\"text-align:right;\"> 1.4 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4.9 </td>\n   <td style=\"text-align:right;\"> 3.0 </td>\n   <td style=\"text-align:right;\"> 1.4 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4.7 </td>\n   <td style=\"text-align:right;\"> 3.2 </td>\n   <td style=\"text-align:right;\"> 1.3 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 4.6 </td>\n   <td style=\"text-align:right;\"> 3.1 </td>\n   <td style=\"text-align:right;\"> 1.5 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5.0 </td>\n   <td style=\"text-align:right;\"> 3.6 </td>\n   <td style=\"text-align:right;\"> 1.4 </td>\n   <td style=\"text-align:right;\"> 0.2 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:right;\"> 5.4 </td>\n   <td style=\"text-align:right;\"> 3.9 </td>\n   <td style=\"text-align:right;\"> 1.7 </td>\n   <td style=\"text-align:right;\"> 0.4 </td>\n   <td style=\"text-align:left;\"> setosa </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\nNote that the code block can be numbered and added with a left border using `code-block-bg: true` and `code-block-border-left: \"#31BAE9\"`\n\nCode block now also can be shown with language `#| echo: fenced`. As the code chunk shown below, `{r}` is explicitly presented. I don't hate `#|` as the new way of chuck option setup but when I test the code chuck, I found there is a space between `#|` and option keys. For example, it should be `#| echo: fenced` rather than `#|echo:fenced`. Otherwise, quarto will ignore chunk options.\n\n\n\n::: {.cell}\n\n````{.cell-code  code-fold=\"false\"}\n```{{r}}\n#| eval: false\n#| code-fold: false\nkableExtra::kbl(head(iris)) |> \n  kableExtra::kable_styling(\n    html_font = \"Ysabeau Office\",\n    bootstrap_options = c('striped', 'hover'),\n    font_size = 10, full_width = TRUE)\n```\n````\n:::\n\n::: {.cell}\n\n````{.cell-code  code-fold=\"show\"}\n```{{python}}\n#| eval: false\n#| code-fold: show\nimport numpy as np\niris = np.array(iris)\n```\n````\n:::\n\n\n\n### Visual model\n\nVisual model is one of the most appealing feature for Quarto but I am far from a expert in that. It looks like a visual model version of markdown editor (so called WYSIWYM editing, What you see is What you mean) but slightly different. The shortcut of switching between source and visual model is `Cmd` + `Shift` + `F4` (Thanks to Yihui's [JS](https://yihui.org/en/2023/02/key-buttons/) for pretty keyboard styling).\n\n::: callout-note {#keyborad}\n## Keyboard Shortcut \n\nYou can use Shortcodes [keyboard shortcuts](https://quarto.org/docs/authoring/markdown-basics.html#keyboard-shortcuts) to display keyboard keys. For example, insert `{{{< kbd K >}}}` into Quarto documents displays {{< kbd K >}}. `{{{< kbd Shift-Ctrl-P >}}}` display {{< kbd Shift-Ctrl-P >}} after rendering.\n:::\n\nI list some most frequently used keyboard for visual mode editing:\n\n(a) Insert Hyperlink: `Cmd` + <kbd>K</kbd>\n\n(b) Add footnote[^1]: `Shift`+`Cmd`+`F7`\n\n(c) Insert picture: `Shift` +`Cmd` +<kbd>I</kbd>\n\n(d) Insert code chunk[^2]: `Alt` +`Cmd` +<kbd>I</kbd>\n\n(e) Edit attribute[^3]: `F4`\n\n[^1]: Like this.\n\n[^2]: By default, it will insert R code chunk. If another language is frequently, use `Tools > Modify keyboard shortcuts > filter 'Insert'`. There should be a place for setting shortcut for other language.\n\n[^3]: Click \\`F4\\` in any place in the div works.\n\nPlease also refer to the [official document](https://quarto.org/docs/visual-editor/vscode/) for more shortcuts and features. One thing I found very interesting is single quote mark `` ` `` . First, I'm not sure how to escape this in visual model. Second, if you close quote before typing content, like \\`\\`, visual mode will escape both quote marks. However, if you type in left quote mark then content and then close quote (i.e., type in\\``something` first, and type closing quote mark), it can quote content correctly.\n\nLast but not least, perhaps just type `/` in rstudio is a better choice as it will pop up a list of elements to choose.\n\n### giscus comments box theme toggle\n\n::: callout-important\nnot work any more for Quarto 1.5.23\n:::\n\ngiscus comments box needs some tweaks to switch light/dark based on the toggle switcher of quarto. Please find [Ella's post](https://ellakaye.co.uk/posts/2022-12-11_welcome-quarto/#giscus-comments-box-lightdark-toggle) and [Ella's giscus issue discussion](https://github.com/giscus/giscus/issues/336#issuecomment-1214401296) and [original Javascript](https://github.com/giscus/giscus/issues/336#issuecomment-1214366281).\n\n\n\n::: {.cell filename='giscus-mode-toggle.html'}\n\n```{.html .cell-code}\n<script>\nfunction getGiscusTheme() {\n  const quartoTheme = localStorage.getItem(\"quarto-color-scheme\");\n  const giscusTheme = quartoTheme === \"alternate\" ? \"dark\" : \"light\";\n  return giscusTheme;\n}\n\nfunction setGiscusTheme() {\n  function sendMessage(message) {\n    const iframe = document.querySelector('iframe.giscus-frame');\n    if (!iframe) return;\n    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');\n  }\n  sendMessage({\n    setConfig: {\n      theme: getGiscusTheme(),\n    },\n  });\n}\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  const giscusAttributes = {\n    \"src\": \"https://giscus.app/client.js\",\n    \"data-repo\": \"[ENTER REPO HERE]\",\n    \"data-repo-id\": \"[ENTER REPO ID HERE]\",\n    \"data-category\": \"[ENTER CATEGORY NAME HERE]\",\n    \"data-category-id\": \"[ENTER CATEGORY ID HERE]\",\n    \"data-mapping\": \"pathname\",\n    \"data-strict\": \"0\",\n    \"data-reactions-enabled\": \"1\",\n    \"data-emit-metadata\": \"0\",\n    \"data-input-position\": \"top\",\n    \"data-theme\": getGiscusTheme(),\n    \"data-lang\": \"en\",\n    \"crossorigin\": \"anonymous\",\n    \"async\": \"\",\n  };\n\n  // Dynamically create script tag\n  const giscusScript = document.createElement(\"script\");\n  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));\n  document.body.appendChild(giscusScript);\n\n  // Update giscus theme when theme switcher is clicked\n  const toggle = document.querySelector('.quarto-color-scheme-toggle');\n  if (toggle) {\n    toggle.addEventListener('click', setGiscusTheme);\n  }\n});\n</script>\n```\n:::\n\n::: {.cell filename='div-giscus.html'}\n\n```{.html .cell-code}\n<div class=\"giscus\">\n```\n:::\n\n\n\n``` yaml\ninclude-in-header: giscus-mode-toggle.html\ninclude-after-body: div-giscus.html\n```\n\n::: callout-note\n## Note\n\nRemember comment out giscus setting in \\_quarto.yml\n\n``` yaml\n#comments:\n#  giscus:\n#    repo: JihongZ/quarto-academic-jihong\n```\n:::\n\n## Collapsing Button\n\nThere is no direct way to display a collapsing button in quarto. I found a way to do that by using bootstrap collapse component. The following code is a simple example of a collapsing button. The button is linked to a collapse component with the id `collapseExample`. When the button is clicked, the collapse component is shown or hidden.\n\nFor more details of bootstrap collapse component, please refer to the [official documentation](https://getbootstrap.com/docs/5.3/components/collapse/).\n\n[Link with href]{.btn .btn-primary role=\"button\" title=\"Here's a tooltip\" data-bs-toggle=\"collapse\" href=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\"}\n\n:::: {#collapseExample .collapse}\n::: {.card .card-body}\n\n\n{{< lipsum 1 >}}\n\n\n\n:::\n::::\n\n``` {.markdown filename=\"example.qmd\"}\n[Link with href]{.btn .btn-primary role=\"button\" title=\"Here's a tooltip\" data-bs-toggle=\"collapse\" href=\"#collapseExample\" aria-expanded=\"false\" aria-controls=\"collapseExample\"}\n\n:::: {#collapseExample .collapse}\n::: {.card .card-body}\n{{< lipsum 1 >}}\n:::\n::::\n```\n\n### Horizontal Collapsing\n\n``` markdown\n[Button with horizontal collapse]{.btn .btn-primary type=\"button\" title=\"Here's a tooltip\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseWidthExample\" href=\"#collapseWidthExample\" aria-expanded=\"false\" aria-controls=\"collapseWidthExample\"}\n\n::::: {style=\"min-height: 120px;\"}\n:::: {#collapseWidthExample .collapse .collapse-horizontal}\n::: {.card .card-body style=\"width: 500px;\"}\n{{< lipsum 1 >}}\n:::\n::::\n:::::\n```\n\n[Button with horizontal collapse]{.btn .btn-primary type=\"button\" title=\"Here's a tooltip\" data-bs-toggle=\"collapse\" href=\"#collapseWidthExample\" aria-expanded=\"false\" aria-controls=\"collapseWidthExample\"}\n\n::::: {style=\"min-height: 120px;\"}\n:::: {#collapseWidthExample .collapse .collapse-horizontal}\n::: {.card .card-body style=\"width: 500px;\"}\n\n\n{{< lipsum 1 >}}\n\n\n\n:::\n::::\n:::::\n\n## Dropdown Menu\n\n\n:::: {.dropdown}\n  [Dropdown button]{.btn .btn-secondary .dropdown-toggle type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\"}\n\n:::: {.dropdown-menu}\n-   [Action]{.dropdown-item}\n-   [Another action]{.dropdown-item}\n-   [Something else here]{.dropdown-item}\n::::\n::::\n\n\n\n```{=html}\n<div class=\"dropdown\">\n  <button class=\"btn btn-secondary dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n    Table of Contents\n  </button>\n  <ul class=\"dropdown-menu\">\n    <li><a class=\"dropdown-item\" href=\"#useful-links\">Useful Link</a></li>\n    <li><a class=\"dropdown-item\" href=\"#keyborad\">Keyboard Shortcut</a></li>\n  </ul>\n</div>\n```\n\n\n\n```` html\n<div class=\"dropdown\">\n  <button class=\"btn btn-secondary dropdown-toggle\" type=\"button\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\n    Table of Contents\n  </button>\n  <ul class=\"dropdown-menu\">\n    <li><a class=\"dropdown-item\" href=\"#useful-links\">Useful Link</a></li>\n    <li><a class=\"dropdown-item\" href=\"#keyborad\">Keyboard Shortcut</a></li>\n  </ul>\n</div>\n````\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}