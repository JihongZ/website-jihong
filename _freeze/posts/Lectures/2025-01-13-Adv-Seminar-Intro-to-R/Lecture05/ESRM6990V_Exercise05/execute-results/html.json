{
  "hash": "e5d1a17bc0912054d8f3960f71e1d8cb",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Exercise 05: Text Data Analysis and Data Summary\"\nsubtitle: \"\"\nauthor: \"Jihong Zhang*, Ph.D\"\ninstitute: | \n  Educational Statistics and Research Methods (ESRM) Program*\n  \n  University of Arkansas\ndate: \"2025-08-18\"\nsidebar: false\nexecute: \n  warning: false\n  message: false\n  eval: false\n  echo: true\nformat: \n  html: \n    page-layout: full\ntoc: true\ntoc-depth: 2\nlightbox: true\ncode-fold: show\n---\n\n\n\n## Objective\n\nUse the `nycflights13` dataset to analyze flight delays and apply key `dplyr` functions.\n\n## Instructions\n\nUsing the `flights` dataset from the `nycflights13` package:\n\n1.  **Filter flights** that departed from JFK in June.\n    -   Hint `origin == \"JFK\"` and `month == 6`\n2.  **Select relevant columns**: `year`, `month`, `day`, `dep_time`, `arr_time`, `carrier`, `flight`, and `dep_delay`.\n3.  **Arrange flights** in descending order of departure delay.\n4.  **Create a new column** called `delay_category`:\n    -   `\"On Time\"` if `dep_delay <= 0`\n    -   `\"Slight Delay\"` if `dep_delay` is between 1 and 30 minutes\n    -   `\"Severe Delay\"` if `dep_delay` is greater than 30 minutes\n5.  **Summarize the average delay** for each airline (`carrier`).\n\n## Questions\n\n1.  What proportion of flights from JFK in June were categorized as \"Severe Delay\"?\n2.  Which carrier had the second longest average departure delay?\n\n::: {.callout-note collapse=true}\n## Answer\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load required packages\nlibrary(nycflights13) # install.packages(\"nycflights13\")\nlibrary(tidyverse)\n\n# Step 1: Filter flights departing from JFK in June\njfk_june_flights <- flights |> \n  filter(origin == \"JFK\", month == 6)\n\n# Step 2: Select relevant columns\njfk_june_flights_selected <- jfk_june_flights |> \n  select(year, month, day, dep_time, arr_time, carrier, flight, dep_delay)\n\n# Step 3: Arrange by departure delay (descending order)\njfk_june_flights_sorted <- jfk_june_flights_selected |> \n  arrange(desc(dep_delay))\n\n# Step 4: Create delay categories\njfk_june_flights_categorized <- jfk_june_flights_sorted |> \n  mutate(\n    delay_category = case_when(\n      dep_delay <= 0 ~ \"On Time\",\n      dep_delay > 0 & dep_delay <= 30 ~ \"Slight Delay\",\n      dep_delay > 30 ~ \"Severe Delay\",\n      is.na(dep_delay) ~ \"Dont Know\" # character type value\n    )\n  )\nmean(jfk_june_flights_categorized$delay_category == \"Severe Delay\") # 20.1%\nmean(c(TRUE, FALSE, FALSE))\n\n# Step 5: Summarize average delay by carrier\navg_delay_by_carrier <- jfk_june_flights_categorized |> \n  group_by(carrier) |> \n  summarize(avg_dep_delay = mean(dep_delay, na.rm = TRUE)) |> \n  arrange(desc(avg_dep_delay))\navg_delay_by_carrier # Q1 Answer: VX carrier: Virgin America.\n\n# Step 6: Visualize the average delay per airline\nggplot(avg_delay_by_carrier, aes(x = fct_reorder(carrier, avg_dep_delay), y = avg_dep_delay)) +\n  geom_col(fill = \"steelblue\") +\n  geom_label(aes(label = round(avg_dep_delay, 1))) +\n  labs(title = \"Average Departure Delay by Carrier (JFK, June)\",\n       x = \"Carrier\", y = \"Avg Departure Delay (min)\") +\n  coord_flip()\n```\n:::\n\n\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}