<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.21">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Jihong">
<meta name="dcterms.date" content="2017-10-19">
<title>Dr. Jihong Zhang â€“ How to use lavaan package to perform Confirmatory Factor Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../icon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script type="text/javascript">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-149871707-1', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script><script src="../../site_libs/kePrint-0.0.1/kePrint.js"></script><link href="../../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
<script src="https://cdn.jsdelivr.net/npm/@xiee/utils/js/key-buttons.min.js" defer=""></script><link href="https://cdn.jsdelivr.net/npm/@xiee/utils/css/key-buttons.min.css" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&amp;display=swap" rel="stylesheet">
<script>window.backupDefine = window.define; window.define = undefined;</script><script src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script><script>document.addEventListener("DOMContentLoaded", function () {
 var mathElements = document.getElementsByClassName("math");
 var macros = [];
 for (var i = 0; i < mathElements.length; i++) {
  var texText = mathElements[i].firstChild;
  if (mathElements[i].tagName == "SPAN") {
   katex.render(texText.data, mathElements[i], {
    displayMode: mathElements[i].classList.contains('display'),
    throwOnError: false,
    macros: macros,
    fleqn: false
   });
}}});
  </script><script>window.define = window.backupDefine; window.backupDefine = undefined;</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>
<meta property="og:title" content="Dr.&nbsp;Jihong Zhang - How to use lavaan package to perform Confirmatory Factor Analysis">
<meta property="og:description" content="Technical and Statistical but Fun">
<meta property="og:site_name" content="Dr. Jihong Zhang">
<meta name="twitter:title" content="Dr.&nbsp;Jihong Zhang - How to use lavaan package to perform Confirmatory Factor Analysis">
<meta name="twitter:description" content="Technical and Statistical but Fun">
<meta name="twitter:creator" content="@jihongzgamma">
<meta name="twitter:card" content="summary">
</head>
<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../../index.html"> <i class="bi bi-bi bi-house" role="img">
</i> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html"> <i class="bi bi-bi bi-pencil-square" role="img">
</i> 
<span class="menu-text">Blog</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../dashboards/template.html"> <i class="bi bi-bi bi-speedometer2" role="img">
</i> 
<span class="menu-text">Dashboard</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../uploads/Curriculum_Vitae.pdf"> <i class="bi bi-bi bi-person" role="img">
</i> 
<span class="menu-text">C.V.</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-more" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-bi bi-three-dots" role="img">
</i> 
 <span class="menu-text">More</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-more">
<li>
    <a class="dropdown-item" href="../../projects.html">
 <span class="dropdown-text">Projects</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../links.html">
 <span class="dropdown-text">About</span></a>
  </li>  
    </ul>
</li>
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">How to use lavaan package to perform Confirmatory Factor Analysis</li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Lecture Slides</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false">
 <span class="menu-text">Posts</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth2 ">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">2024 01 12 Syllabus Adv Multivariate Esrm 6553</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth3 ">
<li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Lecture01</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture01/Lecture01.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 01</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Lecture02</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture02/Lecture02.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 02</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Lecture03</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture03/Lecture03.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 03</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Lecture04</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture04/Lecture04.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 04</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false">
 <span class="menu-text">Lecture05</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture05/Lecture05.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 05</span></a>
  </div>
</li>
      </ul>
</li>
          <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false">
 <span class="menu-text">Lecture06</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth4 ">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../posts/2024-01-12-syllabus-adv-multivariate-esrm-6553/Lecture06/Lecture06.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 06</span></a>
  </div>
</li>
      </ul>
</li>
      </ul>
</li>
      </ul>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">On this page</h2>
   
  <ul>
<li>
<a href="#background" id="toc-background" class="nav-link active" data-scroll-target="#background"><span class="header-section-number">1</span> Background</a>
  <ul class="collapse">
<li><a href="#cfa-on-attitude-towards-inclusive-education-survey-n-507" id="toc-cfa-on-attitude-towards-inclusive-education-survey-n-507" class="nav-link" data-scroll-target="#cfa-on-attitude-towards-inclusive-education-survey-n-507"><span class="header-section-number">1.1</span> CFA on Attitude towards Inclusive Education Survey (N = 507)</a></li>
  </ul>
</li>
  <li>
<a href="#descriptive-statistics" id="toc-descriptive-statistics" class="nav-link" data-scroll-target="#descriptive-statistics"><span class="header-section-number">2</span> Descriptive Statistics</a>
  <ul class="collapse">
<li><a href="#sample-correlation-matrix" id="toc-sample-correlation-matrix" class="nav-link" data-scroll-target="#sample-correlation-matrix"><span class="header-section-number">2.1</span> Sample Correlation Matrix</a></li>
  <li><a href="#sample-mean-and-variance" id="toc-sample-mean-and-variance" class="nav-link" data-scroll-target="#sample-mean-and-variance"><span class="header-section-number">2.2</span> Sample Mean and Variance</a></li>
  <li><a href="#sample-item-response-distributions" id="toc-sample-item-response-distributions" class="nav-link" data-scroll-target="#sample-item-response-distributions"><span class="header-section-number">2.3</span> Sample Item Response Distributions</a></li>
  </ul>
</li>
  <li>
<a href="#estimation-with-cfa" id="toc-estimation-with-cfa" class="nav-link" data-scroll-target="#estimation-with-cfa"><span class="header-section-number">3</span> Estimation with CFA</a>
  <ul class="collapse">
<li><a href="#one-factor-model" id="toc-one-factor-model" class="nav-link" data-scroll-target="#one-factor-model"><span class="header-section-number">3.1</span> One-factor Model</a></li>
  <li><a href="#local-misfit-for-one-factor-model" id="toc-local-misfit-for-one-factor-model" class="nav-link" data-scroll-target="#local-misfit-for-one-factor-model"><span class="header-section-number">3.2</span> Local Misfit for One-factor Model</a></li>
  <li><a href="#two-factor-model" id="toc-two-factor-model" class="nav-link" data-scroll-target="#two-factor-model"><span class="header-section-number">3.3</span> Two-factor Model</a></li>
  <li><a href="#local-misfit-for-two-factor-model" id="toc-local-misfit-for-two-factor-model" class="nav-link" data-scroll-target="#local-misfit-for-two-factor-model"><span class="header-section-number">3.4</span> Local Misfit for two-factor model</a></li>
  </ul>
</li>
  <li><a href="#path-diagram" id="toc-path-diagram" class="nav-link" data-scroll-target="#path-diagram"><span class="header-section-number">4</span> Path Diagram</a></li>
  <li><a href="#reliability-in-factor-analysis" id="toc-reliability-in-factor-analysis" class="nav-link" data-scroll-target="#reliability-in-factor-analysis"><span class="header-section-number">5</span> Reliability in Factor Analysis</a></li>
  <li><a href="#factor-scores-and-distributions" id="toc-factor-scores-and-distributions" class="nav-link" data-scroll-target="#factor-scores-and-distributions"><span class="header-section-number">6</span> Factor Scores and Distributions</a></li>
  <li>
<a href="#figures" id="toc-figures" class="nav-link" data-scroll-target="#figures"><span class="header-section-number">7</span> Figures</a>
  <ul class="collapse">
<li><a href="#figure-1-factor-score-distribution" id="toc-figure-1-factor-score-distribution" class="nav-link" data-scroll-target="#figure-1-factor-score-distribution"><span class="header-section-number">7.1</span> Figure 1 : Factor Score Distribution</a></li>
  <li><a href="#figure-2-expected-item-response-plots" id="toc-figure-2-expected-item-response-plots" class="nav-link" data-scroll-target="#figure-2-expected-item-response-plots"><span class="header-section-number">7.2</span> Figure 2 : Expected Item Response Plots</a></li>
  </ul>
</li>
  <li>
<a href="#tables" id="toc-tables" class="nav-link" data-scroll-target="#tables"><span class="header-section-number">8</span> Tables</a>
  <ul class="collapse">
<li><a href="#table-1-model-fit-statistics-using-mlr" id="toc-table-1-model-fit-statistics-using-mlr" class="nav-link" data-scroll-target="#table-1-model-fit-statistics-using-mlr"><span class="header-section-number">8.1</span> Table 1: Model Fit Statistics Using MLR</a></li>
  <li><a href="#table-2-model-comparisons" id="toc-table-2-model-comparisons" class="nav-link" data-scroll-target="#table-2-model-comparisons"><span class="header-section-number">8.2</span> Table 2: Model Comparisons</a></li>
  <li><a href="#table-3-model-estimates" id="toc-table-3-model-estimates" class="nav-link" data-scroll-target="#table-3-model-estimates"><span class="header-section-number">8.3</span> Table 3: Model Estimates</a></li>
  </ul>
</li>
  </ul></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">How to use lavaan package to perform Confirmatory Factor Analysis</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Manual</div>
    <div class="quarto-category">R</div>
    <div class="quarto-category">Lavaan</div>
  </div>
  </div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jihong </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 19, 2017</p>
    </div>
  </div>
  
    
  </div>
  


</header><blockquote class="blockquote">
<p>This is one of my homework in Structural Equation Modeling in Fall 2017. Dr.&nbsp;Templin provided a excelent example showing how to perform Confirmatory Factor Analysis (CFA) using <code>Lavaan</code> Package. I elaborated each step as following.</p>
</blockquote>
<!--more-->
<ul>
<li>First, load packages needed: If you donâ€™t have the packages installed below, please use <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code> to install them.</li>
</ul>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'dplyr' was built under R version 4.2.3</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'stringr' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lavaan.ugent.be">lavaan</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'lavaan' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#library(semPlot)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://personality-project.org/r/psych/">psych</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: package 'psych' was built under R version 4.2.3</code></pre>
</div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://yihui.org/knitr/">knitr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/">kableExtra</a></span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="background" class="level2" data-number="1"><h2 data-number="1" class="anchored" data-anchor-id="background">
<span class="header-section-number">1</span> Background</h2>
<section id="cfa-on-attitude-towards-inclusive-education-survey-n-507" class="level3" data-number="1.1"><h3 data-number="1.1" class="anchored" data-anchor-id="cfa-on-attitude-towards-inclusive-education-survey-n-507">
<span class="header-section-number">1.1</span> CFA on Attitude towards Inclusive Education Survey (N = 507)</h3>
<p>The affective dimension of attitudes subscale includes 6 items on a 6-point likert scale (1 = Strongly Agree, 6 = Strongly Disagree), measuring teachersâ€™ feelings and emotions associated with inclusive education:</p>
<ol type="1">
<li>I get frustrated when I have difficulty communicating with students with a disability.</li>
<li>I get upset when students with a disability cannot keep up with the day-to-day curriculum in my classroom.</li>
<li>I get irritated when I am unable to understand students with a disability.</li>
<li>I am uncomfortable including students with a disability in a regular classroom with other students without a disability.</li>
<li>I am disconcerted that students with a disability are included in the regular classroom, regardless of the severity of the disability.</li>
<li>I get frustrated when I have to adapt the curriculum to meet the individual needs of all students.</li>
</ol>
<p>The sample size (<strong>N</strong>) is 507, which includes 6 males and 501 females. I used one-factor model as first step. All items are loaded on one general factor - affective attitude towards inclusive education. Higher response score means more positive attitude towards inclusive education.</p>
<div class="cell">
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html">read.csv</a></span><span class="op">(</span><span class="st">"AttitudeForInclusiveEducation.csv"</span><span class="op">)</span></span>
<span><span class="co"># head(dat)</span></span>
<span><span class="va">dat2</span> <span class="op">&lt;-</span> <span class="va">dat</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">X</span>,<span class="va">Aff.1</span><span class="op">:</span><span class="va">Aff.6</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"PersonID"</span>, <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Aff"</span>,<span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section><section id="descriptive-statistics" class="level2" data-number="2"><h2 data-number="2" class="anchored" data-anchor-id="descriptive-statistics">
<span class="header-section-number">2</span> Descriptive Statistics</h2>
<p>The descriptive statistics for all items are provided below. It appears that item 4 is the least difficult item as it has the highest mean (<span class="math inline">\mu = 4.189, sd = 1.317</span>); item 5 is the most difficult item as it has lowest mean score (<span class="math inline">\mu = 3.604, sd = 1.423</span>). All responses for each item range from 1 to 6 (1 = Strongly agree, 6 = Strongly disagree). Thus, all categories are responded. In term of item discrimination, as item 3 has the largest standard deviation (<span class="math inline">sd = 1.364</span>) and item 6 has the smallest, item 3 has highest discrimination whearas item 6 has lowest in CTT.</p>
<div>
<table data-quarto-postprocess="true" class="table">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">vars</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">median</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">trimmed</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mad</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">min</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">max</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">range</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">skew</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">kurtosis</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">se</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">PersonID</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">254.000</td>
<td style="text-align: right;">146.503</td>
<td style="text-align: right;">254</td>
<td style="text-align: right;">254.000</td>
<td style="text-align: right;">188.290</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">506</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-1.207</td>
<td style="text-align: right;">6.506</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">3.765</td>
<td style="text-align: right;">1.337</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3.779</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">-0.131</td>
<td style="text-align: right;">-0.927</td>
<td style="text-align: right;">0.059</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">3.635</td>
<td style="text-align: right;">1.335</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3.636</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">-0.026</td>
<td style="text-align: right;">-0.963</td>
<td style="text-align: right;">0.059</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">3.493</td>
<td style="text-align: right;">1.364</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">3.472</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.124</td>
<td style="text-align: right;">-0.969</td>
<td style="text-align: right;">0.061</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">4.189</td>
<td style="text-align: right;">1.317</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.287</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">-0.589</td>
<td style="text-align: right;">-0.327</td>
<td style="text-align: right;">0.058</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">3.604</td>
<td style="text-align: right;">1.423</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">3.590</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-0.939</td>
<td style="text-align: right;">0.063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">7</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">4.018</td>
<td style="text-align: right;">1.313</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">4.061</td>
<td style="text-align: right;">1.483</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">-0.356</td>
<td style="text-align: right;">-0.733</td>
<td style="text-align: right;">0.058</td>
</tr>
</tbody>
</table>
</div>
<p>Item-total correlation table was provided below. All item-total correlation coefficients are higher than 0.7, which suggests good internal consistence. Item 1 has lowest item-total correlation (<span class="math inline">r = 0.733, sd = 1.337</span>).</p>
<div>
<table data-quarto-postprocess="true" class="table">
<caption>Item-total Correlation Table</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">raw.r</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std.r</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">r.cor</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">r.drop</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sd</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.733</td>
<td style="text-align: right;">0.735</td>
<td style="text-align: right;">0.652</td>
<td style="text-align: right;">0.611</td>
<td style="text-align: right;">3.765</td>
<td style="text-align: right;">1.337</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.835</td>
<td style="text-align: right;">0.836</td>
<td style="text-align: right;">0.806</td>
<td style="text-align: right;">0.753</td>
<td style="text-align: right;">3.635</td>
<td style="text-align: right;">1.335</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.813</td>
<td style="text-align: right;">0.812</td>
<td style="text-align: right;">0.771</td>
<td style="text-align: right;">0.718</td>
<td style="text-align: right;">3.493</td>
<td style="text-align: right;">1.364</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.789</td>
<td style="text-align: right;">0.790</td>
<td style="text-align: right;">0.742</td>
<td style="text-align: right;">0.689</td>
<td style="text-align: right;">4.189</td>
<td style="text-align: right;">1.317</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.774</td>
<td style="text-align: right;">0.769</td>
<td style="text-align: right;">0.702</td>
<td style="text-align: right;">0.658</td>
<td style="text-align: right;">3.604</td>
<td style="text-align: right;">1.423</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">507</td>
<td style="text-align: right;">0.836</td>
<td style="text-align: right;">0.838</td>
<td style="text-align: right;">0.805</td>
<td style="text-align: right;">0.755</td>
<td style="text-align: right;">4.018</td>
<td style="text-align: right;">1.313</td>
</tr>
</tbody>
</table>
</div>
<section id="sample-correlation-matrix" class="level3" data-number="2.1"><h3 data-number="2.1" class="anchored" data-anchor-id="sample-correlation-matrix">
<span class="header-section-number">2.1</span> Sample Correlation Matrix</h3>
<p>According to Pearson Correlation Matrix below, we can see all items have fairly high pearson correlation coefficients ranging from 0.44 to 0.72. This provides the evidence of dimensionality. Item 2 and item 3 has highest correlation coefficient(<span class="math inline">r_{23} = 0.717</span>). The lowest correlations lies between item 1 and item 4 as well as item 1 and item 5.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">dat2</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Pearson Correlation Matrix"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Pearson Correlation Matrix</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff4</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff5</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff6</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.590</td>
<td style="text-align: right;">0.525</td>
<td style="text-align: right;">0.448</td>
<td style="text-align: right;">0.411</td>
<td style="text-align: right;">0.538</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">0.590</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.717</td>
<td style="text-align: right;">0.534</td>
<td style="text-align: right;">0.553</td>
<td style="text-align: right;">0.602</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">0.525</td>
<td style="text-align: right;">0.717</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.505</td>
<td style="text-align: right;">0.527</td>
<td style="text-align: right;">0.608</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">0.448</td>
<td style="text-align: right;">0.534</td>
<td style="text-align: right;">0.505</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.609</td>
<td style="text-align: right;">0.682</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">0.411</td>
<td style="text-align: right;">0.553</td>
<td style="text-align: right;">0.527</td>
<td style="text-align: right;">0.609</td>
<td style="text-align: right;">1.000</td>
<td style="text-align: right;">0.577</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">0.538</td>
<td style="text-align: right;">0.602</td>
<td style="text-align: right;">0.608</td>
<td style="text-align: right;">0.682</td>
<td style="text-align: right;">0.577</td>
<td style="text-align: right;">1.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="sample-mean-and-variance" class="level3" data-number="2.2"><h3 data-number="2.2" class="anchored" data-anchor-id="sample-mean-and-variance">
<span class="header-section-number">2.2</span> Sample Mean and Variance</h3>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">means</span> <span class="op">&lt;-</span> <span class="va">dat2</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_all</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/funs.html">funs</a></span><span class="op">(</span><span class="va">mean</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `funs()` was deprecated in dplyr 0.8.0.
â„¹ Please use a list of either functions or lambdas:

# Simple named list: list(mean = mean, median = median)

# Auto named with `tibble::lst()`: tibble::lst(mean, median)

# Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
</div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">sds</span> <span class="op">&lt;-</span> <span class="va">dat2</span><span class="op">[</span>,<span class="fl">2</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html">summarise_all</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/funs.html">funs</a></span><span class="op">(</span><span class="va">sd</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/t.html">t</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: `funs()` was deprecated in dplyr 0.8.0.
â„¹ Please use a list of either functions or lambdas:

# Simple named list: list(mean = mean, median = median)

# Auto named with `tibble::lst()`: tibble::lst(mean, median)

# Using lambdas list(~ mean(., trim = .2), ~ median(., na.rm = TRUE))</code></pre>
</div>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">table1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span><span class="va">means</span>,<span class="va">sds</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">table1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Mean"</span>, <span class="st">"SD"</span><span class="op">)</span></span>
<span><span class="va">table1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Mean    SD
Aff1 3.765 1.337
Aff2 3.635 1.335
Aff3 3.493 1.364
Aff4 4.189 1.317
Aff5 3.604 1.423
Aff6 4.018 1.313</code></pre>
</div>
</div>
</section><section id="sample-item-response-distributions" class="level3" data-number="2.3"><h3 data-number="2.3" class="anchored" data-anchor-id="sample-item-response-distributions">
<span class="header-section-number">2.3</span> Sample Item Response Distributions</h3>
<p>Those items did not exactly match normal distribution but acceptable.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># stack data</span></span>
<span><span class="va">dat2_melted</span> <span class="op">&lt;-</span> <span class="va">dat2</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/gather.html">gather</a></span><span class="op">(</span><span class="va">key</span>, <span class="va">value</span>,<span class="va">Aff1</span><span class="op">:</span><span class="va">Aff6</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">PersonID</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># plot by variable</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">dat2_melted</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>y<span class="op">=</span><span class="va">..density..</span><span class="op">)</span>, colour<span class="op">=</span><span class="st">"black"</span>, fill<span class="op">=</span><span class="st">"white"</span>, binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span>alpha<span class="op">=</span><span class="fl">.2</span>, fill<span class="op">=</span><span class="st">"#FF6666"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span><span class="op">(</span>breaks <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">6</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html">facet_wrap</a></span><span class="op">(</span><span class="op">~</span> <span class="va">key</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<pre><code>Warning: The dot-dot notation (`..density..`) was deprecated in ggplot2 3.4.0.
â„¹ Please use `after_stat(density)` instead.</code></pre>
<p><img src="index_files/figure-html/dist-1.png" class="img-fluid" width="672"></p>
</section></section><section id="estimation-with-cfa" class="level2" data-number="3"><h2 data-number="3" class="anchored" data-anchor-id="estimation-with-cfa">
<span class="header-section-number">3</span> Estimation with CFA</h2>
<section id="one-factor-model" class="level3" data-number="3.1"><h3 data-number="3.1" class="anchored" data-anchor-id="one-factor-model">
<span class="header-section-number">3.1</span> One-factor Model</h3>
<p>One-factor model was conducted as first step. The model has one latent facor - affective attitude and six indicators. In general, one-factor model does not provide great model fit except SRMR. The test statistics for chi-square is 75.835 (<span class="math inline">p &lt; 0.05</span>). CFI is 0.929, which larger than 0.95 suggests good model fit. RMSEA is 0.121, which lower than 0.05 suggest good model fit. SRMR is 0.04, which lower than 0.08. The standardized factor loadings range from 0.66 to 0.8. All factor loadings are significant at the level of alpha equals 0.05.</p>
<div class="cell">
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">model1.syntax</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  AA =~ Aff1 + Aff2 + Aff3 + Aff4 + Aff5 + Aff6</span></span>
<span><span class="st">'</span></span>
<span><span class="va">model1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html">cfa</a></span><span class="op">(</span><span class="va">model1.syntax</span>, data <span class="op">=</span> <span class="va">dat2</span>,std.lv <span class="op">=</span> <span class="cn">TRUE</span>, mimic <span class="op">=</span> <span class="st">"mplus"</span>, estimator <span class="op">=</span> <span class="st">"MLR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model1</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>lavaan 0.6.17 ended normally after 14 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        18

  Number of observations                           507
  Number of missing patterns                         1

Model Test User Model:
                                              Standard      Scaled
  Test Statistic                               115.410      75.834
  Degrees of freedom                                 9           9
  P-value (Chi-square)                           0.000       0.000
  Scaling correction factor                                  1.522
    Yuan-Bentler correction (Mplus variant)                       

Model Test Baseline Model:

  Test statistic                              1573.730     960.267
  Degrees of freedom                                15          15
  P-value                                        0.000       0.000
  Scaling correction factor                                  1.639

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    0.932       0.929
  Tucker-Lewis Index (TLI)                       0.886       0.882
                                                                  
  Robust Comparative Fit Index (CFI)                         0.934
  Robust Tucker-Lewis Index (TLI)                            0.891

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)              -4492.146   -4492.146
  Scaling correction factor                                  1.138
      for the MLR correction                                      
  Loglikelihood unrestricted model (H1)      -4434.440   -4434.440
  Scaling correction factor                                  1.266
      for the MLR correction                                      
                                                                  
  Akaike (AIC)                                9020.291    9020.291
  Bayesian (BIC)                              9096.404    9096.404
  Sample-size adjusted Bayesian (SABIC)       9039.270    9039.270

Root Mean Square Error of Approximation:

  RMSEA                                          0.153       0.121
  90 Percent confidence interval - lower         0.129       0.101
  90 Percent confidence interval - upper         0.178       0.142
  P-value H_0: RMSEA &lt;= 0.050                    0.000       0.000
  P-value H_0: RMSEA &gt;= 0.080                    1.000       1.000
                                                                  
  Robust RMSEA                                               0.149
  90 Percent confidence interval - lower                     0.120
  90 Percent confidence interval - upper                     0.181
  P-value H_0: Robust RMSEA &lt;= 0.050                         0.000
  P-value H_0: Robust RMSEA &gt;= 0.080                         1.000

Standardized Root Mean Square Residual:

  SRMR                                           0.040       0.040

Parameter Estimates:

  Standard errors                             Sandwich
  Information bread                           Observed
  Observed information based on                Hessian

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
  AA =~                                                                 
    Aff1              0.886    0.055   16.183    0.000    0.886    0.663
    Aff2              1.078    0.046   23.284    0.000    1.078    0.808
    Aff3              1.066    0.055   19.499    0.000    1.066    0.783
    Aff4              0.968    0.061   15.934    0.000    0.968    0.736
    Aff5              1.004    0.055   18.291    0.000    1.004    0.706
    Aff6              1.057    0.049   21.644    0.000    1.057    0.805

Intercepts:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
   .Aff1              3.765    0.059   63.455    0.000    3.765    2.818
   .Aff2              3.635    0.059   61.382    0.000    3.635    2.726
   .Aff3              3.493    0.060   57.741    0.000    3.493    2.564
   .Aff4              4.189    0.058   71.689    0.000    4.189    3.184
   .Aff5              3.604    0.063   57.057    0.000    3.604    2.534
   .Aff6              4.018    0.058   68.948    0.000    4.018    3.062

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
   .Aff1              1.000    0.081   12.285    0.000    1.000    0.560
   .Aff2              0.617    0.066    9.283    0.000    0.617    0.347
   .Aff3              0.719    0.089    8.089    0.000    0.719    0.387
   .Aff4              0.794    0.095    8.390    0.000    0.794    0.459
   .Aff5              1.014    0.090   11.226    0.000    1.014    0.501
   .Aff6              0.605    0.068    8.898    0.000    0.605    0.351
    AA                1.000                               1.000    1.000</code></pre>
</div>
</div>
</section><section id="local-misfit-for-one-factor-model" class="level3" data-number="3.2"><h3 data-number="3.2" class="anchored" data-anchor-id="local-misfit-for-one-factor-model">
<span class="header-section-number">3.2</span> Local Misfit for One-factor Model</h3>
<p>By looking into local misfit with residual variance-covariance matrix we can get the clues to improve the model. According to the model residuals, item 4 has relatively high positive residual covariance with item 5 and item 6. It suggests that the one-factor model underestimates the correlations among item 4, item 5 and item 6. In other words, another latent factor may be needed to explain the strong relations among item 4, 5, 6 which cannot be explained by a general Affective attitude factor.</p>
<p>Moreover, modification indices below also suggest that adding the error covariances among item 4, 5 and 6 will improve chi-square much better.</p>
<p>Thus, I decided to add one more factor - AAE. AAE was labeled as affective attitude towards educational environment which indicated by item 4, 5, 6. The other latent factor - AAC which was indicated by item 1, 2, 3 was labeled as Affective Attitude towards communication.</p>
<div class="cell">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html">resid</a></span><span class="op">(</span><span class="va">model1</span><span class="op">)</span><span class="op">$</span><span class="va">cov</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Normalized Residual Variance-Covariance Matrix"</span>,digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Normalized Residual Variance-Covariance Matrix</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff4</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff5</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff6</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.095</td>
<td style="text-align: right;">0.011</td>
<td style="text-align: right;">-0.070</td>
<td style="text-align: right;">-0.109</td>
<td style="text-align: right;">0.006</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">0.095</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">-0.106</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.085</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">0.011</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-0.128</td>
<td style="text-align: right;">-0.051</td>
<td style="text-align: right;">-0.041</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">-0.070</td>
<td style="text-align: right;">-0.106</td>
<td style="text-align: right;">-0.128</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.168</td>
<td style="text-align: right;">0.155</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">-0.109</td>
<td style="text-align: right;">-0.034</td>
<td style="text-align: right;">-0.051</td>
<td style="text-align: right;">0.168</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.015</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">0.006</td>
<td style="text-align: right;">-0.085</td>
<td style="text-align: right;">-0.041</td>
<td style="text-align: right;">0.155</td>
<td style="text-align: right;">0.015</td>
<td style="text-align: right;">0.000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/modificationIndices.html">modificationindices</a></span><span class="op">(</span><span class="va">model1</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span>,sort. <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Modification Indices"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Modification Indices</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">lhs</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">op</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rhs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mi</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">epc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.lv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.all</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.nox</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff2</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">55.906</td>
<td style="text-align: right;">0.319</td>
<td style="text-align: right;">0.319</td>
<td style="text-align: right;">0.479</td>
<td style="text-align: right;">0.479</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">45.674</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: right;">0.279</td>
<td style="text-align: right;">0.403</td>
<td style="text-align: right;">0.403</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff4</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">25.673</td>
<td style="text-align: right;">0.243</td>
<td style="text-align: right;">0.243</td>
<td style="text-align: right;">0.270</td>
<td style="text-align: right;">0.270</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff3</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">24.228</td>
<td style="text-align: right;">-0.214</td>
<td style="text-align: right;">-0.214</td>
<td style="text-align: right;">-0.283</td>
<td style="text-align: right;">-0.283</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff2</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">22.494</td>
<td style="text-align: right;">-0.194</td>
<td style="text-align: right;">-0.194</td>
<td style="text-align: right;">-0.318</td>
<td style="text-align: right;">-0.318</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff2</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">21.303</td>
<td style="text-align: right;">-0.193</td>
<td style="text-align: right;">-0.193</td>
<td style="text-align: right;">-0.276</td>
<td style="text-align: right;">-0.276</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">11.974</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">0.153</td>
<td style="text-align: right;">0.195</td>
<td style="text-align: right;">0.195</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff1</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">7.918</td>
<td style="text-align: right;">-0.145</td>
<td style="text-align: right;">-0.145</td>
<td style="text-align: right;">-0.144</td>
<td style="text-align: right;">-0.144</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">4.309</td>
<td style="text-align: right;">-0.096</td>
<td style="text-align: right;">-0.096</td>
<td style="text-align: right;">-0.108</td>
<td style="text-align: right;">-0.108</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff3</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">4.018</td>
<td style="text-align: right;">-0.084</td>
<td style="text-align: right;">-0.084</td>
<td style="text-align: right;">-0.128</td>
<td style="text-align: right;">-0.128</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="two-factor-model" class="level3" data-number="3.3"><h3 data-number="3.3" class="anchored" data-anchor-id="two-factor-model">
<span class="header-section-number">3.3</span> Two-factor Model</h3>
<p>The neccessity of adding another factor was tested by specifying a two-factor model.</p>
<p>In term of model fit indices, it appears that the global model fit indices are great with two-factor model (CFI = 0.986; RMSEA = 0.058; SRMR = 0.022). Ideally, two latent factors could be labeled as moderately correlated aspects of attitudes towards inclusive education. Thus, the first factor (AAC) could be labeled as how teachers feel about communicating with students with disability. The second (AAE) could be labeled as how teachers feel about evironment of inclusive education. All standardized factor loadings are statistically significant ranging from 0.676 to 0.865. The factor correlation between 2 factors is high (<span class="math inline">r = 0.838,p = 0.00</span>).</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">model2.syntax</span> <span class="op">&lt;-</span> <span class="st">'</span></span>
<span><span class="st">  AAC =~ Aff1 + Aff2 + Aff3</span></span>
<span><span class="st">  AAE =~ Aff4 + Aff5 + Aff6</span></span>
<span><span class="st">'</span></span>
<span><span class="va">model2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/cfa.html">cfa</a></span><span class="op">(</span><span class="va">model2.syntax</span>, data <span class="op">=</span> <span class="va">dat2</span>, std.lv <span class="op">=</span> <span class="cn">TRUE</span>, mimic <span class="op">=</span> <span class="st">"mplus"</span>, estimator <span class="op">=</span> <span class="st">"MLR"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model2</span>, fit.measures <span class="op">=</span> <span class="cn">TRUE</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>lavaan 0.6.17 ended normally after 19 iterations

  Estimator                                         ML
  Optimization method                           NLMINB
  Number of model parameters                        19

  Number of observations                           507
  Number of missing patterns                         1

Model Test User Model:
                                              Standard      Scaled
  Test Statistic                                32.332      21.512
  Degrees of freedom                                 8           8
  P-value (Chi-square)                           0.000       0.006
  Scaling correction factor                                  1.503
    Yuan-Bentler correction (Mplus variant)                       

Model Test Baseline Model:

  Test statistic                              1573.730     960.267
  Degrees of freedom                                15          15
  P-value                                        0.000       0.000
  Scaling correction factor                                  1.639

User Model versus Baseline Model:

  Comparative Fit Index (CFI)                    0.984       0.986
  Tucker-Lewis Index (TLI)                       0.971       0.973
                                                                  
  Robust Comparative Fit Index (CFI)                         0.987
  Robust Tucker-Lewis Index (TLI)                            0.975

Loglikelihood and Information Criteria:

  Loglikelihood user model (H0)              -4450.606   -4450.606
  Scaling correction factor                                  1.166
      for the MLR correction                                      
  Loglikelihood unrestricted model (H1)      -4434.440   -4434.440
  Scaling correction factor                                  1.266
      for the MLR correction                                      
                                                                  
  Akaike (AIC)                                8939.212    8939.212
  Bayesian (BIC)                              9019.554    9019.554
  Sample-size adjusted Bayesian (SABIC)       8959.246    8959.246

Root Mean Square Error of Approximation:

  RMSEA                                          0.077       0.058
  90 Percent confidence interval - lower         0.051       0.034
  90 Percent confidence interval - upper         0.106       0.082
  P-value H_0: RMSEA &lt;= 0.050                    0.046       0.268
  P-value H_0: RMSEA &gt;= 0.080                    0.475       0.068
                                                                  
  Robust RMSEA                                               0.071
  90 Percent confidence interval - lower                     0.036
  90 Percent confidence interval - upper                     0.108
  P-value H_0: Robust RMSEA &lt;= 0.050                         0.148
  P-value H_0: Robust RMSEA &gt;= 0.080                         0.375

Standardized Root Mean Square Residual:

  SRMR                                           0.022       0.022

Parameter Estimates:

  Standard errors                             Sandwich
  Information bread                           Observed
  Observed information based on                Hessian

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
  AAC =~                                                                
    Aff1              0.903    0.055   16.357    0.000    0.903    0.676
    Aff2              1.153    0.042   27.771    0.000    1.153    0.865
    Aff3              1.117    0.051   22.079    0.000    1.117    0.820
  AAE =~                                                                
    Aff4              1.047    0.053   19.604    0.000    1.047    0.796
    Aff5              1.036    0.053   19.366    0.000    1.036    0.728
    Aff6              1.107    0.044   25.112    0.000    1.107    0.844

Covariances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
  AAC ~~                                                                
    AAE               0.838    0.028   29.829    0.000    0.838    0.838

Intercepts:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
   .Aff1              3.765    0.059   63.455    0.000    3.765    2.818
   .Aff2              3.635    0.059   61.382    0.000    3.635    2.726
   .Aff3              3.493    0.060   57.741    0.000    3.493    2.564
   .Aff4              4.189    0.058   71.689    0.000    4.189    3.184
   .Aff5              3.604    0.063   57.057    0.000    3.604    2.534
   .Aff6              4.018    0.058   68.948    0.000    4.018    3.062

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)   Std.lv  Std.all
   .Aff1              0.970    0.083   11.753    0.000    0.970    0.543
   .Aff2              0.449    0.057    7.860    0.000    0.449    0.253
   .Aff3              0.607    0.084    7.244    0.000    0.607    0.327
   .Aff4              0.635    0.085    7.504    0.000    0.635    0.367
   .Aff5              0.950    0.090   10.539    0.000    0.950    0.470
   .Aff6              0.497    0.061    8.191    0.000    0.497    0.288
    AAC               1.000                               1.000    1.000
    AAE               1.000                               1.000    1.000</code></pre>
</div>
</div>
</section><section id="local-misfit-for-two-factor-model" class="level3" data-number="3.4"><h3 data-number="3.4" class="anchored" data-anchor-id="local-misfit-for-two-factor-model">
<span class="header-section-number">3.4</span> Local Misfit for two-factor model</h3>
<p>The local misfit indices for two-factor model also suggest that the model fits data well. The largest normalized residuals is 1.215. Modification indices suggest that add covariance between item 5 and item 6. These local misfit is not theoretically defensible. Thus, the final model is two-factor model.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/stats/residuals.html">resid</a></span><span class="op">(</span><span class="va">model2</span><span class="op">)</span><span class="op">$</span><span class="va">cov</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Normalized Residual Variance-Covariance Matrix"</span>,digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Normalized Residual Variance-Covariance Matrix</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff1</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff2</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff3</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff4</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff5</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Aff6</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.010</td>
<td style="text-align: right;">-0.053</td>
<td style="text-align: right;">-0.005</td>
<td style="text-align: right;">-0.003</td>
<td style="text-align: right;">0.105</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">0.010</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.014</td>
<td style="text-align: right;">-0.075</td>
<td style="text-align: right;">0.048</td>
<td style="text-align: right;">-0.016</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">-0.053</td>
<td style="text-align: right;">0.014</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-0.076</td>
<td style="text-align: right;">0.050</td>
<td style="text-align: right;">0.049</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">-0.005</td>
<td style="text-align: right;">-0.075</td>
<td style="text-align: right;">-0.076</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.019</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">-0.003</td>
<td style="text-align: right;">0.048</td>
<td style="text-align: right;">0.050</td>
<td style="text-align: right;">0.056</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">-0.070</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">0.105</td>
<td style="text-align: right;">-0.016</td>
<td style="text-align: right;">0.049</td>
<td style="text-align: right;">0.019</td>
<td style="text-align: right;">-0.070</td>
<td style="text-align: right;">0.000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/modificationIndices.html">modificationindices</a></span><span class="op">(</span><span class="va">model2</span>, standardized <span class="op">=</span> <span class="cn">TRUE</span>,sort. <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span>caption <span class="op">=</span> <span class="st">"Modification Indices"</span>, digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<table data-quarto-postprocess="true" class="table table-sm table-striped small">
<caption>Modification Indices</caption>
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">lhs</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">op</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">rhs</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mi</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">epc</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.lv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.all</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">sepc.nox</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Aff5</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">16.894</td>
<td style="text-align: right;">-0.224</td>
<td style="text-align: right;">-0.224</td>
<td style="text-align: right;">-0.326</td>
<td style="text-align: right;">-0.326</td>
</tr>
<tr class="even">
<td style="text-align: left;">AAC</td>
<td style="text-align: left;">=~</td>
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">16.893</td>
<td style="text-align: right;">-0.578</td>
<td style="text-align: right;">-0.578</td>
<td style="text-align: right;">-0.439</td>
<td style="text-align: right;">-0.439</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff1</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">7.064</td>
<td style="text-align: right;">0.108</td>
<td style="text-align: right;">0.108</td>
<td style="text-align: right;">0.155</td>
<td style="text-align: right;">0.155</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff4</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff5</td>
<td style="text-align: right;">5.977</td>
<td style="text-align: right;">0.128</td>
<td style="text-align: right;">0.128</td>
<td style="text-align: right;">0.164</td>
<td style="text-align: right;">0.164</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AAC</td>
<td style="text-align: left;">=~</td>
<td style="text-align: left;">Aff6</td>
<td style="text-align: right;">5.976</td>
<td style="text-align: right;">0.368</td>
<td style="text-align: right;">0.368</td>
<td style="text-align: right;">0.280</td>
<td style="text-align: right;">0.280</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff1</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">5.093</td>
<td style="text-align: right;">-0.112</td>
<td style="text-align: right;">-0.112</td>
<td style="text-align: right;">-0.146</td>
<td style="text-align: right;">-0.146</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AAE</td>
<td style="text-align: left;">=~</td>
<td style="text-align: left;">Aff2</td>
<td style="text-align: right;">5.093</td>
<td style="text-align: right;">-0.362</td>
<td style="text-align: right;">-0.362</td>
<td style="text-align: right;">-0.272</td>
<td style="text-align: right;">-0.272</td>
</tr>
<tr class="even">
<td style="text-align: left;">Aff3</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff4</td>
<td style="text-align: right;">4.045</td>
<td style="text-align: right;">-0.077</td>
<td style="text-align: right;">-0.077</td>
<td style="text-align: right;">-0.124</td>
<td style="text-align: right;">-0.124</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Aff2</td>
<td style="text-align: left;">~~</td>
<td style="text-align: left;">Aff3</td>
<td style="text-align: right;">3.160</td>
<td style="text-align: right;">0.119</td>
<td style="text-align: right;">0.119</td>
<td style="text-align: right;">0.228</td>
<td style="text-align: right;">0.228</td>
</tr>
<tr class="even">
<td style="text-align: left;">AAE</td>
<td style="text-align: left;">=~</td>
<td style="text-align: left;">Aff1</td>
<td style="text-align: right;">3.160</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: right;">0.236</td>
<td style="text-align: right;">0.176</td>
<td style="text-align: right;">0.176</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section></section><section id="path-diagram" class="level2" data-number="4"><h2 data-number="4" class="anchored" data-anchor-id="path-diagram">
<span class="header-section-number">4</span> Path Diagram</h2>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#semPlot::semPaths(model2, what = "est")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section><section id="reliability-in-factor-analysis" class="level2" data-number="5"><h2 data-number="5" class="anchored" data-anchor-id="reliability-in-factor-analysis">
<span class="header-section-number">5</span> Reliability in Factor Analysis</h2>
<p>To get the estimates of reliabilities, Omega coefficients were calculated for each factor(<span class="math inline">\Omega_{AAC} = 0.832, p &lt; 0.01; \Omega_{AAE} = 0.830, p &lt; 0.01</span>).</p>
<div class="cell">
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">model03SyntaxOmega</span> <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">  # AAC loadings (all estimated)</span></span>
<span><span class="st">  AAC =~ L1*Aff1 + L2*Aff2 + L3*Aff3</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  # AAE loadings (all estimated)</span></span>
<span><span class="st">  AAE =~ L4*Aff4 + L5*Aff5 + L6*Aff6</span></span>
<span><span class="st">  </span></span>
<span><span class="st">  # Unique Variances:</span></span>
<span><span class="st">  Aff1 ~~ E1*Aff1; Aff2 ~~ E2*Aff2; Aff3 ~~ E3*Aff3; Aff4 ~~ E4*Aff4; Aff5 ~~ E5*Aff5; Aff6 ~~ E6*Aff6; </span></span>
<span><span class="st">  </span></span>
<span><span class="st">  </span></span>
<span><span class="st">  # Calculate Omega Reliability for Sum Scores:</span></span>
<span><span class="st">  OmegaAAC := ((L1 + L2 + L3)^2) / ( ((L1 + L2 + L3)^2) + E1 + E2 + E3)</span></span>
<span><span class="st">  OmegaAAE := ((L4 + L5 + L6)^2) / ( ((L4 + L5 + L6)^2) + E4 + E5 + E6)</span></span>
<span><span class="st">"</span></span>
<span></span>
<span><span class="va">model03EstimatesOmega</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/lavaan/man/sem.html">sem</a></span><span class="op">(</span>model <span class="op">=</span> <span class="va">model03SyntaxOmega</span>, data <span class="op">=</span> <span class="va">dat2</span>, estimator <span class="op">=</span> <span class="st">"MLR"</span>, mimic <span class="op">=</span> <span class="st">"mplus"</span>, std.lv <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">model03EstimatesOmega</span>, fit.measures <span class="op">=</span> <span class="cn">FALSE</span>, rsquare <span class="op">=</span> <span class="cn">FALSE</span>, standardized <span class="op">=</span> <span class="cn">FALSE</span>, header <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Parameter Estimates:

  Standard errors                             Sandwich
  Information bread                           Observed
  Observed information based on                Hessian

Latent Variables:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
  AAC =~                                              
    Aff1      (L1)    0.903    0.055   16.357    0.000
    Aff2      (L2)    1.153    0.042   27.771    0.000
    Aff3      (L3)    1.117    0.051   22.079    0.000
  AAE =~                                              
    Aff4      (L4)    1.047    0.053   19.604    0.000
    Aff5      (L5)    1.036    0.053   19.366    0.000
    Aff6      (L6)    1.107    0.044   25.112    0.000

Covariances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
  AAC ~~                                              
    AAE               0.838    0.028   29.829    0.000

Intercepts:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
   .Aff1              3.765    0.059   63.455    0.000
   .Aff2              3.635    0.059   61.382    0.000
   .Aff3              3.493    0.060   57.741    0.000
   .Aff4              4.189    0.058   71.689    0.000
   .Aff5              3.604    0.063   57.057    0.000
   .Aff6              4.018    0.058   68.948    0.000

Variances:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
   .Aff1      (E1)    0.970    0.083   11.753    0.000
   .Aff2      (E2)    0.449    0.057    7.860    0.000
   .Aff3      (E3)    0.607    0.084    7.244    0.000
   .Aff4      (E4)    0.635    0.085    7.504    0.000
   .Aff5      (E5)    0.950    0.090   10.539    0.000
   .Aff6      (E6)    0.497    0.061    8.191    0.000
    AAC               1.000                           
    AAE               1.000                           

Defined Parameters:
                   Estimate  Std.Err  z-value  P(&gt;|z|)
    OmegaAAC          0.832    0.016   51.512    0.000
    OmegaAAE          0.830    0.017   49.000    0.000</code></pre>
</div>
</div>
</section><section id="factor-scores-and-distributions" class="level2" data-number="6"><h2 data-number="6" class="anchored" data-anchor-id="factor-scores-and-distributions">
<span class="header-section-number">6</span> Factor Scores and Distributions</h2>
<p>The AAC factor scores have an estimated mean of 0 with a variance of 0.88 due to the effect of the prior distribution. The SE for each personâ€™s AAC factor score is 0.347; 95% confidence interval for AAC factor score is <span class="math inline">Score \pm 2*0.347</span> = <span class="math inline">Score \pm 0.694</span>. The AAE factor scores have an estimated mean of 0 with a variance of 0.881 due to the effect of the prior distribution. The SE for each personâ€™s AAC factor score is 0.357; 95% confidence interval for AAC factor score is <span class="math inline">Score \pm 2*0.357</span> = <span class="math inline">Score \pm 0.714</span>.</p>
<p>Factor Realiability for AAC is 0.892 and factor realibility for AAE is 0.887. Both factor reliability are larger than omega.</p>
<p>The resulting distribution of the EAP estimates of factor score as shown in Figure 1. Figure 2 shows the predicted response for each item as a linear function of the latent factor based on the estimated model parameters. As shown, for AAE factor, the predicted item response goes above the highest response option just before a latent factor score of 2 (i.e., 2 SDs above the mean), resulting in a ceiling effect for AAE factor, as also shown in Figure 1.</p>
<p>The extent to which the items within each factor could be seen as exchangeable was then examined via an additional set of nested model comparisons, as reported in Table 1 (for fit) and Table 2 (for comparisons of fit). Two-factor has better model fit than one-facor model. Moreover, according to chi-square difference test, two-factor is significantly better than one-factor in model fit.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>      AAC       AAE 
0.8925361 0.8867031 </code></pre>
</div>
</div>
</section><section id="figures" class="level2" data-number="7"><h2 data-number="7" class="anchored" data-anchor-id="figures">
<span class="header-section-number">7</span> Figures</h2>
<section id="figure-1-factor-score-distribution" class="level3" data-number="7.1"><h3 data-number="7.1" class="anchored" data-anchor-id="figure-1-factor-score-distribution">
<span class="header-section-number">7.1</span> Figure 1 : Factor Score Distribution</h3>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_bar()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 2 rows containing missing values (`geom_bar()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section><section id="figure-2-expected-item-response-plots" class="level3" data-number="7.2"><h3 data-number="7.2" class="anchored" data-anchor-id="figure-2-expected-item-response-plots">
<span class="header-section-number">7.2</span> Figure 2 : Expected Item Response Plots</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="index_files/figure-html/item-response-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section></section><section id="tables" class="level2" data-number="8"><h2 data-number="8" class="anchored" data-anchor-id="tables">
<span class="header-section-number">8</span> Tables</h2>
<section id="table-1-model-fit-statistics-using-mlr" class="level3" data-number="8.1"><h3 data-number="8.1" class="anchored" data-anchor-id="table-1-model-fit-statistics-using-mlr">
<span class="header-section-number">8.1</span> Table 1: Model Fit Statistics Using MLR</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-sm small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th"># Items</th>
<th style="text-align: right;" data-quarto-table-cell-role="th"># Parameters</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Scaled Chi-Square</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Chi-Square Scale Factor</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">DF</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">p-value</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">CFI</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSEA</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSEA Lower</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSEA Upper</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">RMSEA p-value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">One-Factor</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">75.834</td>
<td style="text-align: right;">1.522</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.927</td>
<td style="text-align: right;">0.9</td>
<td style="text-align: right;">0.000</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">1.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Two-Factor</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">21.512</td>
<td style="text-align: right;">1.503</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">0.006</td>
<td style="text-align: right;">0.979</td>
<td style="text-align: right;">0.9</td>
<td style="text-align: right;">0.046</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">0.475</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</section><section id="table-2-model-comparisons" class="level3" data-number="8.2"><h3 data-number="8.2" class="anchored" data-anchor-id="table-2-model-comparisons">
<span class="header-section-number">8.2</span> Table 2: Model Comparisons</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-sm small" data-quarto-postprocess="true">
<thead><tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Df</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Chisq diff</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Df diff</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Pr(&gt;Chisq)</th>
</tr></thead>
<tbody><tr class="odd">
<td style="text-align: left;">One-Factor vs. Two-Factor</td>
<td style="text-align: right;">9</td>
<td style="text-align: right;">49.652</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr></tbody>
</table>
</div>
</div>
</div>
</section><section id="table-3-model-estimates" class="level3" data-number="8.3"><h3 data-number="8.3" class="anchored" data-anchor-id="table-3-model-estimates">
<span class="header-section-number">8.3</span> Table 3: Model Estimates</h3>
<div class="cell">
<div class="cell-output-display">
<div>
<table class="table table-striped table-sm small" data-quarto-postprocess="true">
<colgroup>
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="empty-cells: hide; border-bottom: hidden"></th>
<th colspan="2" data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Unstandardized
</div></th>
<th data-quarto-table-cell-role="th" style="text-align: center; border-bottom: hidden; padding-bottom: 0; padding-left: 3px; padding-right: 3px;"><div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Standardized
</div></th>
</tr>
<tr class="odd">
<th style="text-align: left;" data-quarto-table-cell-role="th"></th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Estimate</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">SE</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">Estimate</th>
</tr>
</thead>
<tbody>
<tr class="odd" data-grouplength="3">
<td colspan="4" style="border-bottom: 1px solid"><strong>Forgiveness Factor Loadings</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 1</td>
<td style="text-align: right;">0.903</td>
<td style="text-align: right;">0.055</td>
<td style="text-align: right;">0.676</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 2</td>
<td style="text-align: right;">1.153</td>
<td style="text-align: right;">0.042</td>
<td style="text-align: right;">0.865</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 3</td>
<td style="text-align: right;">1.117</td>
<td style="text-align: right;">0.051</td>
<td style="text-align: right;">0.820</td>
</tr>
<tr class="odd" data-grouplength="3">
<td colspan="4" style="border-bottom: 1px solid"><strong>Not Unforgiveness Factor Loadings</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 4</td>
<td style="text-align: right;">1.047</td>
<td style="text-align: right;">0.053</td>
<td style="text-align: right;">0.796</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 5</td>
<td style="text-align: right;">1.036</td>
<td style="text-align: right;">0.053</td>
<td style="text-align: right;">0.728</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 6</td>
<td style="text-align: right;">1.107</td>
<td style="text-align: right;">0.044</td>
<td style="text-align: right;">0.844</td>
</tr>
<tr class="odd" data-grouplength="1">
<td colspan="4" style="border-bottom: 1px solid"><strong>Factor Covariance</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Factor Covariance</td>
<td style="text-align: right;">0.838</td>
<td style="text-align: right;">0.028</td>
<td style="text-align: right;">0.838</td>
</tr>
<tr class="odd" data-grouplength="6">
<td colspan="4" style="border-bottom: 1px solid"><strong>Item Intercepts</strong></td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 1</td>
<td style="text-align: right;">3.765</td>
<td style="text-align: right;">0.059</td>
<td style="text-align: right;">2.818</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 2</td>
<td style="text-align: right;">3.635</td>
<td style="text-align: right;">0.059</td>
<td style="text-align: right;">2.726</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 3</td>
<td style="text-align: right;">3.493</td>
<td style="text-align: right;">0.060</td>
<td style="text-align: right;">2.564</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 4</td>
<td style="text-align: right;">4.189</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">3.184</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 5</td>
<td style="text-align: right;">3.604</td>
<td style="text-align: right;">0.063</td>
<td style="text-align: right;">2.534</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 6</td>
<td style="text-align: right;">4.018</td>
<td style="text-align: right;">0.058</td>
<td style="text-align: right;">3.062</td>
</tr>
<tr class="even" data-grouplength="6">
<td colspan="4" style="border-bottom: 1px solid"><strong>Item Unique Variances</strong></td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 1</td>
<td style="text-align: right;">0.970</td>
<td style="text-align: right;">0.083</td>
<td style="text-align: right;">0.543</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 2</td>
<td style="text-align: right;">0.449</td>
<td style="text-align: right;">0.057</td>
<td style="text-align: right;">0.253</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 3</td>
<td style="text-align: right;">0.607</td>
<td style="text-align: right;">0.084</td>
<td style="text-align: right;">0.327</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 4</td>
<td style="text-align: right;">0.635</td>
<td style="text-align: right;">0.085</td>
<td style="text-align: right;">0.367</td>
</tr>
<tr class="odd">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 5</td>
<td style="text-align: right;">0.950</td>
<td style="text-align: right;">0.090</td>
<td style="text-align: right;">0.470</td>
</tr>
<tr class="even">
<td style="text-align: left; padding-left: 2em;" data-indentlevel="1">Item 6</td>
<td style="text-align: right;">0.497</td>
<td style="text-align: right;">0.061</td>
<td style="text-align: right;">0.288</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


</section></section><a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/jihongzhang\.org");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="JihongZ/quarto-academic-jihong" data-repo-id="R_kgDOJz3gyg" data-category="General" data-category-id="DIC_kwDOJz3gys4CXdYE" data-mapping="title" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="dark">
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Copyright 2015-2024, JihongZhang</p>
</div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>


</body></html>